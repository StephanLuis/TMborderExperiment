/*! permutive-javascript-sdk v19.29.0 (web) (built 2022-09-29T07:13:53.870Z) */(()=>{"use strict";var __webpack_modules__={2688:(e,r,t)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}t.d(r,{w:()=>n})},787:(e,r,t)=>{t.d(r,{A:()=>a});var n=t(3735),i=t(6567);function a(e){return(0,n.zG)((0,i.Y3)((()=>JSON.parse(e))),(0,i.fS)(n.gn))}},7183:(e,r,t)=>{t.d(r,{h:()=>n});const n=e=>new i(e);class i{constructor(e){const r=this;this._worker=e,this._callbacks={},this._id=0,e.addEventListener("message",(function(e){i.onMessage(r,e)}))}set id(e){this._id=e}get id(){return this._id}newId(){const e=this.id;return this.id=this.id+1,e}static onMessage(e,r){if(t=r.data,!(Array.isArray(t)&&t.length>=2))return;var t;const[n,i,a]=r.data,s=e._callbacks[n];s&&(delete e._callbacks[n],s(i,a))}static isServiceWorker(e){return void 0!==e.controller}postMessage(e){const r=this,t=this.newId(),n=[t,e];return new Promise((function(e,a){var s;if(r._callbacks[t]=function(r,t){if(r)return a(new Error(r.message));e(t)},i.isServiceWorker(r._worker)){const e=new MessageChannel;e.port1.onmessage=function(e){i.onMessage(r,e)},null===(s=r._worker.controller)||void 0===s||s.postMessage(n,[e.port2])}else r._worker.postMessage(n)}))}}},1828:(e,r,t)=>{t.d(r,{ap:()=>a,gz:()=>u});var n=t(3735),i=t(9384);function a(e,r){return function(t){return function(n){return e.ap(e.map(n,(function(e){return function(t){return r.ap(e,t)}})),t)}}}function s(e,r,t){return function(n){for(var i=Array(t.length+1),a=0;a<t.length;a++)i[a]=t[a];return i[t.length]=n,0===r?e.apply(null,i):s(e,r-1,i)}}var c={1:function(e){return[e]},2:function(e){return function(r){return[e,r]}},3:function(e){return function(r){return function(t){return[e,r,t]}}},4:function(e){return function(r){return function(t){return function(n){return[e,r,t,n]}}}},5:function(e){return function(r){return function(t){return function(n){return function(i){return[e,r,t,n,i]}}}}}};function o(e){return i.e$.call(c,e)||(c[e]=s(n.bc,e-1,[])),c[e]}function u(e){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var n=r.length,i=o(n),a=e.map(r[0],i),s=1;s<n;s++)a=e.ap(a,r[s]);return a}}},9320:(e,r,t)=>{t.d(r,{oA:()=>W,t9:()=>x,hX:()=>K,DZ:()=>z,Ew:()=>T,xH:()=>B,jV:()=>j,xb:()=>S,UI:()=>R,uK:()=>$,u4:()=>J,vP:()=>Q,DY:()=>C,G0:()=>A});var n,i=t(3735),a=t(9384);t(4268),t(7209),n=void 0;a.Xl,a.Od;var s=a.ri,c=a.YM,o=(a.F4,c);a.Gb;var u=function(e,r,t){if(t||2===arguments.length)for(var n,i=0,a=r.length;i<a;i++)!n&&i in r||(n||(n=Array.prototype.slice.call(r,0,i)),n[i]=r[i]);return e.concat(n||Array.prototype.slice.call(r))},d=function(e){return e.length>0},l=function(e){return function(r){return u(u([],r,!0),[e],!1)}},f=l,p=function(e){var r=function(e){return function(r){if(1===r.length)return h(r);for(var t=[v(r)],n=function(r){t.every((function(t){return!e.equals(t,r)}))&&t.push(r)},i=0,a=b(r);i<a.length;i++)n(a[i]);return t}}(e);return function(e){return function(t){return r((0,i.zG)(t,m(e)))}}},g=a.r1;function m(e,r){return r?e.concat(r):function(r){return r.concat(e)}}var h=g,_=function(e){return[e]};a.F4;var v=o,b=function(e){return e.slice(1)};t(4011);var w=t(4870);t(5605);function y(e){return function(r,t){if(void 0===t){var n=y(e);return function(e){return n(r,e)}}for(var i,a=0;a<t.length;a++)if(i=t[a],e.equals(i,r))return!0;return!1}}var q=s,k=function(e){return function(r){for(var t=[],n=0;n<r.length;n++){var i=e(n,r[n]);a.pC(i)&&t.push(i.value)}return t}},E=function(e){return k((function(r,t){return e(t)}))},D=(i.yR,function(e,r){return P(e,(function(e,t,n){return r(t,n)}))}),P=function(e,r){return function(t){for(var n=t.length,i=e,a=0;a<n;a++)i=r(a,i,t[a]);return i}};a.F4;var S=function(e){return 0===e.length},M=d,O=f;function T(e){return function(e){return function(r){for(var t=0;t<r.length;t++)if(e(r[t]))return a.G(r[t]);return a.YP}}(e)}var I=function(e){return e.slice()},C=function(e){return function(r){return r.length<=1?I(r):r.slice().sort(e.compare)}};var x=y;function A(e){var r=p(e);return function(t,n){if(void 0===n){var i=A(e);return function(e){return i(e,t)}}return M(t)&&M(n)?r(n)(t):M(t)?I(t):I(n)}}function j(e){var r=x(e);return function(t,n){if(void 0===n){var i=j(e);return function(e){return i(e,t)}}return t.filter((function(e){return r(e,n)}))}}var L=function(e,r,t){return(0,i.zG)(e,J(r,t))},U=_,R=function(e){return function(r){return r.map((function(r){return e(r)}))}},G=function(e){return function(r){return(0,i.zG)(r,function(e){return function(r){for(var t=[],n=0;n<r.length;n++)t.push.apply(t,e(n,r[n]));return t}}((function(r,t){return e(t)})))}},B=G(i.yR),N=function(e){return function(r){for(var t=[],n=0;n<r.length;n++){var i=e(n,r[n]);a.pC(i)&&t.push(i.value)}return t}},z=function(e){return N((function(r,t){return e(t)}))},W=z(i.yR),K=function(e){return function(r){return r.filter(e)}},$=function(e){return F((function(r,t){return e(t)}))},F=function(e){return function(r){for(var t=[],n=[],i=0;i<r.length;i++){var a=r[i];e(i,a)?n.push(a):t.push(a)}return(0,w.s4)(t,n)}},J=D,Q=function(e){return function(r){return L(r,e.of([]),(function(r,t){return e.ap(e.map(r,(function(e){return function(r){return(0,i.zG)(e,O(r))}})),t)}))}};a.F4},70:(e,r,t)=>{t.d(r,{G5:()=>g,dO:()=>l,Pd:()=>_,tS:()=>h,g_:()=>k,ij:()=>P,fS:()=>E,nM:()=>b,tO:()=>w,t$:()=>a,UI:()=>d,Vn:()=>v,EQ:()=>q,F2:()=>s,LF:()=>D,i$:()=>M,Y3:()=>S});var n=t(3735),i=t(9384),a=i.t$,s=i.F2,c=function(e,r){return(0,n.zG)(e,d(r))},o=function(e,r){return(0,n.zG)(e,p(r))},u="Either",d=function(e){return function(r){return b(r)?r:s(e(r.right))}},l={URI:u,map:c},f=s,p=function(e){return function(r){return b(r)?r:b(e)?e:s(r.right(e.right))}},g={URI:u,map:c,ap:o},m=function(e){return function(r){return b(r)?r:e(r.right)}},h=m,_=function(e,r){return function(t){return b(t)?a(e(t.left)):s(r(t.right))}},v=function(e){return function(r){return b(r)?a(e(r.left)):r}},b=(n.yR,i.nM),w=i.tO,y=function(e,r){return function(t){return b(t)?e(t.left):r(t.right)}},q=y,k=q,E=function(e){return function(r){return b(r)?e(r.left):r.right}},D=function(e){return b(e)?s(e.left):a(e.right)},P=function(e){return function(r){return null==r?a(e):s(r)}},S=function(e,r){try{return s(e())}catch(e){return a(r(e))}},M=y(n.yR,n.yR);i.F4,i.Xl},4268:(e,r,t)=>{t.d(r,{Uz:()=>i,f7:()=>n,w4:()=>a});t(3735);var n=function(e){return{equals:function(r,t){return r===t||e(r,t)}}},i=function(e){return function(r){return n((function(t,n){return r.equals(e(t),e(n))}))}},a={equals:function(e,r){return e===r}};a.equals},6567:(e,r,t)=>{t.d(r,{DT:()=>c,EQ:()=>h,G:()=>s,UI:()=>u,Uo:()=>f,Wi:()=>g,Y3:()=>w,YP:()=>a,fS:()=>v,g_:()=>_,ij:()=>b,pC:()=>p,tS:()=>l});var n=t(3735),i=t(9384),a=(t(6017),t(4870),t(5605),i.YP),s=i.G;function c(e){return function(r){return e(r)?s(r):a}}var o=function(e){return"Left"===e._tag?a:s(e.right)},u=function(e){return function(r){return g(r)?a:s(e(r.value))}},d=s,l=function(e){return function(r){return g(r)?a:e(r.value)}},f=(n.yR,o),p=i.pC,g=function(e){return"None"===e._tag},m=function(e,r){return function(t){return g(t)?e():r(t.value)}},h=m,_=h,v=function(e){return function(r){return g(r)?e():r.value}},b=function(e){return null==e?a:s(e)},w=function(e){try{return s(e())}catch(e){return a}};i.F4,i.Xl},7209:(e,r,t)=>{t.d(r,{Fp:()=>o,VV:()=>c,Zt:()=>s,uZ:()=>u});var n=t(4268),i=t(3735),a=function(e){return function(r,t){return r===t||0===e(r,t)}},s=function(e){return{equals:a(e),compare:function(r,t){return r===t?0:e(r,t)}}},c=(i.W8,function(e){return function(r,t){return r===t||e.compare(r,t)<1?r:t}}),o=function(e){return function(r,t){return r===t||e.compare(r,t)>-1?r:t}},u=function(e){var r=c(e),t=o(e);return function(e,n){return function(i){return t(r(i,n),e)}}};n.w4.equals},6017:(e,r,t)=>{t.d(r,{ff:()=>n});t(3735);var n=function(e){return function(r){return!e(r)}}},356:(e,r,t)=>{t.d(r,{hX:()=>H,jV:()=>G,xb:()=>A,XP:()=>L,dx:()=>U});t(4268);var n=t(3735),i=t(9384),a=(t(4870),t(2751)),s=(t(5605),function(e){for(var r in e)if(i.e$.call(e,r))return!1;return!0}),c=function(e){return function(r){return Object.keys(r).sort(e.compare)}};a.Df;var o=function(e,r){return function(t){if(i.e$.call(t,e)&&t[e]===r)return t;var n=Object.assign({},t);return n[e]=r,n}},u=function(e,r){return i.e$.call(r,e)};var d={};function l(e){return function(r){var t={};for(var n in r)i.e$.call(r,n)&&(t[n]=e(n,r[n]));return t}}function f(e){return l((function(r,t){return e(t)}))}function p(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(2===e.length)return p(a.Df).apply(void 0,e);var t=c(e[0]);return function(e,r){return function(n){for(var i=e,a=t(n),s=a.length,c=0;c<s;c++){var o=a[c];i=r(o,i,n[o])}return i}}}function g(e){if("compare"in e){var r=c(e);return function(e){return function(t){return function(n){for(var i=e.empty,a=r(n),s=a.length,c=0;c<s;c++){var o=a[c];i=e.concat(i,t(o,n[o]))}return i}}}}return g(a.Df)(e)}function m(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(2===e.length)return m(a.Df).apply(void 0,e);var t=c(e[0]);return function(e,r){return function(n){for(var i=e,a=t(n),s=a.length-1;s>=0;s--){var c=a[s];i=r(c,n[c],i)}return i}}}function h(e){return S(a.Df)(e)}function _(e){return function(r){var t={},n=!1;for(var a in r)if(i.e$.call(r,a)){var s=r[a];e(a,s)?t[a]=s:n=!0}return n?t:r}}var v=function(e){return function(r){return function(t){if(s(t)||s(r))return d;var n={};for(var i in t)u(i,r)&&(n[i]=e.concat(t[i],r[i]));return n}}},b=function(e,r){return(0,n.zG)(e,f(r))},w=function(e){var r=T(e);return function(e,t,i){return(0,n.zG)(e,r(t,i))}},y=function(e){return function(r){var t=I(e)(r);return function(e,r){return(0,n.zG)(e,t(r))}}},q=function(e){var r=C(e);return function(e,t,i){return(0,n.zG)(e,r(t,i))}},k=function(e){var r=p(e);return function(e,t,i){return(0,n.zG)(e,r(t,i))}},E=function(e){var r=g(e);return function(e){var t=r(e);return function(e,r){return(0,n.zG)(e,t(r))}}},D=function(e){var r=m(e);return function(e,t,i){return(0,n.zG)(e,r(t,i))}},P=function(e){var r=M(e);return function(e){var t=r(e);return function(e,r){return t(e,(0,n.ls)(n.SK,r))}}},S=function(e){var r=P(e);return function(e){var t=r(e);return function(e){return t(e,n.yR)}}},M=function(e){return function(r){var t=c(e);return function(e,n){var i=t(e);if(0===i.length)return r.of(d);for(var a=r.of({}),s=function(t){a=r.ap(r.map(a,(function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}})),n(t,e[t]))},c=0,o=i;c<o.length;c++){s(o[c])}return a}}},O=function(e){return _((function(r,t){return e(t)}))};function T(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(1===e.length){var t=p(e[0]);return function(e,r){return t(e,(function(e,t,n){return r(t,n)}))}}return T(a.Df).apply(void 0,e)}function I(e){if("compare"in e){var r=g(e);return function(e){var t=r(e);return function(e){return t((function(r,t){return e(t)}))}}}return I(a.Df)(e)}function C(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(1===e.length){var t=m(e[0]);return function(e,r){return t(e,(function(e,t,n){return r(t,n)}))}}return C(a.Df).apply(void 0,e)}var x="ReadonlyRecord";a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;var A=s,j=function(e){return function(r){return Object.keys(r).sort(e.compare)}},L=j(a.Df);var U=o;function R(e){return h(e)}var G=function(e){return function(r){return function(t){return A(t)||A(r)?{}:v(e)(r)(t)}}},B=b,N=w,z=y,W=q,K=k,$=E,F=D,J=P,Q=function(e){return function(r){var t=j(e);return function(e,n){var i=t(e);if(0===i.length)return r.of({});for(var a=r.of({}),s=function(t){a=r.ap(r.map(a,(function(e){return function(r){return e[t]=r,e}})),n(t,e[t]))},c=0,o=i;c<o.length;c++){s(o[c])}return a}}},H=O;var V="Record";a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},4870:(e,r,t)=>{t.d(r,{s4:()=>n});t(3735);var n=function(e,r){return{left:e,right:r}}},5857:(e,r,t)=>{t.d(r,{e5:()=>f,Eh:()=>u,G0:()=>l});var n=t(4268),i=t(6017);new Set;var a=function(e){return function(r){for(var t,n=r.values(),i=!1;!i&&!(t=n.next()).done;)i=e(t.value);return i}};function s(e){return(0,i.ff)(a((0,i.ff)(e)))}function c(e){var r=o(e);return function(t,n){if(void 0===n){var i=c(e);return function(e){return i(e,t)}}return s((function(e){return r(e,n)}))(t)}}function o(e){return function(r,t){if(void 0===t){var n=o(e);return function(e){return n(r,e)}}for(var i,a=t.values(),s=!1;!s&&!(i=a.next()).done;)s=e.equals(r,i.value);return s}}var u=function(e){var r=c(e);return(0,n.f7)((function(e,t){return r(e,t)&&r(t,e)}))};function d(e){return function(r){for(var t,n=r.values(),i=new Set;!(t=n.next()).done;){var a=t.value;e(a)&&i.add(a)}return i}}function l(e){var r=g(e);return function(t,n){if(void 0===n){var i=l(e);return function(e){return i(t,e)}}if(p(t))return n;if(p(n))return t;var a=new Set(t);return n.forEach((function(e){r(e,a)||a.add(e)})),a}}function f(e){var r=g(e);return function(t,n){if(void 0===n){var i=f(e);return function(e){return i(e,t)}}return d((function(e){return!r(e,n)}))(t)}}new Set;var p=function(e){return 0===e.size},g=o},5151:(e,r,t)=>{t.d(r,{Hi:()=>h,PM:()=>m,RD:()=>q,UA:()=>_,UI:()=>u,dO:()=>g,oE:()=>E,of:()=>l,pE:()=>k,tD:()=>a,tS:()=>f});var n=t(3735),i=t(9384),a=function(e){return function(){return Promise.resolve().then(e)}};var s=function(e,r){return(0,n.zG)(e,u(r))},c=function(e,r){return(0,n.zG)(e,d(r))},o=function(e,r){return(0,n.zG)(e,f(r))},u=function(e){return function(r){return function(){return Promise.resolve().then(r).then(e)}}},d=function(e){return function(r){return function(){return Promise.all([Promise.resolve().then(r),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},l=function(e){return function(){return Promise.resolve(e)}},f=function(e){return function(r){return function(){return Promise.resolve().then(r).then((function(r){return e(r)()}))}}},p="Task";var g={URI:p,map:s},m={URI:p,of:l},h={URI:p,map:s,ap:c},_={URI:p,map:s,of:l,ap:c,chain:o},v=n.yR,b=(i.F4,l(i.Xl)),w=function(e){var r=function(e){return function(r){return function(){return Promise.all(r.map((function(r,t){return Promise.resolve().then((function(){return e(t,r)()}))})))}}}(e);return function(e){return i.Od(e)?r(e):b}},y=function(e){var r=function(e){return function(r){return function(){return i.Gb(r).reduce((function(r,t,n){return r.then((function(r){return Promise.resolve().then(e(n+1,t)).then((function(e){return r.push(e),r}))}))}),Promise.resolve().then(e(0,i.YM(r))).then(i.ri))}}}(e);return function(e){return i.Od(e)?r(e):b}},q=function(e){return w((function(r,t){return e(t)}))}(n.yR),k=function(e){return y((function(r,t){return e(t)}))},E={URI:p,map:s,of:l,ap:c,chain:o,fromIO:a,fromTask:v}},7112:(e,r,t)=>{function n(e){return function(r,t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(e){var t;return Object.assign({},n,((t={})[r]=e,t))}))}))}}}t.d(r,{Do:()=>Y,ak:()=>X,tS:()=>J,g_:()=>B,Uo:()=>R,fF:()=>U,t$:()=>x,UI:()=>$,F2:()=>A,Y3:()=>N});var i=t(1828),a=t(70),s=t(3735);function c(e,r){return function(t){return function(n){return e.map(n,(function(e){return r.map(e,t)}))}}}function o(e){return(0,s.ls)(a.F2,e.of)}function u(e){return(0,s.ls)(a.t$,e.of)}function d(e){return function(r){return e.map(r,a.F2)}}function l(e){return function(r){return e.map(r,a.t$)}}function f(e){return function(r){return(0,s.ls)(a.ij(r),e.of)}}function p(e){var r=f(e);return function(e){var t=r(e);return function(e){return(0,s.ls)(e,t)}}}function g(e){var r=_(e),t=p(e);return function(e){var n=t(e);return function(e){return r(n(e))}}}function m(e){return c(e,a.dO)}function h(e){return(0,i.ap)(e,a.G5)}function _(e){return function(r){return function(t){return e.chain(t,(function(t){return a.nM(t)?e.of(t):r(t.right)}))}}}function v(e){return function(r){return function(t){return e.chain(t,(function(t){return a.nM(t)?r():e.of(t)}))}}}function b(e){return function(r,t){return function(n){return e.map(n,a.Pd(r,t))}}}function w(e){return function(r){return function(t){return e.map(t,a.Vn(r))}}}function y(e){return function(r,t){return function(n){return e.map(n,a.EQ(r,t))}}}function q(e){return function(r,t){return function(n){return e.chain(n,a.EQ(r,t))}}}function k(e){return function(r){return function(t){return e.chain(t,a.EQ(r,e.of))}}}function E(e){return function(r){return function(t){return e.chain(t,(function(t){return a.nM(t)?r(t.left):e.of(t)}))}}}function D(e){var r=E(e);return function(t){return r((function(r){return e.map(t(r),(function(e){return a.nM(e)?e:a.t$(r)}))}))}}function P(e){return function(r){return function(t){return e.chain(t,a.EQ((function(t){return e.map(r(t),a.t$)}),(function(r){return e.of(a.F2(r))})))}}}function S(e){return function(r){return e.map(r,a.LF)}}function M(e){return function(r){return e.map(r,a.i$)}}var O=t(9384),T=t(5151),I=function(e,r,t,n){return new(t||(t=Promise))((function(i,a){function s(e){try{o(n.next(e))}catch(e){a(e)}}function c(e){try{o(n.throw(e))}catch(e){a(e)}}function o(e){var r;e.done?i(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(s,c)}o((n=n.apply(e,r||[])).next())}))},C=function(e,r){var t,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=r.call(e,s)}catch(e){a=[6,e],n=0}finally{t=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},x=u(T.PM),A=o(T.PM),j=d(T.dO),L=l(T.dO),U=(T.tD,T.tD,j),R=T.of,G=(T.tD,T.dO,q(T.UA)),B=G,N=(T.UA,function(e,r){return function(){return I(void 0,void 0,void 0,(function(){var t;return C(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(O.F2)];case 1:return[2,n.sent()];case 2:return t=n.sent(),[2,O.t$(r(t))];case 3:return[2]}}))}))}}),z=(T.dO,T.PM,T.PM,T.UA,T.UA,T.UA,T.UA,T.dO,function(e,r){return(0,s.zG)(e,$(r))}),W=function(e,r){return(0,s.zG)(e,F(r))},K=function(e,r){return(0,s.zG)(e,J(r))},$=m(T.dO),F=(T.dO,T.dO,h(T.Hi)),J=_(T.UA),Q=(T.UA,A),H="TaskEither";var V={URI:H,map:z,ap:W,chain:K};var Y=Q(O.F4),X=n(V);O.Xl},5605:(e,r,t)=>{function n(e,r){return function(t){var n=e.traverse(t);return function(e,i){return t.map(n(e,i),r.separate)}}}function i(e,r){return function(t){var n=e.traverse(t);return function(e,i){return t.map(n(e,i),r.compact)}}}t.d(r,{BL:()=>i,Fj:()=>n})},3735:(e,r,t)=>{t.d(r,{MZ:()=>i,Q1:()=>o,SK:()=>f,W8:()=>s,a9:()=>a,bc:()=>d,gn:()=>c,ls:()=>u,yR:()=>n,zG:()=>l});function n(e){return e}var i=n;function a(e){return function(){return e}}var s=a(!0),c=a(null),o=a(void 0);function u(e,r,t,n,i,a,s,c,o){switch(arguments.length){case 1:return e;case 2:return function(){return r(e.apply(this,arguments))};case 3:return function(){return t(r(e.apply(this,arguments)))};case 4:return function(){return n(t(r(e.apply(this,arguments))))};case 5:return function(){return i(n(t(r(e.apply(this,arguments)))))};case 6:return function(){return a(i(n(t(r(e.apply(this,arguments))))))};case 7:return function(){return s(a(i(n(t(r(e.apply(this,arguments)))))))};case 8:return function(){return c(s(a(i(n(t(r(e.apply(this,arguments))))))))};case 9:return function(){return o(c(s(a(i(n(t(r(e.apply(this,arguments)))))))))}}}function d(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e}function l(e,r,t,n,i,a,s,c,o){switch(arguments.length){case 1:return e;case 2:return r(e);case 3:return t(r(e));case 4:return n(t(r(e)));case 5:return i(n(t(r(e))));case 6:return a(i(n(t(r(e)))));case 7:return s(a(i(n(t(r(e))))));case 8:return c(s(a(i(n(t(r(e)))))));case 9:return o(c(s(a(i(n(t(r(e))))))));default:for(var u=arguments[0],d=1;d<arguments.length;d++)u=arguments[d](u);return u}}var f=function(e,r){return r}},9384:(e,r,t)=>{t.d(r,{F2:()=>d,F4:()=>h,G:()=>s,Gb:()=>g,Od:()=>f,Xl:()=>m,YM:()=>p,YP:()=>a,e$:()=>_,nM:()=>c,pC:()=>i,r1:()=>v,ri:()=>l,t$:()=>u,tO:()=>o});var n=function(e,r,t){if(t||2===arguments.length)for(var n,i=0,a=r.length;i<a;i++)!n&&i in r||(n||(n=Array.prototype.slice.call(r,0,i)),n[i]=r[i]);return e.concat(n||Array.prototype.slice.call(r))},i=function(e){return"Some"===e._tag},a={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},o=function(e){return"Right"===e._tag},u=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},l=function(e){return[e]},f=function(e){return e.length>0},p=function(e){return e[0]},g=function(e){return e.slice(1)},m=[],h={},_=Object.prototype.hasOwnProperty,v=function(e){return n([e[0]],e.slice(1),!0)}},4011:(e,r,t)=>{t.d(r,{Df:()=>i,Eq:()=>n});var n={equals:function(e,r){return e===r}},i={equals:n.equals,compare:function(e,r){return e<r?-1:e>r?1:0}};n.equals,i.compare},2751:(e,r,t)=>{t.d(r,{Df:()=>i,Eq:()=>n,pn:()=>s,xb:()=>a});var n={equals:function(e,r){return e===r}},i={equals:n.equals,compare:function(e,r){return e<r?-1:e>r?1:0}},a=function(e){return 0===e.length},s=function(e,r){return function(t){return t.endsWith(e,r)}}},655:(e,r,t)=>{t.d(r,{_T:()=>n,mG:()=>i});function n(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]])}return t}function i(e,r,t,n){return new(t||(t=Promise))((function(i,a){function s(e){try{o(n.next(e))}catch(e){a(e)}}function c(e){try{o(n.throw(e))}catch(e){a(e)}}function o(e){var r;e.done?i(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(s,c)}o((n=n.apply(e,r||[])).next())}))}Object.create;Object.create},477:e=>{e.exports=function(e,r,t,n){var i=self||window;try{try{var a;try{a=new i.Blob([e])}catch(r){(a=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),a=a.getBlob()}var s=i.URL||i.webkitURL,c=s.createObjectURL(a),o=new i[r](c,t);return s.revokeObjectURL(c),o}catch(n){return new i[r]("data:application/javascript,".concat(encodeURIComponent(e)),t)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new i[r](n,t)}}},9417:(e,r,t)=>{t(1057),t(3351)},8206:(e,r,t)=>{t.d(r,{lg:()=>g,Bt:()=>m});var n=t(9320),i=t(3735),a=t(6567),s=t(6017),c=t(356),o=t(2751),u=t(6013);class d{constructor(e,r,t,n){this.userId=e,this.network=r,this.api=t,this.logger=n,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["","0","-1"]}getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((e=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,i.zG)((0,a.DT)((e=>this.isValidAlias(e.uid)))(e),(0,a.UI)((e=>e.uid)))})),(e=>({type:"attempted",result:a.YP})))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class l{constructor(e,r,t,n,i){this.config=e,this.network=r,this.api=t,this.userId=n,this.logger=i,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://8347d761-7b38-45f0-b0a8-34b664f7c00f.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,a.ij)(e.uid)})),(e=>({type:"attempted",result:a.YP})))}reset(){return(0,u.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}const f=new Set(["public","email","email_md5","email_sha256"]),p=(e,r)=>!!e.id&&!(0,n.t9)(o.Eq)(e.tag,r);class g{constructor(e,r,t,n,i){this.metrics=e,this.trace=r,this.permutiveData=t,this.identityProviderEnv=n,this.logger=i,this.identities={},this.providers={},this.identitiesLastModified=new Date,this.identities=this.getCachedIdentitiesAndMigrateIfRequired()}get getIdentitiesLastModified(){return this.identitiesLastModified}prepareThirdPartyIdentities(){this.logger.debug("Identities: starting to load identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),r=this.trace.startSpan("load_tpd_ids"),t=[{load:e=>{return r=e.config,t=e.network,n=e.api,i=e.userId,s=e.logger,(0,a.G)(new l(r,t,n,i,s));var r,t,n,i,s}},{load:e=>{return r=e.userId,t=e.network,n=e.api,i=e.logger,(0,a.G)(new d(r,t,n,i));var r,t,n,i}},{load:e=>(e.cookies,a.YP)},{load:e=>(e.cookies,a.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,a.YP)}],s=(0,n.oA)(t.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,i.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(s).then((e=>e.map((([e,r])=>(this.providers[e.tag]=e,this.setTPDIdentityIfPresent(e.tag,r,e.ttlInSeconds)))))).then((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),r.finish()}))}getPrioritizedIdentities(e){const r={default:0,appnexus:1,pxid:1},t=Object.entries(e).map((([e,{id:r,expiry:t,priority:n}])=>Object.assign(Object.assign(Object.assign({tag:e},r?{id:r}:{}),t?{expiry:t}:{}),void 0!==n?{priority:n}:{}))),i=t.filter((e=>p(e,Object.values(this.providers).map((e=>e.tag))))),s=t.filter((e=>((e,r)=>!!e.id&&!!(0,n.t9)(o.Eq)(e.tag,r))(e,Object.values(this.providers).map((e=>e.tag))))),c=(0,n.DZ)((e=>(0,a.ij)(e.priority)))(i),u=c.length>0?Math.max(...c):0,d=i.map((e=>void 0!==e.priority?Object.assign(Object.assign({},e),{priority:e.priority}):Object.assign(Object.assign({},e),{priority:u+1}))),l=s.map((e=>void 0===r[e.tag]?{tag:e.tag,id:e.id,priority:u+h}:{tag:e.tag,id:e.id,priority:u+_}));return d.concat(l)}getIdentitiesMap(){return this.getFilteredIdentities(((e,r)=>!!r.value))}getCustomerDefinedIdentitiesMap(){return this.getFilteredIdentities(((e,r)=>p({tag:e,id:r.value,expiry:r.expiry,priority:r.priority},Object.values(this.providers).map((e=>e.tag)))))}getTPDIdentitiesMap(){return this.getFilteredIdentities(((e,r)=>{var t,n;return!!r.value&&!!(null===(n=null===(t=this.providers)||void 0===t?void 0:t[e])||void 0===n?void 0:n.usedForThirdPartyData)}))}parseCustomerDefinedIdentities(e){const r=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,t=e=>{throw new Error(e)},n=e=>(e.forEach((e=>{(e=>"string"==typeof e.id&&"string"==typeof e.tag)(e)||t(r),(e=>"email_sha256"!==e.tag||g.emailSHA256Regex.test(e.id))(e)||t("Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")})),e);return"string"==typeof e?(i=e).length>0?[{id:i,tag:"default"}]:t(r):Array.isArray(e)?n(e):t(r);var i}extractIdentifyFromQueue({global:e},r=[]){const t=()=>e.q.findIndex((e=>"identify"===e.functionName)),n=(r,i)=>{if(r<0)return i;const a=e.q.splice(r,1)[0],s=this.parseCustomerDefinedIdentities(a.arguments[0]);return n(t(),i.concat(s))};return n(t(),r)}checkIdentitiesHaveBeenModified(e){const r={concat:(e,r)=>o.Eq.equals(e.value,r.value)?{}:(0,i.bc)(e,r)};return(0,i.zG)((0,c.jV)(r)(this.identities)(e),u.hk,(e=>{const r=(0,s.ff)(c.xb)(e);return this.logger.debug("[identities] is modified",r,e),r}))}setIdentities(e){let r=!1;const t=e.filter((e=>!f.has(e.tag))).reduce(((e,{tag:t,id:n,expiry:i,priority:a})=>(void 0===this.identities[t]&&(r=!0,this.logger.debug(`identities[${t}]: added`)),e[t]=Object.assign(Object.assign(Object.assign({},n?{value:n}:{}),i?{expiry:i}:{}),void 0!==a?{priority:a}:{}),e)),{});(r||this.checkIdentitiesHaveBeenModified(t))&&(this.identitiesLastModified=new Date),this.identities=Object.assign(Object.assign({},this.identities),t),this.logger.debug("[identities] Updating to",this.identities),this.permutiveData.setData("identities",this.identities)}reset(){return(0,i.zG)(this.identities={},(e=>Promise.all(Object.values(this.providers).map((e=>e.reset()))).then(i.Q1)))}getFilteredIdentities(e){return(0,u.m8)(...Object.entries(this.identities).filter((([r,t])=>e(r,t))).map((([e,{value:r,expiry:t,priority:n}])=>(0,i.bc)(e,Object.assign(Object.assign({id:r},t?{expiry:t}:{}),void 0!==n?{priority:n}:{})))))}shouldAskForNewIdentity(e){var r;const t=(0,a.ij)(null===(r=this.identities)||void 0===r?void 0:r[e.tag]);return(0,a.g_)((()=>!0),this.isIdentityExpired)(t)}getCachedTPDIdentity(e){return this.identities[e]?(0,a.ij)(this.identities[e].value):a.YP}setTPDIdentityIfPresent(e,r,t=86400){const n=()=>Date.now()+Math.floor(1e3*t);return(0,a.g_)((()=>this.setIdentities([{tag:e,expiry:n()}])),(r=>this.setIdentities([{tag:e,id:r,expiry:n()}])))(r)}retrieveIdentity(e){return e.getId().then((r=>"skipped"===r.type?(0,i.bc)(e,a.YP):(0,i.zG)(r.result,(r=>this.metrics.track({name:(0,a.pC)(r)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(t=>(0,i.bc)(e,r.result)))))}isIdentityExpired(e){return e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,u.m8)(...Object.entries(e).filter((([e,r])=>!this.isIdentityExpired(r)&&!f.has(e)))))(this.permutiveData.getData("identities")||{})}}g.emailSHA256Regex=/^[a-f0-9]{64}$/;const m=(e,r,t,i,a)=>{const s=(e,r)=>{const t=["(null)"];return t.indexOf(e)>-1||!!b[e]||(0,n.jV)(o.Eq)(r,t).length>0},c=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,r,t)=>["thestudentroom.co.uk"].some((e=>t.indexOf(e)>-1))&&(0,n.jV)(o.Eq)(r,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":c,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":c,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},d={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!v[e]},l=u[e]||d[r];return!!l&&l(a,t,i)},h=2,_=3,v={},b={}},6815:(e,r,t)=>{t.d(r,{z:()=>n});class n{ingestIfEligible(e){return Promise.resolve()}}},64:(e,r,t)=>{t.d(r,{CL:()=>l,D0:()=>i,ED:()=>a,EW:()=>f,MU:()=>h,PH:()=>d,UW:()=>m,Uy:()=>o,eV:()=>s,jH:()=>p,mL:()=>g,qr:()=>c,t2:()=>u});var n=t(5506);const i=(0,n.MU)("engagement_edge_only",!0),a=(0,n.MU)("segment_transition_edge_only",!0),s=(0,n.MU)("track_form_submission",!0),c=(0,n.MU)("track_link_click",!0),o=(0,n.MU)("track_pageview_complete",!0),u=(0,n.MU)("track_pageview_engagement",!0),d=((0,n.$S)("sync_segments_cookie",!1),(0,n.$S)("track_slot_clicked",!0)),l=(0,n.$S)("track_slot_rendered",!0),f=(0,n.$S)("track_slot_viewable",!1),p=(0,n.$S)("track_targeting_keys",!1),g=((0,n.p1)("revenue_insights_enabled",!1),(0,n.p1)("data_provider_config",{ac_bidders:[]}),"_psegs"),m=!0,h=6e5},274:(e,r,t)=>{t.d(r,{U:()=>n});const n={$ip_address:"$ip_address",$ip_address_hash:"$ip_address_hash",$ip_geo_info_city:"$ip_geo_info_city",$ip_geo_info_continent:"$ip_geo_info_continent",$ip_geo_info_country:"$ip_geo_info_country",$ip_geo_info_postal_code:"$ip_geo_info_postal_code",$ip_geo_info_province:"$ip_geo_info_province",$ip_isp_info_autonomous_system_organization:"$ip_isp_info_autonomous_system_organization",$ip_isp_info_isp:"$ip_isp_info_isp",$ip_isp_info_organization:"$ip_isp_info_organization"}},8764:(e,r,t)=>{t.d(r,{v:()=>a});class n{constructor(e,r,t,n,i,a,s){this.logger=e,this.permutive=r,this.id=t,this.segmentCode=n,this.triggerType=i,this.config=a,this.workspaceLevelConfig=s}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,r){const t={reaction_id:this.id,type:e};this.permutive.track("Reaction",t,r),this.logger.log(t.type,t)}}var i=t(5506);class a{constructor(e,r,t){this.logger=e,this.permutive=r,this.clientContext=t,this.optimisedActivationsConfig={dfp:{dfp:[32018,77412,75149,75151,75199,96714,96715,96716,96721,91332,96717,96718,96719,96720,91341,91351,91350,91352,91353,96739,91354,91356,76363,91359,91361,91362,91364,91365,91372,91373,91374,91376,91366,91368,91371,91375,77661,77662,75469,104053,104054,104056,105236,104057,104055,105232,105237,104400,104401,77168,77169,76450,71267,70044,91474,91475,91476,88370,88372,70051,70052,88386,70049,64455,70054,70055,70056,70057,70058,70059,70060,58365,59438,59442,59443,61267,61271,99477,99483,99478,99488,63038,63039,63040,63042,27134,88590,88593,88592,88609,63526,63529,63530,63535,63527,63528,63531,63533,63534,99479,99484,99480,88577,84369,32305,32072,32074,32309,32075,32350,31722,31723,99485,99487,99489,28416,26499,26111,26373,32365,32406,32408,91658,99486,63536,63537,63538,63539,33219,63540,63541,63542,64136,63118,64481,64483,63189,63190,89070,88883,88882,89069,67583,88881,89072,67585,89071,89068,67587,67591,67589,67593,89067,67594,67595,89066,67596,89065,89064,89074,40825,37975,72657,72658,46832,89179,91864,91866,91867,91868,91934,91928,91931,91932,91933,91937,91938,46833,91939,91941,91940,91972,91997,69186,92059,92060,92061,92062,92063,92064,92065,92068,92074,92066,92071,92067,92069,92070,92072,92073,92075,92076,92079,92080,92081,92082,92083,92084,52419,69462,69463,69466,69468,69478,54402,54875,54880,54881,54882,24318,27603,32126,31912,32304,32127,32073,32306,32307,32308,32360,32310,32311,32361,32312,32363,32355,32364,24713,26109,26110,32296,26368,28420,28419,26745,32298,32367,32370,32372,32380,32384,32385,32404,32410,32411,32412,32413,32414,32557,26333,32761,33220,33221,33222,33223,47191,94762,101560,94766,92248,101580,94774,49022,94839,94900,92522,92538,92541,92545,66793,92559,92586,92588,92587,92589,92590,92592,92596,92597,92598,92591,92593,92594,92595,90056,99582,99585,99587,99599,99603,99583,90062,99584,99586,99593,99588,99594,99596,99601,99604,99589,99592,99597,99598,99600,99602,97707,100801,100802,98522,98525,98526,90178,83961,77728,73522,73540,73541,73542,73543,73607,73608,73609,73610,73611,73612,73613,73614,73615,73616,73617,73620,73623,73625,73626,73627,73632,73634,73635,73636,73638,73640,73816,73820,73821,73822,73823,73824,73827,73829,73831,73834,73841,73842,73843,73844,73845,73846,73847,73848,73849,73850,76174,74324,74366,74376,74377,74378,74379,74380,74381,74382,74383,74385,74386,74387,74388,74389,74390,74392,74393,74395,74397,74391,74394,74396,74825,74826,74828,74829,74830,74831,74833,74834,74835,74836,74837,74855,74856,74857,74858,79422,97811,97812,97814,97815,97816,95231,97813,97817,97818,97819,97820,97821,100893,100894,90448,90445,90443,90442,90438,90436,90447,90444,90441,90446,90440,90439,90437,90435,90433,90432,90431,90430,90429,58367,79569,92811,92985,92986,92988,92989,92990,92991,92993,92995,92998,92999,79582,92987,79583,92992,92994,79584,92996,92997,104725,95313,35768,52236,35772,80517,80547,90608,90609,90604,90603,90607,90606,90605,95385,95386,95387,95389,106190,95390,95391,95392,81095,81196,95396,95401,95394,95395,95397,95399,95398,81326,95400,81403,81424,81425,81426,81427,81428,81429,81430,81431,81432,81433,81434,81435,81443,81444,81445,81446,81447,81448,81450,81451,81452,81453,81454,81458,81459,81460,81461,81462,81464,81465,81466,81467,81468,81469,81470,81471,81472,81473,81474,81475,81476,81477,81478,81479,81480,81527,95402,81767,81760,95403,95404,95405,93330,81882,82014,81848,81905,81906,81982,82081,82044,81881,82076,95407,95411,95412,95410,95413,95414,95416,95415,82311,95423,95424,95425,95426,95428,95431,95429,95430,100113,100112,100114,90709,83139,83140,99088,83603,83688,83890,95496,95497,95498,95500,84090,84174,95502,95503,95504,95505,84209,95507,95510,95508,95509,100287,84430,84452,84472,84474,84609,84639,84805,84810,84922,84923,84924,84925,84926,84927,84928,84931,84936,85099,90852,90851,95579,95581,95580,95585,95582,95583,95584,95586,95589,95593,95594,95598,95601,95603,95608,95614,95622,95595,95609,95623,95600,95621,95616,95624,102569,103502,85529,100463,100465,100466,100471,100472,103509,100473,103510,85671,85672,85674,85972,85973,85974,85975,85994,86155,86109,86038,87084,87221,87499,101368,87825,87827,87828,87829,87831,87832,87833,87834,87837,87838,87839,87841,87842,87843,87844,87845,87846,87847,87848,87849,91171,87903,88011,88107,88187,88191,96442,96443,96444,96446,96448,96450,96445,96447,96449,96451,96452,105215,96711,96712,96713,106623,106491,98150,108551,109010,109062,47192,109215,109216,109217,109610,109686,109690,109692,109694,109695,109696,109697,109693,109775,109920,109921,109923,109927,110024,110652,110653,110654,111622,111623,111624,111803,111804,111805,111806,111809,111810,111811,111812,111813,111814,111815,111816,111818,111851,111845,111850,111852,111853,111869,111870,111872,111874,111877,111887,111888,111890,111898,111903,111995,111998,111999,111654,112090,112099,112100,112101,112109,112108,112110,112905,112906,112907,112912,112913,112914,113114,113116,113117,113121,35769,110519,111849,111844,111846,111854,113686,113687,113688,113689,113690,113691,113692,113693,113694,113695,113696,113697,113698,113700,113701,113702,113703,113704,113705,113708,113706,113707,113834,113906,113907,113908,113909,113910,113911,113912,113913,113914,113915,42390,42389,114763,114764,114765,114766,114767,114768,114769,115518,115593,116600,117078,117079,117422,117423,117424,117425,117426,117427,117428,117429,117430,117431,117432,117433,117540,117541,117542,117543,117544,117545,117547,117548,117549,117550,117554,117555,117556,117557,117574,117579,117756,117757,118547,118548,118549,118550,118551,118552,118553,118554,118555,118758,118759,118817,118819,118820,118821,118822,118854,119204,119205,119211,120662,120663,121841,121842,121843,121844,121845,121846,121847,121848,122492,122544,122822,122961,122962,122963,122964,122965,122966,122967,122968,122969,122970,122971,122972,122973,122974,122975,122976,122977,122978,122979,122980,122981,122982,122983,122985,122984],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:676},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const r=e.cc,t=e=>{const r=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return r===e.value;case"NOT_EQUALS":return r!==e.value;case"CONTAINS":return"string"==typeof r&&r.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof r&&r.indexOf(e.value)<0}};return!r||("AND"===(n=r).operator?n.criteria.every(t):n.criteria.some(t));var n}}},5506:(e,r,t)=>{t.d(r,{$S:()=>s,Hn:()=>i,MU:()=>a,p1:()=>c});const n={facebook_pixel_v2:{auto_init:!0,activationConfigs:[{id:"f4d6ddc0-9b4f-41a1-b092-860ac9984b07",tt:"EveryTime",sc:105237,c:{},wc:{}},{id:"7d0d3b9d-08cf-424b-9f3f-783e4fc7180a",tt:"EveryTime",sc:31723,c:{},wc:{}},{id:"253245d5-f42d-4243-9d36-de44519b224d",tt:"EveryTime",sc:32367,c:{},wc:{}},{id:"538999cb-a763-4603-83b1-973ae85b5a1c",tt:"EveryTime",sc:32372,c:{},wc:{}},{id:"61f96489-6824-44ee-9920-bb0caf6584c2",tt:"EveryTime",sc:32365,c:{},wc:{}},{id:"f1f545c6-7e88-451c-8133-0981318b9c05",tt:"EveryTime",sc:26745,c:{},wc:{}},{id:"6d2dede0-a897-4e82-a264-1fab1d264601",tt:"EveryTime",sc:32306,c:{},wc:{}},{id:"ad947b7f-0ea7-4318-b172-54ba8b9ca176",tt:"EveryTime",sc:32074,c:{},wc:{}},{id:"91e46457-2945-4b1b-a157-4582b88912ca",tt:"EveryTime",sc:64481,c:{},wc:{}},{id:"17b504fa-1a25-4bab-b6a1-fc7df7e866d3",tt:"EveryTime",sc:31722,c:{},wc:{}},{id:"400e8918-4e64-4773-adee-99f14cafa41f",tt:"EveryTime",sc:64483,c:{},wc:{}},{id:"dd9ff2e9-d493-4ca7-bb45-23f5fe1286f6",tt:"EveryTime",sc:73620,c:{},wc:{}},{id:"1e108145-203f-4b95-8c92-5e5536a24060",tt:"EveryTime",sc:35768,c:{},wc:{}},{id:"188b68fd-8f46-447c-aaa4-0d0a625cb74b",tt:"EveryTime",sc:81527,c:{},wc:{}},{id:"18be3146-97d9-4227-a0c4-8b999c7ac00b",tt:"EveryTime",sc:27603,c:{},wc:{}},{id:"7b6fc930-ebb2-4e79-ade7-b5f0417683ec",tt:"EveryTime",sc:52236,c:{},wc:{}},{id:"276240fd-2b5e-442d-9855-132cf77f7403",tt:"EveryTime",sc:35772,c:{},wc:{}},{id:"2b3cf8f1-17ca-4773-a250-b95e7bbd5c72",tt:"EveryTime",sc:69186,c:{},wc:{}},{id:"f640092a-27e4-4fdd-91a8-ad86ba33f601",tt:"EveryTime",sc:26111,c:{},wc:{}},{id:"47316d19-f2a6-4251-870c-90622a45dd98",tt:"EveryTime",sc:54402,c:{},wc:{}},{id:"c91ffacd-aa29-4b3e-8385-d7cc3f5cf8d7",tt:"EveryTime",sc:79582,c:{},wc:{}},{id:"57a2dcf4-13f1-4623-88da-9c27fd12cd08",tt:"EveryTime",sc:32309,c:{},wc:{}},{id:"54b2dafc-eb9b-4d73-baaf-b8455c257494",tt:"EveryTime",sc:67583,c:{},wc:{}},{id:"2eed598a-ea6b-4e02-9640-d4882c6c81fd",tt:"EveryTime",sc:103509,c:{},wc:{}},{id:"9c2750a8-b44d-4333-aadb-d5ed308af01a",tt:"EveryTime",sc:73522,c:{},wc:{}},{id:"871c6c26-39ab-41cd-984d-c7cd8dec79d7",tt:"EveryTime",sc:93330,c:{},wc:{}},{id:"f00a712a-7ac4-4689-bf65-e292553639af",tt:"EveryTime",sc:109610,c:{},wc:{}},{id:"545a49d9-7d6d-437a-b5ff-8dc21d2be5a6",tt:"EveryTime",sc:100287,c:{},wc:{}},{id:"3b69ad12-bc91-47f6-af90-8fe2845db07c",tt:"EveryTime",sc:111623,c:{},wc:{}},{id:"749cdff9-6f84-415c-b31b-037a04dfe7a1",tt:"EveryTime",sc:111624,c:{},wc:{}},{id:"3ab4acf2-8c6a-4acc-a9a2-ed5e369afcbf",tt:"EveryTime",sc:111622,c:{},wc:{}},{id:"301b8cea-0296-42d8-822a-6988d13a7f48",tt:"EveryTime",sc:111845,c:{},wc:{}},{id:"18d6b250-db67-4d85-a3b3-bf9898ca1af7",tt:"EveryTime",sc:32298,c:{},wc:{}},{id:"3b82708d-80b1-4331-bc19-4e665a90dc2d",tt:"EveryTime",sc:67589,c:{},wc:{}},{id:"2ec177ed-0db9-4613-b8e2-20b61ec1438e",tt:"EveryTime",sc:88370,c:{},wc:{}},{id:"1b57ff1c-fb0d-4210-ac4b-c8a573e60a98",tt:"EveryTime",sc:32363,c:{},wc:{}},{id:"8f070253-9ff2-4906-a58d-009fa17406bc",tt:"EveryTime",sc:35769,c:{},wc:{}},{id:"052a41f9-d8b4-4a58-99cd-d126b8056ca3",tt:"EveryTime",sc:100466,c:{},wc:{}},{id:"d64ce5a3-bc58-434c-93cb-5b542767e0ac",tt:"EveryTime",sc:100465,c:{},wc:{}},{id:"3a2fce25-c85a-4978-a00e-982b7d24f778",tt:"EveryTime",sc:100463,c:{},wc:{}},{id:"329c192b-2d11-4b8e-a2d7-e092557840c5",tt:"EveryTime",sc:42390,c:{},wc:{}},{id:"c035adc2-3203-4b47-a875-14e6de307b64",tt:"EveryTime",sc:94900,c:{},wc:{}},{id:"468675d9-bb6b-4d7f-b379-ae62973fcba9",tt:"EveryTime",sc:110654,c:{},wc:{}},{id:"3806225c-82dd-4f3b-babe-ecd466e54678",tt:"EveryTime",sc:115518,c:{},wc:{}},{id:"d9515ee5-7ba5-4459-ac94-ae551df8a672",tt:"EveryTime",sc:115593,c:{},wc:{}},{id:"66e3029a-7e04-4302-8e78-2dea3ea6e849",tt:"EveryTime",sc:91376,c:{},wc:{}},{id:"ca6d762d-83e2-406f-bf3a-602658c00262",tt:"EveryTime",sc:91375,c:{},wc:{}},{id:"c0f564fa-4f3a-4aa7-b7b9-a590da489fec",tt:"EveryTime",sc:91374,c:{},wc:{}},{id:"46c4bd96-1de7-437f-9673-100c251812be",tt:"EveryTime",sc:91373,c:{},wc:{}},{id:"5be40e81-bbbd-40f1-b436-a0c92e00b560",tt:"EveryTime",sc:91372,c:{},wc:{}},{id:"2535d465-08be-4e9b-8ce3-f5b01652d16e",tt:"EveryTime",sc:91371,c:{},wc:{}},{id:"3701801b-e9a0-4af8-8a8c-9b2b66bbb05f",tt:"EveryTime",sc:91368,c:{},wc:{}},{id:"9a58027c-d226-48f6-bf2c-29b80fb7130e",tt:"EveryTime",sc:91366,c:{},wc:{}},{id:"96a97c78-7f6b-4647-85a2-d14c0d68e3a0",tt:"EveryTime",sc:91365,c:{},wc:{}},{id:"12309b66-149a-4361-a3fc-104a07dc0a83",tt:"EveryTime",sc:91364,c:{},wc:{}},{id:"ac551085-98ef-4722-9b11-ec33ea618e81",tt:"EveryTime",sc:91362,c:{},wc:{}},{id:"a21790a9-ccc9-4372-a5de-7f4b271540ff",tt:"EveryTime",sc:91361,c:{},wc:{}},{id:"1d55de4a-2033-4877-966c-bafd9c3b0bce",tt:"EveryTime",sc:91359,c:{},wc:{}},{id:"52c49efe-cf9d-4aee-8b4b-1cae15196bd2",tt:"EveryTime",sc:91356,c:{},wc:{}},{id:"b5a9dc75-fa98-40ea-aef4-31b277374b96",tt:"EveryTime",sc:91353,c:{},wc:{}},{id:"9b962e51-172c-4804-baaa-cea6b5d5949c",tt:"EveryTime",sc:91354,c:{},wc:{}},{id:"4598e8f3-286b-4ab0-b125-4f220b052e40",tt:"EveryTime",sc:91352,c:{},wc:{}},{id:"6dbe06d4-7a12-4443-93c9-22b42450a62b",tt:"EveryTime",sc:91351,c:{},wc:{}},{id:"e42ca134-cd7c-4b64-b252-30b04da00267",tt:"EveryTime",sc:91350,c:{},wc:{}},{id:"a2467d6d-b4f7-4be7-8ccc-d3c67ebcf00b",tt:"EveryTime",sc:94762,c:{},wc:{}},{id:"b8903285-b5a6-4dca-a1b9-335842b01852",tt:"EveryTime",sc:111805,c:{},wc:{}},{id:"6886e931-4432-49f8-942b-907bc9a52223",tt:"EveryTime",sc:81447,c:{},wc:{}},{id:"596a7618-df4b-4415-bacd-2596f95146ff",tt:"EveryTime",sc:81426,c:{},wc:{}},{id:"c754e488-a778-429e-84b5-c4fd0688efce",tt:"EveryTime",sc:104053,c:{},wc:{}},{id:"681e8762-4c6b-479b-a635-56b62969e1f6",tt:"EveryTime",sc:119211,c:{},wc:{}},{id:"c146ca2e-e200-4e58-9483-29d191d8f65a",tt:"EveryTime",sc:121847,c:{},wc:{}},{id:"4589a11a-884f-4ff8-8b44-db6b157bd4a2",tt:"EveryTime",sc:121848,c:{},wc:{}},{id:"5ea92b21-87bd-4b84-b68f-21314a01578c",tt:"EveryTime",sc:119205,c:{},wc:{}},{id:"f194e6b9-4183-48bf-879a-c285e5db6feb",tt:"EveryTime",sc:122492,c:{},wc:{}},{id:"c5951f26-0d4e-4d7e-95dc-31d29da446d8",tt:"EveryTime",sc:122544,c:{},wc:{}},{id:"d82021e4-ad04-4a8f-bf03-0b56b83f4b32",tt:"EveryTime",sc:122822,c:{},wc:{}},{id:"708129c1-0895-487d-844e-ff5a0f381e03",tt:"EveryTime",sc:122961,c:{},wc:{}},{id:"e369fba9-dbcd-460f-8a2f-91fb270a878c",tt:"EveryTime",sc:122962,c:{},wc:{}},{id:"53a95205-9fff-43c6-82e5-bde3cb892a6a",tt:"EveryTime",sc:122963,c:{},wc:{}},{id:"9be655da-0843-41f9-8541-fcb773cd6d4d",tt:"EveryTime",sc:122964,c:{},wc:{}},{id:"992f68b1-0e1e-4dee-8f12-476522fc37e3",tt:"EveryTime",sc:122965,c:{},wc:{}},{id:"065648b0-1cde-4c77-843c-08263f828cc7",tt:"EveryTime",sc:122966,c:{},wc:{}},{id:"ac2889f3-1009-4765-a295-858fe3968420",tt:"EveryTime",sc:122967,c:{},wc:{}},{id:"1b8df782-df9c-40fb-a754-dd4001aa5539",tt:"EveryTime",sc:122968,c:{},wc:{}},{id:"1b61b609-caf9-44cb-9c7e-26c2a5615d55",tt:"EveryTime",sc:122969,c:{},wc:{}},{id:"a706c135-2a99-482f-ab26-9a8cac89d951",tt:"EveryTime",sc:122971,c:{},wc:{}},{id:"91692ab5-ae88-4046-8abc-7e4870d0258f",tt:"EveryTime",sc:122970,c:{},wc:{}},{id:"6842a397-d127-438c-97b1-228fe5f5f003",tt:"EveryTime",sc:122972,c:{},wc:{}},{id:"70903695-25df-49e8-9b3b-ffbb5a7a456c",tt:"EveryTime",sc:122973,c:{},wc:{}},{id:"dae57135-5f0c-4400-b577-f6e41f57e0a5",tt:"EveryTime",sc:122974,c:{},wc:{}},{id:"f9d1c73a-f6c6-4671-a5d1-3b5289b729e6",tt:"EveryTime",sc:122975,c:{},wc:{}},{id:"b1e51051-da9c-4781-b07c-a6cea799073d",tt:"EveryTime",sc:122976,c:{},wc:{}},{id:"67f270de-0c35-4a38-b9a1-1e2ed48a3aac",tt:"EveryTime",sc:122977,c:{},wc:{}},{id:"b22ecb66-0022-4b97-a6f1-25b639dfee75",tt:"EveryTime",sc:122978,c:{},wc:{}},{id:"9e701759-4b12-48c6-a3d9-fc6a04f55126",tt:"EveryTime",sc:122979,c:{},wc:{}},{id:"25341677-d89b-4ff8-b7d7-dce41879ba28",tt:"EveryTime",sc:122980,c:{},wc:{}},{id:"d603c9d6-9074-4fb1-8b52-43710ffcae47",tt:"EveryTime",sc:122981,c:{},wc:{}},{id:"964d6d08-046b-457f-9319-c1085a176396",tt:"EveryTime",sc:122982,c:{},wc:{}},{id:"f4a0d6dc-ba27-435d-be15-9cb8216fb76a",tt:"EveryTime",sc:122983,c:{},wc:{}}]},overlays:{auto_init:!0,activationConfigs:[]},dbm:{auto_init:!0,entity_id:570336,product_type:"INVITE_PARTNER",activationConfigs:[]},scriptrunner:{auto_init:!0,activationConfigs:[]},dfp:{auto_init:!0,networks:[{network_code:"6025",name:"Ticketmaster - DFP 6025"}],track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},twitter_pixel:{auto_init:!0,activationConfigs:[]},web:{auto_init:!1,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}},i=e=>{const r=n[e];return(e,t)=>{var n;return null!==(n=null==r?void 0:r[e])&&void 0!==n?n:t}},a=i("web"),s=i("dfp"),c=i("prebid");i("facebook_pixel_v2"),i("socio_demo_cohorts"),i("ctv")},427:(e,r,t)=>{t.d(r,{z:()=>i});var n=t(3629);class i extends class{constructor(e){this.context=e}getContext(){return this.context}updateContext(...e){e.forEach((([e,r])=>{this.context[e]=r}))}}{constructor(e){super(e)}getClient(){var e;const r=null!==(e=document.title)&&void 0!==e?e:"";return Promise.resolve({type:"web",user_agent:navigator.userAgent||"",url:(0,n.bk)(window.location.href),domain:window.location.hostname||"",title:r,referrer:(0,n.bk)(document.referrer)})}}},1228:(e,r,t)=>{t.d(r,{E:()=>n});class n{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}isAvailable(){var e;return!!(null===(e=this.crypto)||void 0===e?void 0:e.subtle)}generateKey(e=!1){return this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"])}encrypt(e,r){const[t,n]=this._encrypt(e,this.str2bytes(r));return t.then((e=>{const r=new Uint8Array(16+e.byteLength);return r.set(n,0),r.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),r.set(new Uint8Array(e),16),r.buffer}))}decrypt(e,r){const t=new Uint8Array(r,0,12),n=new Uint32Array(r,12,1)[0],i=r.slice(16,16+n);return this._decrypt(e,t,i).then(this.bytes2str)}_encrypt(e,r){const t=this.crypto.getRandomValues(new Uint8Array(12));return[this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:t},e,r),t]}_decrypt(e,r,t){return this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:r},e,t)}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}},4572:(e,r,t)=>{t(6013)},449:(e,r,t)=>{t.d(r,{M:()=>_,m:()=>h});var n=t(655),i=t(2688),a=t(9320),s=t(70),c=t(3735),o=t(6567),u=t(5151),d=t(7112),l=t(550),f=t(6013),p=t(5595);const g="permutive-events-cache",m="permutive-events-for-page",h="historical";class _{constructor(e,r,t,n,i,a,s){this.config=e,this.namespace=r,this.logger=t,this.network=n,this.trace=i,this.metrics=a,this.makeEventsStore=s,this.eventPutQueue=Promise.resolve(),this.eventsCache=this.makeEventsRepository(g),this.eventsForPage=this.makeEventsRepository(m),this.eventStore=s(),this.eventsTTLInMilliseconds=(0,c.zG)((0,o.ij)(this.config.eventsTTLInDays),(0,o.tS)((e=>"number"==typeof e&&e>0?(0,o.G)(24*e*3600):o.YP))),this.eventsCache.events=(0,f.PQ)((()=>{const e=this.trace.startSpan("load_event_cache");return this.loadFromDisk().then((r=>(e.finish(),this.logger.debug("Event cache loaded, #e",r.length),r)))})),this.readiness=this.eventsCache.events.then((()=>this.migratePreviousPagesEvents()))}migratePreviousPagesEvents(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=this.trace.startSpan("migrate_previous_for_page_events"),r=(0,u.pE)((e=>(0,d.Y3)((()=>e.flush()),i.w)));return(0,c.zG)([this.eventsForPage,this.eventsCache],r,(0,u.UI)((r=>{const t=r.reduce(((e,r)=>(0,s.g_)((r=>[...e,r]),(()=>e))(r)),[]);return t.length>0&&this.network.error(`Migrate previous events failed. Got:\n${t.join("\n ")}`),e.finish()})),(e=>e()))}))}get eventsForCurrentPage(){return this.eventsForPage.events}all(){return Promise.all([this.eventsCache.events,this.eventsForPage.events]).then(a.xH)}resetIfNeeded(){return Promise.resolve(!1)}add(e,{persistOnDisk:r}){return(0,n.mG)(this,void 0,void 0,(function*(){this.logger.debug("Adding to cache",e);return(yield this.eventsForPage.events).push(e),r&&this.readiness.then((()=>this.eventsForPage.flush())),e}))}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e){const r=this.config.eventsCacheLimitBytes;let t=2*JSON.stringify(e).length,n=1;for(;t>r;)e.splice(0,n),n*=2,t=2*JSON.stringify(e).length;return{events:e,sizeInBytes:t}}loadFromDisk(){this.logger.log("Loading event cache...");const e=this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{}),r=e=>{this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})},t=(0,c.zG)(this.eventsTTLInMilliseconds,(0,o.g_)((0,c.a9)(c.yR),(e=>(0,a.hX)((r=>e>Date.now()-r.time.getTime()))))),i=(0,c.ls)((0,o.fS)((()=>[])),u.of),s=(0,d.g_)((e=>{const r=(0,u.of)([]);return e instanceof p.m?r:(this.network.error(`Error fetching data from store. Got ${e}`),()=>(0,n.mG)(this,void 0,void 0,(function*(){return yield this.reset("historical"),r()})))}),i);return(0,c.zG)([this.eventStore.get(g),this.eventStore.get(m)],(0,a.UI)(s),(0,a.vP)(u.oE),(0,u.UI)((r=>(this.logger.debug("Read events from store",r),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",e),r))),(0,u.UI)((0,c.ls)(a.xH,this.filterEventsByWorkspace,this.pruneEventsToSizeLimit.bind(this),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,e.events.length>0&&r(e),e.events)),(0,a.UI)(l.kJ),t)),(e=>e()))}reset(e){return(0,n.mG)(this,void 0,void 0,(function*(){return this.logger.debug("Resetting Events Cache"),(0,c.zG)(this.eventStore.deleteStore(),(0,d.UI)((()=>(this.eventStore=this.makeEventsStore(),e===h?Promise.all([this.eventsCache.reset(),this.eventsForPage.flush()]):Promise.all([this.eventsCache.reset(),this.eventsForPage.reset()])))),(0,d.UI)((()=>this.all())),(0,d.g_)((()=>(0,u.of)([])),(e=>(0,c.a9)(e))),(e=>e()))}))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const r={key:e,events:Promise.resolve([]),sizeInBytes:0,flush:()=>(0,n.mG)(this,void 0,void 0,(function*(){const e=yield r.events;this.logger.debug("Writing",e.length,"events to",r.key);const t=this.trace.startSpan(`write_${r.key}`),n=JSON.stringify(e);return r.sizeInBytes=2*n.length,this.eventPutQueue=this.eventPutQueue.then((n=>this.eventStore.put(e.map(l.XO),r.key)().then((e=>{if((0,s.nM)(e)){(e=>{const t=`Events cache failed to put ${r.key}. Got ${e}`;return e instanceof p.m?this.logger.error(t):this.network.error(t)})(e.left)}t.finish()}))))})),reset:()=>(r.events=Promise.resolve([]),r.sizeInBytes=0,r.flush())};return r}}},8790:(e,r,t)=>{t.d(r,{K:()=>U});var n=t(1228),i=t(2688),a=t(70),s=t(6567),c=t(7112);var o=t(3735),u=t(2485),d=t(655);let l,f;const p=new WeakMap,g=new WeakMap,m=new WeakMap,h=new WeakMap,_=new WeakMap;let v={get(e,r,t){if(e instanceof IDBTransaction){if("done"===r)return g.get(e);if("objectStoreNames"===r)return e.objectStoreNames||m.get(e);if("store"===r)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return y(e[r])},set:(e,r,t)=>(e[r]=t,!0),has:(e,r)=>e instanceof IDBTransaction&&("done"===r||"store"===r)||r in e};function b(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(f||(f=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...r){return e.apply(q(this),r),y(p.get(this))}:function(...r){return y(e.apply(q(this),r))}:function(r,...t){const n=e.call(q(this),r,...t);return m.set(n,r.sort?r.sort():[r]),y(n)}}function w(e){return"function"==typeof e?b(e):(e instanceof IDBTransaction&&function(e){if(g.has(e))return;const r=new Promise(((r,t)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{r(),n()},a=()=>{t(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));g.set(e,r)}(e),r=e,(l||(l=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>r instanceof e))?new Proxy(e,v):e);var r}function y(e){if(e instanceof IDBRequest)return function(e){const r=new Promise(((r,t)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{r(y(e.result)),n()},a=()=>{t(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",a)}));return r.then((r=>{r instanceof IDBCursor&&p.set(r,e)})).catch((()=>{})),_.set(r,e),r}(e);if(h.has(e))return h.get(e);const r=w(e);return r!==e&&(h.set(e,r),_.set(r,e)),r}const q=e=>_.get(e);function k(e,r,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(e,r),c=y(s);return n&&s.addEventListener("upgradeneeded",(e=>{n(y(s.result),e.oldVersion,e.newVersion,y(s.transaction))})),t&&s.addEventListener("blocked",(()=>t())),c.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),c}function E(e,{blocked:r}={}){const t=indexedDB.deleteDatabase(e);return r&&t.addEventListener("blocked",(()=>r())),y(t).then((()=>{}))}const D=["get","getKey","getAll","getAllKeys","count"],P=["put","add","delete","clear"],S=new Map;function M(e,r){if(!(e instanceof IDBDatabase)||r in e||"string"!=typeof r)return;if(S.get(r))return S.get(r);const t=r.replace(/FromIndex$/,""),n=r!==t,i=P.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!D.includes(t))return;const a=async function(e,...r){const a=this.transaction(e,i?"readwrite":"readonly");let s=a.store;return n&&(s=s.index(r.shift())),(await Promise.all([s[t](...r),i&&a.done]))[0]};return S.set(r,a),a}v=(e=>({...e,get:(r,t,n)=>M(r,t)||e.get(r,t,n),has:(r,t)=>!!M(r,t)||e.has(r,t)}))(v);var O=t(5151),T=t(6013);function I(e){return"development"===e.environment?window.isSecureContext:"https:"===window.location.protocol}class C{constructor(e,r,t,n,i,a,s){this.namespace=e,this.logger=r,this.cryptoAlg=t,this.idb=n,this.mainObjectStore=i,this.keyObjectStore=a,this.keyObjectKey=s,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.hasForcedCompaction=!1,this.logger.debug("IDB: Created",this.idb),this.cryptoKey=this.getOrGenerateKey()}static initialise(e,r,t,n,i,s,u,d,l,f){const p=(0,T.G6)(navigator.userAgent)&&!1,g=[I(e),i.isAvailable(),!p].every((e=>!0===e)),m=(e,r,t)=>r.includes(t)?(0,o.Q1)():e.createObjectStore(t),h=g?(0,a.Y3)((()=>function(e){if(!(0,T.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let r,t=0;return new Promise((e=>{const n=()=>(t++,indexedDB.databases().finally(e));r=window.setInterval(n,100),n()})).finally((()=>{clearInterval(r),e.track({name:"sdk_idb_conn_attempt_safari_count",value:t,labels:{}})}))}(t).then((()=>k(s,f,{upgrade:e=>{const r=[...e.objectStoreNames];m(e,r,u),m(e,r,d)}})))),(e=>String(e))):(0,a.t$)("Connection not attempted. Default to localStorage");return(0,a.g_)((e=>(0,c.t$)(e)),(e=>(0,c.Y3)((()=>e.then((e=>new C(r,n,i,e,u,d,l)))),(e=>String(e)))))(h)}put(e,r){return(0,d.mG)(this,void 0,void 0,(function*(){return(0,o.zG)((()=>(0,d.mG)(this,void 0,void 0,(function*(){return(0,o.bc)(JSON.stringify(e),yield this.cryptoKey)}))),(0,O.tS)((([e,r])=>(0,O.of)(this.cryptoAlg.encrypt(r,e)))),(0,O.tS)((e=>()=>(0,d.mG)(this,void 0,void 0,(function*(){return yield this.resetIfRequired(this.puts++),e})))),(0,O.tS)((e=>(0,c.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(r)))),i.w))),(0,O.UI)((0,a.g_)((t=>{throw this.logger.error(`IDB: Failed to put "${r.toString()}" value`,e,". Got \n",t),"QuotaExceededError"===t.name&&this.forceCompaction(),t}),(()=>r))),(e=>e()))}))}get(e){return this.cryptoKey.then((r=>(0,o.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((e=>e?this.cryptoAlg.decrypt(r,e):null)).then(JSON.parse).catch((r=>{const t=(0,i.w)(r);throw this.logger.error(`IDB: Get ${e.toString()} failed. Got`,t),t}))))))}delete(e){return(0,o.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logger.debug("IDB: Deleting",this.idb),this.idb.close(),E(this.idb.name)}getOrGenerateKey(){return(0,o.zG)(this.namespace.getNamespacedStorageKey(this.keyObjectKey),(e=>this.idb.get(this.keyObjectStore,e).then((e=>e||this.storeGivenOrGeneratedKey())).catch((e=>{const r=(0,i.w)(e);return this.logger.error("IDB: Get or generate key failed. Got\n",r),this.cryptoAlg.generateKey(!1)}))))}storeGivenOrGeneratedKey(e=this.cryptoAlg.generateKey(!1)){return(0,o.zG)((0,O.of)(this.namespace.getNamespacedStorageKey(this.keyObjectKey)),(0,O.tS)((r=>(0,c.Y3)((()=>(0,d.mG)(this,void 0,void 0,(function*(){return this.idb.put(this.keyObjectStore,yield e,r)}))),i.w))),(0,O.UI)((0,a.g_)((e=>{throw this.logger.error(`IDB: Failed to store crypto key to ${this.keyObjectStore} due to unexpected error,\n`,e),e}),(()=>e))),(e=>e()))}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logger.debug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return k(e).then((r=>(r.close(),E(e))))}resetIfRequired(e){return(0,T.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.reset():Promise.resolve()}reset(){return(0,d.mG)(this,void 0,void 0,(function*(){const e=this.idb.name,r=this.idb.version;yield this.deleteStore(),this.idb=yield k(e,r),this.idb.createObjectStore(this.mainObjectStore),this.idb.createObjectStore(this.keyObjectStore),yield this.storeGivenOrGeneratedKey(this.cryptoKey),this.logger.debug("IDB: Reset to",this.idb)}))}}var x=t(3195),A=t(5595);class j{constructor(e,r,t,n,i,s,c,d,l,f){this.version=3,this.db=((e,r,t,n,i,a,s,c,d,l,f)=>(0,o.zG)(C,(0,u._)({logger:l,consentTracking:f})).initialise(e,r,t,l,n,i,a,s,c,d))(e,r,t,n,i,s,c,d,this.version,l,f)().then((0,a.fS)((e=>(0,x.S)(r,l,f))))}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new A.m(`Attempted ${e} when the current store is closing.`)}put(e,r){return(0,c.Y3)((()=>this.db.then((t=>t.put(e,r)))),(e=>{const r=(0,i.w)(e);return this.shouldThrowStoreClosingError(r)?this.makeStoreClosingDuringOpertationError("put"):r}))}get(e){return(0,c.Y3)((()=>this.db.then((r=>r.get(e))).then(s.ij)),(e=>{const r=(0,i.w)(e);return this.shouldThrowStoreClosingError(r)?this.makeStoreClosingDuringOpertationError("get"):r}))}delete(e){return(0,c.Y3)((()=>this.db.then((r=>r.delete(e)))),(e=>String(e)))}deleteStore(){return(0,c.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}var L=t(449);class U extends L.M{constructor(e,r,t,i,a,s,c,o){super(e,r,t,i,a,s,(()=>new j(e,r,s,new n.E,"8347d761-7b38-45f0-b0a8-34b664f7c00f",`events_${c.get()}`,`keys_${c.get()}`,"events",t,o)))}}},2923:(e,r,t)=>{t.d(r,{X:()=>n});class n{constructor(){this.properties={}}overrideCustomProps(e){this.properties=e}getCustomProps(){return this.properties}}},4314:(e,r,t)=>{t.d(r,{c:()=>c});var n=t(2688),i=t(3735),a=t(550),s=t(7545);class c{constructor(e,r,t,n,i,a){this.eventHandler=e,this.api=r,this.metrics=t,this.userId=n,this.network=i,this.eventsCache=a,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new s.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(e,r,t){return this.batch.requestData.push(e),this.batch.requestOptions.push(r),this.batch.processingStrategies.push(t),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(e){return this.flushIfNotEmpty(e,!1)}flushWithBeacon(e){return this.flushIfNotEmpty(e,!0)}flushIfNotEmpty(e,r){const{requestData:t,requestOptions:a,processingStrategies:s}=e,c=e=>this.network.error(`Error sending events batch. Got ${(0,n.w)(e)}`,this.userId.get()),o=r?(0,i.ls)((e=>this.api.trackBatchBeacon(e)),(e=>Promise.resolve())):e=>this.api.trackBatch(this.metrics,e);return t.length>0?(0,i.zG)(this.resetBatch(),(e=>this.trackMetrics(t)),(e=>o(t).then((e=>this.isBatchResponse(e)?this.onBatchResponseSuccess(e,t,a,s):(0,i.Q1)())).catch(c))):Promise.resolve()}onBatchResponseSuccess(e,r,t,n){const s=(e,r)=>"never"!==r?(0,i.ls)((()=>this.eventHandler.newEvent((0,a.XO)(e),null)),(()=>this.eventsCache.add(e,{persistOnDisk:!0}))):i.Q1,c=(e,r,t)=>{const n={name:r.name,session_id:r.session_id,view_id:r.view_id,properties:r.properties,id:null,time:(new Date).toISOString()};return(0,i.zG)(t(e.error.message),(r=>console.error(e)),(r=>this.eventHandler.newEvent(n,e)))};return e.forEach((({body:e},o)=>{const u=r[o],d=t[o],l=n[o];return(0,a.bk)(e)?c(e,u,d.error):((e,r,t,n)=>{const c=(0,a.mh)(e,r);return(0,i.zG)(t(c),s(c,n))})(e,u,d.success,l)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(e){this.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e).length,labels:{}})}isBatchResponse(e){return!!e}}},3530:(e,r,t)=>{t.d(r,{w:()=>c});var n=t(3735),i=t(6567),a=t(3195);const s="permutive-pvc";class c{constructor(e,r,t,n,i,s,c){this.config=e,this.namespace=r,this.metrics=t,this.cryptoAlg=n,this.logger=i,this.consentTracking=s,this.network=c,this.DB_NAME="pvc",this.PVC_MAIN_OBJECT_STORE="pvc",this.CRYPTO_KEY_OBJECT_STORE="keys",this.CRYPTO_KEY_OBJECT_KEY="pvc",this.DB_VERSION=1,this.db=new Promise((e=>e((0,a.S)(this.namespace,this.logger,this.consentTracking))))}put(e){return this.db.then((r=>r.put(e,s))).then(n.Q1)}getIfPresent(){return this.db.then((e=>e.get(s))).then(i.ij)}reset(){return this.db.then((e=>e.delete(s)))}}},9678:(e,r,t)=>{t.d(r,{LP:()=>a,dG:()=>n,eP:()=>i});const n=4096,i=`Cookie exceeds maximum supported size of ${n} bytes for most browsers.`,a="Cookie is missing required parameters."},9175:(e,r,t)=>{t.d(r,{S:()=>o});var n=t(3735),i=t(9678);class a{constructor(e,r,t){this.namespace=e,this.config=r,this.logger=t}setCookie(e,r,t=!1){var n;if(!(r&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:t,cookieDomain:a}=null!==(n=this.config)&&void 0!==n?n:{};throw this.logger.warn(`Unable to set cookie. ${i.LP}`,{value:r,cookieName:e,cookieExpiry:t,cookieDomain:a}),new Error(i.LP)}const a=this.namespace.getNamespacedStorageKey(e),s=[encodeURIComponent(a),"=",encodeURIComponent(r),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",t?"; samesite=none; secure":""].join("");if(s.length>i.dG)throw this.logger.warn(`Unable to set cookie ${a}. ${i.eP}`),new Error(i.eP);return this.logger.debug(`Setting cookie ${s}`),document.cookie=s,!0}getCookie(e,r=!1){const t=r?e:this.namespace.getNamespacedStorageKey(e),n=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==n?decodeURIComponent(n[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const r=this.namespace.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(r)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0}}var s=t(590);const c=e=>{const{logger:r,consentTracking:t}=e,n=e=>(r.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{constructor(){super(...arguments),this.setCookie=(0,s.vX)(super.setCookie.bind(this),n,t.isRevoked)}}},o=(e,r,t,i)=>new((0,n.zG)(a,c({consentTracking:i,logger:t})))(e,r,t)},3319:(e,r,t)=>{t.d(r,{S:()=>d});var n=t(3735),i=t(2688),a=t(787),s=t(70);class c{constructor(e){this.namespace=e}getExternalData(e){const r=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(r)}getExternalJsonData(e){return(0,n.zG)(this.getExternalData(e),a.A)}setExternalData(e,r){const t=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(t,r)}catch(e){}}setExternalJsonData(e,r){return(0,n.zG)((t=r,(0,s.Y3)((function(){var e=JSON.stringify(t);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),n.yR)),(0,s.UI)((r=>this.setExternalData(e,r))),(0,s.g_)((e=>{throw(0,i.w)(e)}),n.Q1));var t}removeExternalData(e){const r=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(r)}}var o=t(590);const u=e=>{const{logger:r,consentTracking:t}=e,n=e=>{r.debug(`External Data: Failed to set key ${e} as consent is revoked`)},i=n,a=n;return e=>class extends e{constructor(){super(...arguments),this.setExternalData=(0,o.vX)(super.setExternalData.bind(this),i,t.isRevoked),this.setExternalJsonData=(0,o.vX)(super.setExternalJsonData.bind(this),a,t.isRevoked)}}},d=(e,r,t)=>new((0,n.zG)(c,u({consentTracking:t,logger:r})))(e)},6715:(e,r,t)=>{t.d(r,{P:()=>n});class n{constructor(e,r,t,n,i,a,s,c,o=[],u={}){this.logger=e,this.network=r,this.userId=t,this.viewId=n,this.messages=i,this.sessionManager=a,this.cookies=s,this.externalData=c,this.blockers=o,this.addons=u,this.listenForBlockers=!0}makeSafe(e){return(...r)=>{try{return e(...r)}catch(e){this.network.error(e,this.userId.get())}}}utcNow(){const e=new Date;return new Date(e.toUTCString())}addBlocker(e){this.blockers.push(e),this.logger.log("<blockers> added blocker "+e),this.messages.on(e,(()=>{if(this.listenForBlockers){const r=this.blockers.indexOf(e);r>=0&&(this.blockers.splice(r,1),this.logger.log("<blockers> removed blocker "+e)),0===this.blockers.length&&(this.listenForBlockers=!1,this.messages.emit("permutive:blockers:empty"),this.logger.log("<blockers> complete"))}}))}}},4828:(e,r,t)=>{t.d(r,{SX:()=>a});class n{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(...e){return console.log.bind(window.console,this.prefix)(...e)}debug(...e){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...e)}warn(...e){return console.warn.bind(window.console,this.prefix)(...e)}error(...e){return console.error.bind(window.console,this.prefix)(...e)}}class i{log(){}debug(){}warn(){}error(){}}const a=e=>{var r;return e.loggingEnabled&&void 0!==(null===(r=window.console)||void 0===r?void 0:r.log)?new n:new i}},8167:(e,r,t)=>{t.d(r,{Q:()=>n});class n{constructor(){this.messageListenerMap={},this.replayQueue={}}on(e,r,t={withReplay:!1}){var n,i;null!==(n=(i=this.messageListenerMap)[e])&&void 0!==n||(i[e]=[]),t.withReplay&&this.processReplayQueue(e,r),this.messageListenerMap[e].push(r)}once(e,r){const t=n=>{r(n),this.off(e,t)};this.on(e,t)}off(e,r){var t;if(!r)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);const n=(null!==(t=this.messageListenerMap[e])&&void 0!==t?t:[]).indexOf(r);n>=0&&this.messageListenerMap[e].splice(n,1)}emit(e,r,t={withReplay:!1}){var n;(null===(n=this.messageListenerMap[e])||void 0===n?void 0:n.length)>0?this.emitMessageWithPayload(e,r):t.withReplay&&this.addToReplayQueue(e,r)}addToReplayQueue(e,r){var t,n;null!==(t=(n=this.replayQueue)[e])&&void 0!==t||(n[e]=[]),this.replayQueue[e].push(r)}processReplayQueue(e,r){var t;null===(t=this.replayQueue[e])||void 0===t||t.forEach((e=>r(e)))}emitMessageWithPayload(e,r){var t;null===(t=this.messageListenerMap[e])||void 0===t||t.forEach((e=>e(r)))}}},7121:(e,r,t)=>{t.d(r,{AG:()=>c,UC:()=>a,Yh:()=>s});var n=t(6567),i=t(6013);const a=(e,r,t)=>e in r||(()=>{const r="number"==typeof e?e:parseInt(e);return!1===isNaN(r)&&t.has(r)})(),s=e=>(0,i.b0)(e,((e,r)=>r.state?(0,n.G)({[r.checksum]:r.state}):n.YP));function c(e){var r;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(r=e.properties)||void 0===r?void 0:r.segment_number)}},4938:(e,r,t)=>{t.d(r,{c:()=>ut,e:()=>ct});var n=t(7183),i=t(3735),a=t(477),s=t.n(a);function c(){return s()('/*! permutive-javascript-sdk v19.29.0 (web) (built 2022-09-29T07:13:53.870Z) */(()=>{"use strict";const e=()=>({kind:"null",value:null}),n=e=>({kind:"string",value:e}),c=e=>({kind:"number",value:e}),t=e=>({kind:"array",value:e}),r=e=>({kind:"object",value:e}),a=e=>e,o=()=>({kind:"bottom"}),i=e=>({kind:"inner",a:e}),u=e=>({kind:"top",error:e}),s=e=>({kind:"unbounded",group:e}),p=(e,n)=>({kind:"windowed",key:n,group:e}),f=(e,n,c)=>({kind:"countLimit",n:c,limit:n,group:e}),g=(e,n,c)=>({kind:"uniqueLimit",n:c,limit:n,group:e}),w=e=>({kind:"numberGroup",group:e}),l=e=>({kind:"stringGroup",group:e}),q=e=>({kind:"tuple",tuple:e}),d=e=>({state:e}),m=(e,n)=>({commands:e,payload:n});function y(e){return e}function b(e,n,c,t,r,a,o,i,u){switch(arguments.length){case 1:return e;case 2:return n(e);case 3:return c(n(e));case 4:return t(c(n(e)));case 5:return r(t(c(n(e))));case 6:return a(r(t(c(n(e)))));case 7:return o(a(r(t(c(n(e))))));case 8:return i(o(a(r(t(c(n(e)))))));case 9:return u(i(o(a(r(t(c(n(e))))))));default:for(var s=arguments[0],p=1;p<arguments.length;p++)s=arguments[p](s);return s}}var v=function(e){return{equals:function(n,c){return n===c||e(n,c)}}},h=function(e){return v((function(n,c){for(var t in e)if(!e[t].equals(n[t],c[t]))return!1;return!0}))},k=function(e){return function(n,c){return n===c||0===e(n,c)}},S=function(e){return{equals:k(e),compare:function(n,c){return n===c?0:e(n,c)}}},_=function(e){return function(n){return S((function(c,t){return n.compare(e(c),e(t))}))}},z=function(e){return function(n,c){return-1===e.compare(n,c)}},j=function(e){return function(n,c){return 1===e.compare(n,c)}},x=function(e){return function(n,c){return n===c||e.compare(n,c)>-1?n:c}};var O={equals:function(e,n){return e===n}},A={equals:O.equals,compare:function(e,n){return e<n?-1:e>n?1:0}};const L=(e,n)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return i(n(e.a));case"top":return u(e.error)}},M=e=>S(((n,c)=>{if("bottom"===n.kind&&"bottom"===c.kind)return 0;if("bottom"===n.kind)return-1;if("bottom"===c.kind)return 1;if("top"===n.kind&&"top"===c.kind)return A.compare(n.error,c.error);if("top"===n.kind)return 1;if("top"===c.kind)return-1;if("inner"===n.kind&&"inner"===c.kind)return e.compare(n.a,c.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var N=function(e,n){for(var c=0,t=n.length,r=e.length;c<t;c++,r++)e[r]=n[c];return e},I=function(e){return"Some"===e._tag},E={_tag:"None"},T=function(e){return{_tag:"Some",value:e}},C=function(e){return"Left"===e._tag},P=(Object.prototype.hasOwnProperty,function(e){return N([e[0]],e.slice(1))});var D=E,G=T;function U(e){return function(n){return e(n)?G(n):D}}var F=function(e){return"Left"===e._tag?D:G(e.right)},B=function(e){return{equals:function(n,c){return n===c||(J(n)?J(c):!J(c)&&e.equals(n.value,c.value))}}},Y=function(e){return{equals:B(e).equals,compare:function(n,c){return n===c?0:H(n)?H(c)?e.compare(n.value,c.value):1:-1}}},V=function(e){return function(n){return J(n)?D:G(e(n.value))}},$=F,H=I,J=function(e){return"None"===e._tag},R=function(e){return function(n){return J(n)?e():n.value}};var K;K=void 0;var Q=function(e){return e[0]},W=Q;var Z=function(e,n){for(var c=0,t=n.length,r=e.length;c<t;c++,r++)e[r]=n[c];return e},X=function(e){return e.length>0},ee=function(e,n){return e<0||e>=n.length},ne=function(e){return function(n){return Z([e],n)}},ce=ne,te=function(e){return function(n){return Z(Z([],n),[e])}},re=te,ae=P,oe=function(e){return X(e)?T(e):E},ie=function(e){return function(n){for(var c=Math.max(0,Math.floor(n)),t=[e(0)],r=1;r<c;r++)t.push(e(r));return t}};var ue=ae;var se=function(e){return function(n){var c=Math.max(1,e);return c>=n.length?[ue(n),[]]:[b(n.slice(1,c),ce(fe(n))),n.slice(c)]}},pe=function(e){return v((function(n,c){return n.length===c.length&&n.every((function(n,t){return e.equals(n,c[t])}))}))},fe=W;var ge={equals:function(e,n){return e===n}},we={equals:ge.equals,compare:function(e,n){return e<n?-1:e>n?1:0}};var le=function(e,n){return function(c){for(var t=c.length,r=e,a=0;a<t;a++)r=n(a,r,c[a]);return r}};var qe=function(e){return 0===e.length},de=X,me=ce,ye=re,be=function(e,n){return e<=0?[]:ie(n)(e)};var ve=ee,he=function(e){return function(n){return ve(e,n)?_e(n):n.slice(0,e)}};var ke=function(e,n){for(var c=e.length,t=0;t<c&&n(e[t]);t++);return t};var Se=function(e){return function(n){return e<=0||qe(n)?_e(n):e>=n.length?[]:n.slice(e,n.length)}};var _e=function(e){return e.slice()},ze=function(e){return qe(e)?[]:e.slice().reverse()},je=function(e){return function(n){return n.length<=1?_e(n):n.slice().sort(e.compare)}},xe=function(e,n,c){for(var t=[],r=Math.min(e.length,n.length),a=0;a<r;a++)t[a]=c(e[a],n[a]);return t};var Oe=function(e){return function(n){return e>=1&&de(n)?se(e)(n):qe(n)?[_e(n),[]]:[[],_e(n)]}};var Ae=function(e){return function(n){return b(n,function(e){return function(n){for(var c=[],t=0;t<n.length;t++)c.push.apply(c,e(t,n[t]));return c}}((function(n,c){return e(c)})))}},Le=function(e){return function(n){for(var c=[],t=0;t<n.length;t++){var r=e(t,n[t]);I(r)&&c.push(r.value)}return c}},Me=function(e){return Le((function(n,c){return e(c)}))},Ne=Me(y),Ie=le,Ee=function(e){var n=Te(e);return function(e){return n((function(n,c){return e(c)}))}},Te=function(e){return function(n){return Ie(e.of([]),(function(c,t,r){return e.ap(e.map(t,(function(e){return function(n){return b(e,ye(n))}})),n(c,r))}))}},Ce=function(e){return S((function(n,c){for(var t=n.length,r=c.length,a=Math.min(t,r),o=0;o<a;o++){var i=e.compare(n[o],c[o]);if(0!==i)return i}return we.compare(t,r)}))},Pe=function(e){return{_tag:"Left",left:e}},De=function(e){return{_tag:"Right",right:e}},Ge=function(e,n){return b(e,Be(n))},Ue=function(e,n){return b(e,Ve(n))},Fe="Either",Be=function(e){return function(n){return He(n)?n:De(e(n.right))}},Ye=De,Ve=function(e){return function(n){return He(n)?n:He(e)?e:De(n.right(e.right))}},$e={URI:Fe,map:Ge,ap:Ue,of:Ye},He=C;var Je=function(e){return-1===e?1:1===e?-1:0};function Re(e,n){return Ne(e.map(n))}function Ke(e,n,c,t){const r=(e,n)=>{if(0===e.length)return Ne(n.map((e=>G({1:e[1],2:c(D,G(e[2]))}))));if(0===n.length)return Ne(e.map((e=>G({1:e[1],2:c(G(e[2]),D)}))));if(e.length>0&&n.length>0&&z(t)(e[0][1],n[0][1])){const[t,...a]=e,o=t[1],i=t[2];return me({1:o,2:c(G(i),D)})(r(a,n))}if(e.length>0&&n.length>0&&j(t)(e[0][1],n[0][1])){const[t,...a]=n,o=t[1],i=t[2];return me({1:o,2:c(D,G(i))})(r(e,a))}if(e.length>0&&n.length>0){const[t,...a]=e,[o,...i]=n,u=t[1],s=t[2],p=o[2];return me({1:u,2:c(G(s),G(p))})(r(a,i))}throw new Error("Non exhaustive match in mapOption2")},a=_((e=>e[1]))(t),o=(e=>{const n=Re(e,(e=>H(e[2])?G({1:e[1],2:e[2].value}):D));return 0===n.length?D:G(n)})(r(je(a)([...e].map((e=>({1:e[0],2:e[1]})))),je(a)([...n].map((e=>({1:e[0],2:e[1]}))))));return V((e=>new Map(e.map((e=>[e[1],e[2]])))))(o)}function Qe(e,n,c,t){const r=_((e=>e[0]))(t),a=je(r)([...n]).reduceRight(((e,n)=>{if(He(e)){const t=c(n[1],e.left);return H(t)?Pe(t.value):De(n[0])}return e}),Pe(e));return $(a)}function We(e,n){return new Map([...e].map(n))}function Ze(e,n){return new Map([...e].filter(n))}function Xe(e){return JSON.stringify(en(e))}function en(e){switch(e.kind){case"null":return tn.encode(e);case"string":return rn.encode(e);case"number":return an.encode(e);case"array":return on.encode(e);case"object":return un.encode(e)}}function nn(e){return null===e?tn.decode(e):"number"==typeof e?an.decode(e):"string"==typeof e?rn.decode(e):Array.isArray(e)?on.decode(e):un.decode(e)}const cn=(e,n)=>Pe(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${n}`),tn={encode:e=>null,decode:e=>null===e?De({kind:"null",value:null}):cn(e,"SimpleNull")},rn={encode:e=>e.value,decode:e=>"string"==typeof e?De(n(e)):cn(e,"SimpleString")},an={encode:e=>e.value,decode:e=>"number"==typeof e?De(c(e)):cn(e,"SimpleNumber")},on={encode:e=>e.value.map(en),decode:e=>{if(Array.isArray(e)){const n=Ee($e)(nn)(e);return Be(t)(n)}return cn(e,"SimpleArray")}},un={encode:e=>{const n=[...e.value.entries()];return Object.assign({},...Array.from(n,(([e,n])=>({[e]:en(n)}))))},decode:e=>{if(e&&e.constructor===Object){const n=Ee($e)((([e,n])=>b(nn(n),Be((n=>function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e}(e,n))))))(Object.entries(e));return Be((e=>r(new Map([...e]))))(n)}return cn(e,"SimpleObject")}};function sn(e){return b(e,fn,V(Xe),R((()=>"<encode error>")))}function pn(e){return V(mn)(function(e){switch(e.state.kind){case"top":return G(n(e.state.error));case"bottom":return D;case"inner":return fn(e.state.a)}}(e))}function fn(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return gn(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?G(t(function(e,n){const c=V((e=>me(e)(n)))(e);return R((()=>n))(c)}(V((e=>n(function(e){const n=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},c=e=>1===e[2]?n(e[1]):n(e[1])+JSON.stringify(e[2]);return e.map(c).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return n(e.error);case"inner":return c(e.a)}},a=e=>Re([wn,ln,e=>b(e,dn,r,G)],(n=>n(e))),o=e=>Re([wn,qn,e=>b(e,dn,(e=>We(e,(([e,n])=>[JSON.stringify(e),n]))),r,G)],(n=>n(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return a(e.group);case"numberGroup":return o(e.group)}}(e.payload)))):D}function gn(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||H(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||H(e.limit)}}function wn(e){switch(e.kind){case"unbounded":return D;case"windowed":return G(n("w"));case"countLimit":return G(n(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return G(n(1===e.n?"u":`u${e.n}`))}}function ln(e){switch(e.kind){case"unbounded":return D;case"windowed":return G(n(H(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return G(n(H(e.limit)?e.limit.value:""))}}function qn(e){switch(e.kind){case"unbounded":return D;case"windowed":return H(e.key)?G(c(e.key.value)):G({kind:"null",value:null});case"countLimit":case"uniqueLimit":return H(e.limit)?G(c(e.limit.value)):G({kind:"null",value:null})}}function dn(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function mn(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?mn(e.value[0]):t(e.value.map(mn));case"object":return b(Ze(e.value,(([e,n])=>"null"!==n.kind)),(e=>We(e,(e=>[e[0],mn(e[1])]))),r);default:return e}}function yn(e){const n=e=>{if(0===e.length)return{kind:"bottom"};const n=(e=>{if(4!==e.length)return D;const[n,c,t,r]=e;if("string"===n.kind&&"string"===c.kind&&"object"===r.kind){const e=U((e=>bn(e[1].value)&&vn(e[2].value)))({1:n,2:c});return V((e=>({prim:e[1].value,grp:e[2].value,cutoff:t,m:r.value})))(e)}return D})(e);if(H(n)){const{prim:e,grp:c,cutoff:t,m:r}=n.value,a=hn(t,r,kn(c));return"string"==typeof a?u(a):i(m(Sn(e),a))}const c=(e=>{if(3!==e.length)return D;const[n,c,t]=e;if("string"===n.kind&&"object"===t.kind){const e=U((e=>vn(e.value)))(n);return V((e=>({grp:e.value,cutoff:c,m:t.value})))(e)}return D})(e);if(H(c)){const{grp:e,cutoff:n,m:t}=c.value,r=hn(n,t,kn(e));return"string"==typeof r?u(r):i(m(D,r))}const t=(e=>{if(2!==e.length)return D;const[n,c]=e;if("string"===n.kind&&"object"===c.kind){const e=U((e=>bn(e.value)))(n);return V((e=>({prim:e.value,m:c.value})))(e)}return D})(e);if(H(t)){const{prim:e,m:n}=t.value;return i(m(Sn(e),l(s(n))))}const r=(e=>{if(1!==e.length)return D;const[n]=e;return"object"===n.kind?G({m:n.value}):D})(e);if(H(r)){const{m:e}=r.value;return i(m(D,l(s(e))))}const a=(e=>{if(e.length<1)return D;const[n,...c]=e;if("string"===n.kind){const e=U((e=>bn(e.value)))(n);return V((e=>({prim:e.value,rest:c})))(e)}return D})(e);if(H(a)){const{prim:e,rest:n}=a.value;return i(m(Sn(e),zn(n)))}return i(m(D,zn(e)))},c=e=>"array"===e.kind?Ae(c)(e.value):[e];return"null"===e.kind?d({kind:"bottom"}):d(n(c(e)))}function bn(e){const n=e.split("");if(!0==(0===n.length))return!1;{const[e,...c]=n;return-1!=="pmvn".indexOf(e)&&c.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}function vn(e){const n=e.split("");switch(!0){case 0===n.length:return!1;case"w"===n[0]&&void 0===n[1]:return!0;default:{const[e,...c]=n;return-1!=="ux".indexOf(e)&&-1===c.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function hn(e,n,c){switch(e.kind){case"string":return l(c({1:G(e.value),2:n}));case"number":case"null":return w(c({1:"null"===e.kind?D:G(e.value),2:Ze(We(n,(([e,n])=>[Number(e),n])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function kn(e){const n=e=>n=>g(n[2],n[1],e),c=e=>n=>f(n[2],n[1],e),t=e.split("");switch(!0){case"w"===t[0]&&void 0===t[1]:return e=>p(e[2],e[1]);case"u"===t[0]&&void 0===t[1]:return n(1);case"u"===t[0]&&void 0!==t[1]:return n(parseInt(t.slice(1).join("")));case"x"===t[0]&&void 0===t[1]:return c(1);case"x"===t[0]&&void 0!==t[1]:return c(parseInt(t.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Sn(e){return V(a)(oe(_n(e,(e=>{const n=e.split("");if(0===n.length)return D;const[c,...t]=n,r=(e=>{switch(e){case"p":return G("add");case"m":return G("mul");case"v":return G("max");case"n":return G("min");default:return D}})(c);return V((e=>{const{init:n,rest:c}=(r=e=>{return"number"==typeof(n=parseInt(e))&&isFinite(n)&&Math.floor(n)===n;var n},function(e){var n=Oe(ke(e,r))(e);return{init:n[0],rest:n[1]}})(t);var r;return{1:{1:e,2:0===n.length?1:parseInt(n.join(""))},2:c.join("")}}))(r)}))))}function _n(e,n){const c=n(e);return R((()=>[]))(V((e=>[e[1]].concat(_n(e[2],n))))(c))}function zn(e){return q(e.map(jn))}function jn(e){switch(e.kind){case"number":return i(e.value);case"string":return u(e.value);case"null":return{kind:"bottom"};case"object":return u("{object}");case"array":return u("{array}")}}const xn={strategy:(e,n,c)=>t=>{if(J(c))return n;if("delta"===e&&J(n))return D;if(J(n))return c;if(H(n)&&H(c))return t(n.value,c.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,n,c,t,r,a)=>{const i=Ce(M(a));if("append"===e&&"add"===n)return xe(c,t,Tn("append",r.plus));if("append"===e&&"mul"===n)return xe(c,t,Tn("append",r.times));if("append"===e&&"max"===n)return x(i)(c,t);if("join"===e&&"add"===n)return xe(c,t,Tn("join",x(a)));if("join"===e&&"mul"===n)return xe(c,t,Tn("join",x(a)));if("join"===e&&"max"===n)return x(i)(c,t);if("min"===n)return xn.operation(e,"max",c,t,r,function(e){return S(((n,c)=>Je(e.compare(n,c))))}(a));if("delta"===e&&"max"===n)return j(i)(c,t)?c:t.map(o);if("delta"===e)return xe(c,t,((e,n)=>j(M(a))(e,n)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,n,c,t)=>{if("delta"===e&&"top"===c.kind&&"top"===t.kind)return j(A)(c.error,t.error)?u(c.error):{kind:"bottom"};if("delta"===e&&"bottom"===t.kind)return c;if("delta"===e&&"bottom"===c.kind)return{kind:"bottom"};if("top"===c.kind&&"top"===t.kind)return u(x(A)(c.error,t.error));if("top"===c.kind)return c;if("top"===t.kind)return t;if("inner"===c.kind&&"inner"===t.kind)return n(c.a,t.a);if("bottom"===c.kind)return t;if("bottom"===t.kind)return c;throw new Error("Non exhaustive match in extend")}},On={plus:(e,n)=>e+n,times:(e,n)=>e*n};function An(e,n,c,t){if("unbounded"===e.kind&&"unbounded"===n.kind){const r=e.group,a=n.group;return R(o)(V((e=>i(s(e))))(Ke(r,a,c,t)))}if("windowed"===e.kind&&"windowed"===n.kind){const r=e.key,a=e.group,u=n.key,s=n.group,f=x(Y(t))(r,u);return R(o)(V((e=>i(p(e,f))))(Ke(a,s,c,t)))}if("countLimit"===e.kind&&"countLimit"===n.kind){const r=e.n,a=n.n;if(r===a){const a=e.limit,u=e.group,s=n.limit,p=n.group,g=x(Y(t))(a,s);return R(o)(V((e=>i(f(e,g,r))))(Ke(u,p,c,t)))}return u("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===n.kind){const r=e.n,a=n.n;if(r===a){const a=e.limit,u=e.group,s=n.limit,p=n.group,f=x(Y(t))(a,s);return R(o)(V((e=>i(g(e,f,r))))(Ke(u,p,c,t)))}return u("Non matching counts")}return u("Non matching group types")}function Ln(e,n,c,t,r,a){const i=(e,n)=>({1:he(e)(n).concat(be(Math.max(0,e-n.length),o)),2:Se(e)(n)}),u=(n,c,t)=>{if(0===n.length)return xn.operation(e,"max",c,t,r,a);if(n.length>0){const[o,...s]=n,p=i(o[2],c),f=p[1],g=p[2],w=i(o[2],t),l=w[1],q=w[2];return xn.operation(e,o[1],f,l,r,a).concat(u(s,g,q))}throw new Error("Non exhaustive match in recurse")};return ze((s=e=>"bottom"===e.kind,function(e){return e.slice(ke(e,s))})(ze(u(n,c,t))));var s}function Mn(n,c,t){return R(e)(Nn(n,D)(c,t))}function Nn(e,n){const c=n=>(c,t)=>xn.strategy(e,c,t)(Nn(e,n)),t=(t,r)=>{if(B(pe(h({1:O,2:ge}))).equals(t.commands,r.commands)){const a=((n,t,r)=>{if("stringGroup"===t.kind&&"stringGroup"===r.kind){const e=An(t.group,r.group,c(n),A);return L(e,(e=>l(En(e,A))))}if("numberGroup"===t.kind&&"numberGroup"===r.kind){const e=An(t.group,r.group,c(n),we);return L(e,(e=>w(En(e,we))))}if("tuple"===t.kind&&"tuple"===r.kind){const c=H(n)?n.value:[];return i(q(Ln(e,c,t.tuple,r.tuple,On,we)))}throw new Error(`Non matching payload. Got ${t.kind} and ${r.kind}`)})(J(t.commands)?n:t.commands,t.payload,r.payload);return L(a,(e=>m(t.commands,e)))}throw new Error(`Non matching primitive strings. Got ${sn(t)} and ${sn(r)}`)};return(n,c)=>pn(d(xn.extend(e,t,yn(n).state,yn(c).state)))}function In(e,n,c){const t=V((n=>Ze(e,(([e,t])=>{return(r=c,function(e,n){return-1!==r.compare(e,n)})(e,n);var r}))))(n);return R((()=>e))(t)}function En(e,n){switch(e.kind){case"unbounded":return e;case"windowed":return J(e.key)?e:p(In(e.group,e.key,n),e.key);case"countLimit":{const c=e.limit,t=e.n,r=e.group,a=(e,n)=>n<=1?D:G(n-1),o=Qe(t,r,a,n),i=x(Y(n))(c,o);return f(In(r,i,n),i,t)}case"uniqueLimit":{const c=e.limit,t=e.n,r=e.group,a=(e,n)=>{if("object"===e.kind){const c=[...e.value.keys(),...n.keys()],r=new Set(c);return r.size>=t?D:G(r)}return D},o=Qe(new Set,r,a,n),i=x(Y(n))(c,o);return g(In(r,i,n),i,t)}}}function Tn(e,n){return(c,t)=>xn.extend(e,((e,c)=>i(n(e,c))),c,t)}function Cn(e,n){return Mn("append",e,n)}function Pn(e,n,c,t,r,a,o,i,u){switch(arguments.length){case 1:return e;case 2:return n(e);case 3:return c(n(e));case 4:return t(c(n(e)));case 5:return r(t(c(n(e))));case 6:return a(r(t(c(n(e)))));case 7:return o(a(r(t(c(n(e))))));case 8:return i(o(a(r(t(c(n(e)))))));case 9:return u(i(o(a(r(t(c(n(e))))))));default:for(var s=arguments[0],p=1;p<arguments.length;p++)s=arguments[p](s);return s}}var Dn=function(e){return"Some"===e._tag},Gn={_tag:"None"},Un=function(e){return{_tag:"Some",value:e}},Fn=function(e){return"Left"===e._tag},Bn=Object.prototype.hasOwnProperty;function Yn(e){return function(n,c){if(void 0===c){var t=Yn(e);return function(e){return t(n,e)}}for(var r,a=0;a<c.length;a++)if(r=c[a],e.equals(r,n))return!0;return!1}}var Vn=Yn;function $n(e){var n=Vn(e);return function(c,t){if(void 0===t){var r=$n(e);return function(e){return r(e,c)}}return c.filter((function(e){return!n(e,t)}))}}var Hn=Fn,Jn=function(e){return function(n){return Hn(n)?e(n.left):n.right}};var Rn=function(e){return function(n){return!e(n)}},Kn=Gn,Qn=Un;var Wn=Dn;var Zn={equals:function(e,n){return e===n}},Xn=function(e){for(var n in e)if(Bn.call(e,n))return!1;return!0};function ec(e){return function(n){var c={},t=!1;for(var r in n)if(Bn.call(n,r)){var a=n[r];e(r,a)?c[r]=a:t=!0}return t?c:n}}var nc=function(e){return ec((function(n,c){return e(c)}))};var cc=Xn;var tc=nc;tc(Rn(cc));function rc(...e){return e.reduce(((e,n)=>Object.assign(Object.assign({},e),n)),{})}Rn((function(e){return 0===e.length}));function ac(e,n){const c=Object.keys(e),t=c.length,r={};for(let a=0;a<t;a++){const t=c[a],o=n(t,e[t]);Wn(o)&&(r[t]=o.value)}return r}function oc(e){var n;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(n=e.properties)||void 0===n?void 0:n.segment_number)}const ic="process";let uc=!1,sc=[],pc=!1;const fc={};let gc={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),get1PSegments:()=>({}),get3PSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};const wc=e=>{const n=gc.get1PSegments(),c={"1p":Object.assign(Object.assign({},n["1p"]),e["1p"])};gc.get1PSegments=()=>c},lc=e=>{const n=Object.assign({},e);delete n["1p"],gc.get3PSegments=()=>n},qc=()=>{const e=hc.concat(gc.get1PSegments(),gc.get3PSegments()),n=vc(e);gc.getSegments=()=>e,gc.getSegmentsArray=()=>n};function dc(e,n,c,t,r,a,o){uc=!1,sc=[],pc=!1;const i=vc(t.segments);gc={getCurrentTime:()=>new Date,getCurrentSession:()=>t.sessionId,getCurrentView:()=>t.viewId,get1PSegments:()=>t.segments,get3PSegments:()=>({}),getSegments:()=>hc.concat(gc.get1PSegments(),gc.get3PSegments()),getSegmentsArray:()=>i,getLookalikeModels:()=>t.lookalikeModels,setSegmentActivation:(e,n)=>{}};const u=ac(n,((n,c)=>{var t;return(null===(t=e[n])||void 0===t?void 0:t.checksum)===c?Kn:Qn(((e,n)=>{const c=a[e].interpret(null,gc);return Object.assign({checksum:n},!1===c.result?{}:{result:c})})(n,c))}));if(0===r.length)return{diff:Object.assign(Object.assign({},e),u),errors:[]};if(0===Object.keys(u).length)return{diff:e,errors:[]};{const t=mc(u,n,c,r,"bootstrap",a,o);return{diff:Object.assign(Object.assign({},e),t.diff),errors:t.errors}}}function mc(e,n,c,t,r,a,o){let i={diff:{},errors:[]};const u=t.length,s=()=>t.filter((e=>{return n=o["!UpdateLookalikeModels"]||[],oc(c=e)&&n.includes(c.properties.segment_number.toString());var n,c})).length===t.length?"lookalikeTransition":"transition",p=(e,n,c)=>"transition"===e?c===n-1?s():"event":e;for(let s=0;s<u;s++){const f=t[s],g=p(r,u,s),w=yc(Object.assign(Object.assign({},e),i.diff),n,c,f,g,a,o);i={diff:Object.assign(Object.assign({},i.diff),w.diff),errors:i.errors.concat(w.errors)}}return i}function yc(n,c,t,r,a,o,i){"bootstrap"!==a&&(gc.setSegmentActivation=bc(n,c));const u=e,s=(e,n)=>{const c=o[e],a=c.lift(r,gc),i=Pn(nn(n.state||null),Jn(u)),s=Pn(nn(a),Jn(u),(e=>Cn(i,e))),p=t[e],f=p?Pn(nn(p),Jn(u),(e=>Cn(s,e))):s,g=en(s),w=c.interpret(en(f),gc),l=n.activations||{};return Object.assign(Object.assign(Object.assign({checksum:n.checksum},null===g?{}:{state:g}),!1===w.result?{}:{result:w}),0===Object.keys(l).length?{}:{activations:l})},p=[],f={},g=function(e,n,c,t,r){switch(e){case"event":const e=(null==r?void 0:r[t.name])||[];if(uc)return e;{sc.push(t);const n=[...r["!UpdateSecondPartyData"]||[],...r["!UpdateThirdPartyData"]||[]];return $n(Zn)(e,n)}case"lookalikeTransition":return(null==r?void 0:r[t.name])||[];case"transition":const a=(null==r?void 0:r[t.name])||[];if(pc){const e=r["!UpdateLookalikeModels"]||[];return a.concat(e)}return a;case"bootstrap":const o=((null==r?void 0:r[t.name])||[]).filter((e=>void 0!==n[e]));return $n(Zn)(o,[...uc?[]:(r["!UpdateSecondPartyData"]||[]).concat(r["!UpdateThirdPartyData"]||[]),...pc?[]:r["!UpdateLookalikeModels"]||[]]);case"updateExternalState":return Object.keys(c);case"updateEnvironment":return[...r["!UpdateLookalikeModels"]||[],...r["!UpdateSecondPartyData"]||[],...r["!UpdateThirdPartyData"]||[]];case"updateLAL":return r["!UpdateLookalikeModels"]||[];case"updateTPD":return[...r["!UpdateSecondPartyData"]||[],...r["!UpdateThirdPartyData"]||[]]}}(a,n,t,r,i),w=g.length;!function(e){oc(e)&&(wc({"1p":{[e.properties.segment_number]:"SegmentEntry"===e.name}}),qc())}(r);for(let e=0;e<w;e++){const t=g[e],r=n[t]||{checksum:c[t]};let a=r;try{a=s(t,r)}catch(e){p.push(`Failed to interpret query ${t}. Got ${e}`)}f[t]=a}return{diff:f,errors:p}}function bc(e,n){return(c,t,r)=>{if(!(r in e)){const c=n[r];if(void 0===c)throw new Error("Checksum not in internalStateMap");e[r]={checksum:c}}"activations"in e[r]||(e[r].activations={});c in e[r].activations||(e[r].activations[c]=[]),e[r].activations[c]=[...e[r].activations[c],t]}}function vc(e){return Object.keys(e).reduce(((n,c)=>{const t=Object.keys(e[c]),r=[];return t.forEach((n=>{!0===e[c][n]&&r.push(n)})),n[c]=r,n}),{})}const hc={empty:{},concat:(e,n)=>{const c=Object.assign({},e);for(const[e,t]of Object.entries(n))c[e]?c[e]=rc(c[e],t):c[e]=t;return c}};const kc=(e,n)=>{if("noop"===e.type)return{diff:{},errors:[]};const c=(e,...c)=>[e.stateMap,...e.payload,...c,n.rawQueries,n.queriesByEvent];return"bootstrap"===e.type?dc(...c(e)):"updateEnvironment"===e.type?function(e,n,c,t,r,a){return t.segments&&(wc(t.segments),lc(t.segments),qc(),gc.setSegmentActivation=bc(e,n)),t.lookalikeModels&&(pc=!0),t.segments&&(e=>{const n=Object.keys(e).length,c="1p"in e;return c&&n>1||!c&&n>0})(t.segments)&&(uc=!0),gc=Object.assign(Object.assign(Object.assign(Object.assign({},gc),t.viewId?{getCurrentView:()=>t.viewId}:{}),t.sessionId?{getCurrentSession:()=>t.sessionId}:{}),t.lookalikeModels?{getLookalikeModels:()=>t.lookalikeModels}:{}),mc(e,n,c,sc.length>0?sc:[fc],"updateEnvironment",r,a)}(...c(e)):"updateLAL"===e.type?function(e,n,c,t,r,a){return gc.getLookalikeModels=()=>t,pc=!0,yc(e,n,c,fc,"updateLAL",r,a)}(...c(e)):"updateTPD"===e.type?function(e,n,c,t,r,a){lc(t),qc(),gc.setSegmentActivation=bc(e,n),uc=!0;const o=mc(e,n,c,sc.length>0?sc:[fc],"updateTPD",r,a);return sc=[],o}(...c(e)):"updateExternalState"===e.type?function(e,n,c,t,r){return yc(e,n,c,fc,"updateExternalState",t,r)}(...c(e)):e.type===ic?mc(...c(e,"event")):"processTransitions"===e.type?function(e,n,c,t,r,a){return mc(e,n,c,t,"transition",r,a)}(...c(e)):void 0};const Sc=function(){var e=this&&this.__assign||function(){return e=Object.assign||function(e){for(var n,c=1,t=arguments.length;c<t;c++)for(var r in n=arguments[c])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},e.apply(this,arguments)},n=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,c=n&&e[n],t=0;if(c)return c.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,n){var c="function"==typeof Symbol&&e[Symbol.iterator];if(!c)return e;var t,r,a=c.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(t=a.next()).done;)o.push(t.value)}catch(e){r={error:e}}finally{try{t&&!t.done&&(c=a.return)&&c.call(a)}finally{if(r)throw r.error}}return o},t=this&&this.__spreadArray||function(e,n,c){if(c||2===arguments.length)for(var t,r=0,a=n.length;r<a;r++)!t&&r in n||(t||(t=Array.prototype.slice.call(n,0,r)),t[r]=n[r]);return e.concat(t||Array.prototype.slice.call(n))},r=function(){function r(e){return"number"==typeof e?a[e]:e}function p(e){return"number"==typeof e?o[e]:e}function f(e){return"number"==typeof e?i[e]:e}function g(e){switch(e.length){case 0:return null;case 1:return e[0];default:return e}}function w(e,n,c){void 0===c&&(c=d);var t=f(n).reduce((function(e,n){return e&&null!=e[n]?e[n]:null}),e);return null===t?null:c(t)}function l(e,n){var c=f(n).slice();return c.unshift(e),c}function q(e,n,c){return void 0===c&&(c=d),w(e,l("properties",n),c)}var d=function(e){return e},m=function(e){return!0};function y(e,n){return function(c){for(var t=0;t<e.length;t++){if((e[t](c)||!1)===n)return n}return!n}}var b=function(e){return function(n){return!e(n)}},v=function(e,n){return function(c){return c>=e&&c<=n}},h=function(e){return new Date(e).getTime()},k=function(e){return w(e,["time"],h)},S=function(e,n){return w(n,e,h)},_=function(e,n,c,t,r,a){return function(o){var i=w(o,e,(function(e){return e.filter(t).map((function(e){return w(e,n)})).reduce(r,a)}));return c(null===i?a:i)}};function z(e,c,t,r){var a,o;try{for(var i=n(e),u=i.next();!u.done;u=i.next()){var s=u.value;if(t(s)&&c(s)===r)return r}}catch(e){a={error:e}}finally{try{u&&!u.done&&(o=i.return)&&o.call(i)}finally{if(a)throw a.error}}return!r}var j=function(e){return function(n){return("string"==typeof e||"number"==typeof e)&&"string"==typeof n&&n.toLowerCase().indexOf(p(e).toLowerCase())>-1}},x=function(e){return function(n){return null!=n&&Array.isArray(n)&&n.indexOf(e)>=0}};function O(e,n,c,t,r){var a=w(e.getSegments(),[n,c])||!1;return r&&(t||a)&&e.setSegmentActivation(n,c,r),a}function A(e,n,c){return w(e.getSegments(),[n,c])||!1}function L(e,n,t){return void 0===t&&(t=18e5),function(r){return{a:{m:function(e,n){return[n[0],r.a.m(null!=e[0]&&e[0][0]===n[0][0]?e[1]:r.a.z,n[1])]},z:[[],r.a.z]},p:function(c,t){return[[e(c)],w(t,n)===e(c)?r.p(c,t):r.a.z]},r:function(n,c){return r.r(n,c[0]!=[]&&c[0][0]===e(n)?c[1]:r.a.z)},d:r.d.sq||{l:function(a,o){var i=w(a,n),u=e(o);if(i!==u)return null;var s=r.d.l(a,o);if(!(Array.isArray(s)&&s.length>1))return null;var p=c(s),f=p[0],g=p.slice(1),l=+(k(a)||o.getCurrentTime()),q=Math.floor(l/t),d={};return d[q]={},d[q][u]=1===g.length?g[0]:g,[f,"u",null,d]},i:function(n,c){if(!Array.isArray(n)||"object"!=typeof n[3])return[[],r.a.z];var t=e(c),a=n[3];return[[t],Object.keys(a).map((function(e){return a[e][t]})).filter((function(e){return e})).map((function(e){return r.d.i([n[0]].concat(e))})).reduce(r.a.m,r.a.z)]}}}}}var M=L((function(e){return e.getCurrentSession()}),["session_id"],18e5),N=L((function(e){return e.getCurrentView()}),["view_id"],3e5);function I(e,n,a,o){return void 0===o&&(o=1),{a:{m:function(e,n){return e.concat(n).slice(-a)},z:[]},p:function(c,t){return w(t,["name"])===r(n)?[e.p(c,t)]:[]},r:function(n,c){return e.r(n,c.reduce((function(n,c){return e.a.m(n,c)}),e.a.z))},d:e.d.ftn||{l:function(n,c){var t,r=e.d.l(n,c),i=w(n,["time"],h)*o;return r&&[r[0],"x"+a,null,(t={},t[i]=2==r.length?r[1]:r.slice(1),t)]},i:function(n,r){return n?Object.keys(n[3]||{}).sort().reverse().map((function(e){return Array.isArray(e)?t([n[0]],c(n[3][e]),!1):[n[0],n[3][e]]})).map((function(n){return e.d.i(n,r)})):[]}}}}var E=function(e,n){return null===e?null==n?null:{b:n}:null==n?{a:e}:{a:e,b:n}},T=function(e,n){return e&&n?e(n):null},C=function(e,n,c){if(c&&c.result&&Array.isArray(c.result)){var t=T(e.d&&e.d.m,{result:c.result[0]}),r=T(n.d&&n.d.m,{result:c.result[1]});return E(t,r)}return null};function P(e,n){var c=u[e];if(!n||!c)return!1;if(!c.length)return!0;for(var t=0,r=!1,a=function(e){for(var n=[],c=0;c<e.length;++c){var t=e.charCodeAt(c);if(t>=55296&&t<=56319){var r=e.charCodeAt(c+1);if(r>=56320&&r<=57343){n.push(e.slice(c,c+2)),++c;continue}}n.push(e.charAt(c))}return n}(n.toLowerCase()),o=0;o<a.length;o++){for(var i=a[o];t>0&&!c[t][i];)t=c[t].su?c[t].su:0;if(c[t][i]&&(r=!!c[t=c[t][i]].te))break}return r}return{q:function(e){return{lift:function(n,c){return e.d.l(n,c)},interpret:function(n,c){return function(n,c){return{result:e.r(n,c)}}(c,e.d.i(n,c))},migrate:function(n){return n&&e.d.m?e.d.m(n):null},m:e.a.m,z:e.a.z,p:e.p,r:e.r,i:e.d.i}},a:function(e){return y(e,!1)},acq:function(e,n){return{p:function(c,t){return[e.p(c,t),n.p(c,t)]},r:function(c,t){return e.r(c,t[0])&&n.r(c,t[1])},a:{z:[e.a.z,n.a.z],m:function(c,t){return[e.a.m(c[0],t[0]),n.a.m(c[1],t[1])]}},d:{l:function(c,t){return E(e.d.l(c,t),n.d.l(c,t))},i:function(c,t){return c?[e.d.i(c.a||null,t),n.d.i(c.b||null,t)]:[e.a.z,n.a.z]},m:function(c){return C(e,n,c)}}}},acs:P,acs_:function(e,n){return function(c){return P(n,w(c,e))}},af_i:function(e,n,c){return void 0===c&&(c=m),function(t){return w(t,e,(function(e){return z(e,n,c,!1)}))&&!0}},af_l:function(e,n,c){return void 0===c&&(c=m),function(t){var r=w(t,e,(function(e){return e.filter(c).length}));return n(null===r?0:r)}},af_m:function(e,n,c,t){return void 0===t&&(t=m),function(r){var a=w(r,e,(function(e){return e.filter(t)}));return null===a||0===a.length?c(0):c(a.map((function(e){return w(e,n)})).reduce((function(e,n){return e+n}),0)/a.length)}},af_n:function(e,n,c,t){return void 0===t&&(t=m),_(e,n,c,t,(function(e,n){return Math.min(e,n)}),Number.POSITIVE_INFINITY)},af_p:function(e,n,c,t){return void 0===t&&(t=m),_(e,n,c,t,(function(e,n){return e*n}),1)},af_s:function(e,n,c,t){return void 0===t&&(t=m),_(e,n,c,t,(function(e,n){return e+n}),0)},af_u:function(e,n,c){return void 0===c&&(c=m),function(t){return w(t,e,(function(e){return z(e,n,c,!0)}))||!1}},af_x:function(e,n,c,t){return void 0===t&&(t=m),_(e,n,c,t,(function(e,n){return Math.max(e,n)}),Number.NEGATIVE_INFINITY)},as:function(e,n,c){var t=l("properties",n);return function(n){for(var r=w(n,t),a=c.length,o=!0,i=0;i<a;i++){var u=c[i];if(!(o=e(u)(r)))break}return o}},c:x,c_:function(e,n){return function(c){return x(n)(w(c,e))}},cl_:function(e,n){return function(c){return x(p(n))(w(c,e))}},cx:function(e){return function(n){return x(p(e))(n)}},ctu:function(e,n,c,t){return{a:t?{m:function(e,n){return e.filter((function(e){return-1===n.indexOf(e)})).concat(n).slice(-t)},z:[]}:{m:function(e,n){return e.filter((function(e){return-1===n.indexOf(e)})).concat(n)},z:[]},p:function(t,a){return w(a,["name"])===r(e)&&n(a)?w(a,c):[]},r:function(e,n){return n},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(n,c,t,a){function o(e,n){var c,t=function(e){return{k:e.k,c:1+e.c}},r={arr:[],add:{k:n,c:1}};return n?(c=e.reduce((function(e,n){return e.add.k===n.k?{arr:e.arr,add:t(n)}:{arr:e.arr.concat(n),add:e.add}}),r)).arr.concat(c.add):e}return{a:a?{m:function(e,n){return o(e,n).slice(-a)},z:[]}:{m:function(e,n){return o(e,n)},z:[]},p:function(e,a){return w(a,["name"])===r(n)&&c(a)?w(a,t):null},r:function(n,c){return c.reduce((function(n,c){var t;return e(e({},n),((t={})[c.k]=c.c,t))}),{})},d:{l:function(e){return null},i:function(e){return[]}}}},ctw:function(e,n,c,t){return{a:t?{m:function(e,n){return e.concat(n).slice(-t)},z:[]}:{m:function(e,n){return e.concat(n)},z:[]},p:function(t,a){return w(a,["name"])===r(e)&&n(a)?w(a,c):[]},r:function(e,n){return n},d:{l:function(){return null},i:function(){return[]}}}},cw:function(e,n,c){return void 0===c&&(c=d),{a:{m:function(e,n){return e+n},z:0},p:function(c,t){return w(t,["name"])===r(e)&&n(t)?1:0},r:function(e,n){return c(n)},d:{l:function(c){return w(c,["name"])===r(e)&&n(c)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},e:function(e){return function(n){return n===e}},e_:function(e,n){return function(c){return w(c,e)===n}},fm:function(e,n){return{p:n.p,r:function(c,t){return e(n.r(c,t))},a:n.a,d:n.d}},ftn:function(e,n,c){return{a:{m:function(e,n){return e.concat(n.slice(0,c-e.length))},z:[]},p:function(c,t){return w(t,["name"])===r(n)?[e.p(c,t)]:[]},r:function(n,c){return e.r(n,c.reduce((function(n,c){return e.a.m(n,c)}),e.a.z))},d:I(e,n,c,-1).d}},fw:function(e,n,c,t){return void 0===t&&(t=d),{a:{m:function(e,n){return null===e?n:e},z:null},p:function(t,a){return w(a,["name"])===r(e)&&n(a)?w(a,c):null},r:function(e,n){return n},d:{l:function(c){return w(c,["name"])===r(e)&&n(c)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},g:function(e){return function(n){return n>e}},g_:function(e,n){return function(c){return w(c,e)>n}},gb:function(e,n,c){return{a:{m:function(c,t){var r=Object.keys(c).concat(Object.keys(t)).filter((function(e,n,c){return c.indexOf(e)===n})).sort((function(e,n){return Math.max(w(c,[n,1]),w(t,[n,1]))-Math.max(w(c,[e,1]),w(t,[e,1]))})).slice(0,n).reduce((function(n,r){var a=e.a.m(w(c,[r,0])||e.a.z,w(t,[r,0])||e.a.z);return n[r]=[a,Math.max(w(c,[r,1]),w(t,[r,1]))],n}),{});return r},z:{}},p:function(n,t){var r,a,o=w(t,l("properties",c)),i=e.p(n,t);return null==o||(null==(a=i)||"object"==typeof a&&0===Object.keys(a).length||a===e.a.z)?{}:((r={})[o]=[i,w(t,["time"],h)],r)},r:function(n,c){var t={};return Object.keys(c).forEach((function(r){return t[r]=e.r(n,c[r][0])})),t},d:{l:function(){return null},i:function(){return{}}}}},ge:function(e){return function(n){return n>=e}},ge_:function(e,n){return function(c){return w(c,e)>=n}},i_:d,ifp:function(e){return{a:{m:function(e,n){return n},z:null},p:function(e){return null},r:function(n,c){return function(n){return A(n,"1p",e)}(n)},d:{l:function(e,n){return null},i:function(e){return null}}}},isp:function(e,n,c,t){return{a:{m:function(e,n){return n},z:!1},p:function(c,t){return A(c,e,n)},r:function(r,a){return O(r,e,n,c,t)},d:{l:function(e,n){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},itp:function(e,n,c,t){return{a:{m:function(e,n){return n},z:!1},p:function(c,t){return A(c,e,n)},r:function(r,a){return O(r,e,n,c,t)},d:{l:function(e,n){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},k:w,l:function(e){return function(n){return n<e}},l_:function(e,n){return function(c){var t=w(c,e);return null!==t&&t<n}},le:function(e){return function(n){return n<=e}},le_:function(e,n){return function(c){var t=w(c,e);return null!==t&&t<=n}},lm:function(e,n){var c=function(n){return function(e,n,c){var t,r=e||{},a=n[c]||{},o=(a["1p"]||{}).const||0;return Object.keys(r).forEach((function(e){r[e].forEach((function(n){var c=(a[e]||{})[n]||0;o+=c}))})),t=o,1/(1+Math.pow(Math.E,-t))}(n.getSegmentsArray(),n.getLookalikeModels(),e)};return{a:{m:function(e,n){return n},z:null},p:function(e){return null},r:function(e,t){return n(c(e))},d:{l:function(e,n){return null},i:function(e){return null}}}},ltn:I,mnw:function(e,n,c,t){void 0===t&&(t=d);var a=Number.POSITIVE_INFINITY;return{a:{m:function(e,n){return e<n?e:n},z:a},p:function(t,o){return w(o,["name"])===r(e)&&n(o)?w(o,c):a},r:function(e,n){return t(n)},d:{l:function(t){return w(t,["name"])===r(e)&&n(t)?["n",w(t,c)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:a}}}},mxw:function(e,n,c,t){void 0===t&&(t=d);var a=Number.NEGATIVE_INFINITY;return{a:{m:function(e,n){return e>n?e:n},z:a},p:function(t,o){return w(o,["name"])===r(e)&&n(o)?w(o,c):a},r:function(e,n){return t(n)},d:{l:function(t){return w(t,["name"])===r(e)&&n(t)?["v",w(t,c)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:a}}}},n0:b(d),n:function(e){return function(n){return n!==e}},nt:b,n_:function(e,n){return function(c){return w(c,e)!==n}},o:function(e){return y(e,!0)},ocq:function(e,n){return{p:function(c,t){return[e.p(c,t),n.p(c,t)]},r:function(c,t){return e.r(c,t[0])||n.r(c,t[1])},a:{z:[e.a.z,n.a.z],m:function(c,t){return[e.a.m(c[0],t[0]),n.a.m(c[1],t[1])]}},d:{l:function(c,t){return E(e.d.l(c,t),n.d.l(c,t))},i:function(c,t){return c?[e.d.i(c.a||null,t),n.d.i(c.b||null,t)]:[e.a.z,n.a.z]},m:function(c){return C(e,n,c)}}}},oe:function(e){for(var n=Object.keys(e),c=n.length,t=new Array(c);c--;)t[c]=[n[c],e[n[c]]];return t},os:function(e,n,c){var t=l("properties",n);return function(n){for(var r=w(n,t),a=c.length,o=!1,i=0;i<a;i++){var u=c[i];if(o=e(u)(r))break}return o}},pacs:function(e,n){return function(c){return P(n,q(c,e))}},pb:function(e,n,c){return function(t){return v(n,c)(q(t,e))}},pc:function(e,n){return function(c){var t=q(c,e);return null!=t&&Array.isArray(t)&&t.indexOf(n)>=0}},pc_:function(e,n){return function(c){var t=q(c,e),r=p(n);return null!=t&&Array.isArray(t)&&t.indexOf(r)>=0}},pe:function(e,n){return function(c){return q(c,e)===n}},pg:function(e,n){return function(c){return q(c,e)>n}},pge:function(e,n){return function(c){return q(c,e)>=n}},pl:function(e,n){return function(c){var t=q(c,e);return null!==t&&t<n}},ple:function(e,n){return function(c){var t=q(c,e);return null!==t&&t<=n}},pn:function(e,n){return function(c){return q(c,e)!==n}},ps:function(e,n){return function(c){return j(n)(q(c,e))}},pw:function(e,n,c,t){return void 0===t&&(t=d),{a:{m:function(e,n){return e*n},z:1},p:function(t,a){return w(a,["name"])===r(e)&&n(a)?w(a,c):1},r:function(e,n){return t(n)},d:{l:function(t){return w(t,["name"])===r(e)&&n(t)?(a=w(t,c))>=1?["m2p",a]:a>0?["m2p",null,1/a]:0==a?["m2p",0]:a>-1?["m2p",null,1/a,1]:["m2p",a,null,1]:null;var a},i:function(e){return e?Array.isArray(e)?0===(n=e.slice(1))[0]?0:Math.pow(-1,n[2]||0)*(n[0]||1)/(n[1]||1):e:1;var n}}}},ref:function(e){return function(n){return s[e](n)}},s:j,s_:function(e,n){return function(c){return j(n)(w(c,e))}},scq:function(e,n,c){return void 0===c&&(c=d),{p:function(c,t){return[e.p(c,t),n.p(c,t)]},r:function(t,r){return c(e.r(t,r[0])+n.r(t,r[1]))},a:{z:[e.a.z,n.a.z],m:function(c,t){return[e.a.m(c[0],t[0]),n.a.m(c[1],t[1])]}},d:{l:function(c,t){return E(e.d.l(c,t),n.d.l(c,t))},i:function(c,t){return c?[e.d.i(c.a||null,t),n.d.i(c.b||null,t)]:[e.a.z,n.a.z]},m:function(c){return C(e,n,c)}}}},sq:M,sw:function(e,n,c,t){return void 0===t&&(t=d),{a:{m:function(e,n){return e+n},z:0},p:function(t,a){return w(a,["name"])===r(e)&&n(a)?w(a,c):0},r:function(e,n){return t(n)},d:{l:function(t){return function(c){return w(c,["name"])===r(e)&&n(c)}(t)?(a=w(t,c))<0?["p2",null,-a]:["p2",a]:null;var a},i:function(e){return e?Array.isArray(e)?((n="p2"===e[0]?e.slice(1):e)[0]||0)-(n[1]||0):e:0;var n}}}},t:m,tb:function(e,n){return function(c){return v(e,n)(k(c))}},te:function(e){return function(n){return k(n)===e}},te_:function(e,n){return function(c){return S(e,c)===n}},tg:function(e){return function(n){return k(n)>e}},tg_:function(e,n){return function(c){return S(e,c)>n}},tge:function(e){return function(n){return k(n)>=e}},tge_:function(e,n){return function(c){return S(e,c)>=n}},ti:h,tl:function(e){return function(n){return k(n)<e}},tl_:function(e,n){return function(c){return S(e,c)<n}},tle:function(e){return function(n){return k(n)<e}},tle_:function(e,n){return function(c){return S(e,c)<n}},tn:function(e){return function(n){return k(n)!==e}},tn_:function(e,n){return function(c){return S(e,c)!==n}},tw:function(e,n,r){var a=r||100,o=Math.ceil(n/a),i=function(e){return Math.floor(e/o)},u=function(e,c,t){var r;return[i(e-n),(r={},r[i(c)]=t,r)]},s=function(n,c){var t=Math.max(n[0],c[0]),r=Object.keys(n[1]).filter((function(e){return e>=t})).concat(Object.keys(c[1]).filter((function(e){return e>=t}))).filter((function(e,n,c){return c.indexOf(e)===n})).reduce((function(t,r){var a=e.a.m(n[1][r]||e.a.z,c[1][r]||e.a.z);return a!==e.a.z&&(t[r]=a),t}),{});return[t,r]},p=[Number.NEGATIVE_INFINITY,{}],f=function(e){var n=function(n){return n.map((function(n){var t=c(n,3),r=t[0],a=(t[1],t[2]);return u(e.t,a,r)})).reduce(s,p)};return s(n(e.in),n(e.out))},l=function(n){if(void 0!==n.result)return l(n.result);if(void 0!==n.w)return l(f(n));var t=c(n,2),r=(t[0],t[1]),a=null,o={};for(var i in r){var u=e.d.m({result:r[i]});u&&Array.isArray(u)&&(a=u[0],o[i]=g(u.slice(1)))}return a&&[a,"w",n[0],o]};return{a:{m:function(e,n){var c=e.w?f(e):e;return s(c,n)},z:p},p:function(n,c){return u(n.getCurrentTime(),w(c,["time"],h),e.p(n,c))},r:function(n,c){var t=(c.w?f(c):c)[1];return e.r(n,Object.keys(t).reduce((function(n,c){return e.a.m(n,t[c])}),e.a.z))},d:e.d.tw||{l:function(n,r){var a=e.d.l(n,r);return a&&t([a[0],"w"],c(u(r.getCurrentTime(),w(n,["time"],h),a.slice(1))),!1)},i:function(c,t){var r=Array.isArray(c)?c:[],a=t.getCurrentTime(),o=i(a-n);return[r[2]||null,Object.keys(r[3]||{}).map((function(n){var c;return(c={})[n]=e.d.i(r[3][n],t),c})).reduce((function(e,n){return Object.keys(n).filter((function(e){return parseInt(e)>=o})).forEach((function(c){return e[c]=n[c]})),e}),{})]},m:e.d.m&&l}}},vgw:function(e,n,c,t){void 0===t&&(t=d);var a={v:0,k:0};return{a:{m:function(e,n){var c=e.k+n.k;return{v:c?e.v+n.k*(n.v-e.v)/c:0,k:c}},z:a},p:function(t,o){return w(o,["name"])===r(e)&&n(o)?{v:w(o,c),k:1}:a},r:function(e,n){return t(n.v)},d:{l:function(t){return w(t,["name"])===r(e)&&n(t)?0==(a=w(t,c))?["p3",1]:a<0?["p3",1,null,-a]:["p3",1,a]:null;var a},i:function(e){return e?Array.isArray(e)?{v:(((n=e.slice(1))[1]||0)-(n[2]||0))/(n[0]||1),k:n[0]||0}:void 0:a;var n}}}},vq:N,w:function(e){return function(n){return n===p(e)}},x:function(e){return function(n){return n!==p(e)}},y:function(e,n){return function(c){return q(c,e)===o[n]}},y_:function(e,n){return function(c){return w(c,e)===o[n]}},z:function(e,n){return function(c){return q(c,e)!==o[n]}},z_:function(e,n){return function(c){return w(c,e)!==o[n]}}}}(),a=["Pageview"],o=["www.ticketmaster.co.uk","Virgin Media","ticketmaster.co.uk","volbeat","ticketmaster.com.au","moshtix.com.au","www.livenation.co.uk","www.ticketmaster.com.au","Virgin Media Limited","www.ticketmaster.de","www.ticketmaster.be","10001","10002","10003","10004","www.ticketmaster.cz","www.ticketmaster.ie","www.livenation.de","www.ticketmaster.co.nz","www.ticketmaster.ch","Volbeat","www.ticketmaster.at","203","www.livenation.com.au","200","ticketmaster.ie","ticketmaster.de","www.livenation.co.nz","festival","ticketmaster.nl","www.ticketmaster.dk","www.ticketmaster.nl","1","2","201","3","4","5","52","542","60","www.ticketmaster.pl","202","moshtix.co.nz","ticketmaster.be","ticketmaster.co.za","Australia","New Zealand","ticketmaster.co.nz","ticketmaster.dk","www.ticketmaster.es","www.ticketmaster.fi","www.ticketmaster.it","www.ticketmaster.no","www.ticketmaster.se","Live From Home","readingfestival.com","ticketmaster.ae","ticketmaster.at","ticketmaster.ch","ticketmaster.cz","ticketmaster.es","ticketmaster.fi","ticketmaster.it","ticketmaster.no","ticketmaster.pl","ticketmaster.se","www.ticketmaster.ae","www.ticketmaster.co.za","/confirmation","28989","Festivals","alternative-and-indie","arts-and-culture","comedy","downloadfestival.co.uk","electronic","hard-rock-and-metal","hip-hop-and-rap","other","pop","rnb-and-soul","rock","www.livenation.cz","www.livenation.dk","www.livenation.hu","www.livenation.nl","www.livenation.pl","Hong Kong","London","Manchester","communityfestival.london","leedsfestival.com","livenation","livenation.be","livenation.co.uk","onestowatch.com","parklife.uk.com","venues","wirelessfestival.co.uk","www.leedsfestival.com",".be",".cz",".de",".dk",".hu",".nl",".pl",".uk","109963","12885","1560779","28617","35438","451730","719339","937795","Dublin","Festival","France","Germany","Ireland","Netherlands","Sweden","United Kingdom","Vodafone","WonderHall","academymusicgroup.com","academymusicgroup.com/artsclubliverpool","academymusicgroup.com/o2academybournemouth","academymusicgroup.com/o2academybristol","academymusicgroup.com/o2academybrixton","academymusicgroup.com/o2academyedinburgh","academymusicgroup.com/o2academyglasgow","academymusicgroup.com/o2academyislington","academymusicgroup.com/o2academyleeds","academymusicgroup.com/o2academyleicester","academymusicgroup.com/o2academyliverpool","academymusicgroup.com/o2academynewcastle","academymusicgroup.com/o2academyoxford","academymusicgroup.com/o2academysheffield","academymusicgroup.com/o2apollomanchester","academymusicgroup.com/o2cityhallnewcastle","academymusicgroup.com/o2forumkentishtown","academymusicgroup.com/o2guildhallsouthampton","academymusicgroup.com/o2institutebirmingham","academymusicgroup.com/o2ritzmanchester","academymusicgroup.com/o2shepherdsbushempire","academymusicgroup.com/o2victoriawarehousemanchester","creamfields.com","downloadgermanyfestival.de","fallsfestival.com","graspopmetalmoose.be","greatescapefestival.com","isleofwightfestival.com","livenationelectronic.asia","loveboxfestival.com","moshtix.sg","pinkpop.nl","rewindfestival.com","rockwerchter.be","splendourinthegrass.com","swedenrock.com","theendsfestival.co.uk","trnsmtfest.com","www.downloadfestival.com.au","www.livenation.cn","www.livenation.fr","www.onestowatch.com","www.secretsounds.com"],i=[["client","domain"],["client","url"],["article","subCategoryMinorID"],["article","artistID"],["article","primaryCategoryMajorID"],["geo_info","country"],["isp_info","isp"],["isp_info","autonomous_system_organization"],["isp_info","organization"],["article","artistGenre"],["article","venueID"],["client","title"],["article","venueCity"],["article","artistName"],["article","brandID"],["geo_info","city"],["article","eventName"],["article","pageInstanceIdSearch"],["article","subCategoryMinor"],["form","action"],["geo_info","province"]],u=[],s=[r.o([r.ps(11,71),r.ps(1,28)]),r.as(r.s,0,[56]),r.o([r.ps(11,28),r.ps(1,28)])];return{rawQueries:{100112:r.q(r.cw(0,r.pe(5,"Hungary"),r.ge(1))),100113:r.q(r.cw(0,r.y(5,121),r.ge(1))),100114:r.q(r.cw(0,r.pe(5,"Lithuania"),r.ge(1))),100287:r.q(r.cw(0,r.ps(1,99),r.ge(1))),100463:r.q(r.cw(0,r.ps(0,"birmingham.wirelessfestival.co.uk"),r.ge(1))),100465:r.q(r.cw(0,r.ps(0,"crystalpalace.wirelessfestival.co.uk"),r.ge(1))),100466:r.q(r.cw(0,r.ps(0,"finsburypark.wirelessfestival.co.uk"),r.ge(1))),100471:r.q(r.cw(0,r.a([r.y(3,70),r.pe(10,"450636"),r.ps(0,2)]),r.ge(1))),100472:r.q(r.cw(0,r.a([r.y(3,70),r.pe(10,"452900"),r.ps(0,2)]),r.ge(1))),100473:r.q(r.cw(0,r.a([r.y(3,70),r.pe(10,"444518"),r.ps(0,2)]),r.ge(1))),100801:r.q(r.cw(0,r.ps(0,"woohahfestival.com"),r.ge(1))),100802:r.q(r.cw(0,r.ps(0,"woohahxrollingloud.com"),r.ge(1))),100893:r.q(r.cw(0,r.a([r.pe(3,"2850063"),r.ps(0,4)]),r.ge(1))),100894:r.q(r.cw(0,r.a([r.pe(3,"2802908"),r.ps(0,4)]),r.ge(1))),101149:r.q(r.cw(0,r.a([r.pe(3,"821434"),r.ps(0,4)]),r.ge(1))),101368:r.q(r.cw(0,r.a([r.y(0,16),r.ps(12,117)]),r.ge(1))),101560:r.q(r.cw(0,r.a([r.pe(10,"198239"),r.ps(0,25)]),r.ge(1))),101580:r.q(r.cw(0,r.ps(0,"hindleymusichall.com.au"),r.ge(1))),102569:r.q(r.cw(0,r.a([r.y(0,23),r.ps(1,"22651-coldplay-waitlist")]),r.ge(1))),103502:r.q(r.cw(0,r.ps(0,"einlassvoraussetzungen.livenation.de"),r.ge(1))),103509:r.q(r.cw(0,r.a([r.y(5,47),r.ps(6,125)]),r.ge(1))),103510:r.q(r.cw(0,r.a([r.y(5,46),r.ps(6,125)]),r.ge(1))),104053:r.q(r.cw(0,r.a([r.pe(3,"30690"),r.ps(0,25)]),r.ge(1))),104054:r.q(r.cw(0,r.a([r.pe(3,"1841044"),r.ps(0,25)]),r.ge(1))),104055:r.q(r.cw(0,r.a([r.pe(10,"198168"),r.ps(0,25)]),r.ge(1))),104056:r.q(r.cw(0,r.a([r.pe(10,"197670"),r.ps(0,25)]),r.ge(1))),104057:r.q(r.cw(0,r.a([r.pe(10,"199101"),r.ps(0,25)]),r.ge(1))),104071:r.q(r.cw(0,r.a([r.pe(3,"736200"),r.y(0,0)]),r.ge(1))),104078:r.q(r.cw(0,r.a([r.pe(13,"Rod Stewart"),r.y(0,6)]),r.ge(1))),104400:r.q(r.cw(0,r.ps(0,"insidedali.co.nz"),r.ge(1))),104401:r.q(r.cw(0,r.a([r.pe(3,"2855692"),r.ps(0,48)]),r.ge(1))),104725:r.q(r.cw(0,r.a([r.pe(10,"4247"),r.ps(0,29)]),r.ge(1))),105215:r.q(r.cw(0,r.ps(0,"ladygaga.livenation.co.jp"),r.ge(1))),105232:r.q(r.cw(0,r.ps(0,"livenation.ph"),r.ge(1))),105236:r.q(r.cw(0,r.pe(5,"Philippines"),r.ge(1))),105237:r.q(r.cw(0,r.ps(0,"festivalx.com.au"),r.ge(1))),106190:r.q(r.ocq(r.cw(0,r.a([r.y(0,7),r.os(r.w,10,["156444","156443","156442","156441","156440","156439","156438","156437","156436","156434","156433","156432","156430","156431","156428","156427","156426","156425","156424","156422","156421","156419","15641","156418","156145","156144","156142","156141","156139","156138","156137","156136","156133","156131","156128","156126","156125","156124","156123","156122","156121","156118","156117","156116","156113","156112","156111","156109","156108","156107","156106","156104","156100","156099","156098","156097","156093","156092","156091","156090","156088","156087","156086","156084","156083","156076","156075","156074","156072","156071","156070","156069","156068","156065","156064","156063","156062","156061","156059","156058","156053","156050","156049","156048","156047","156045","156044","156043","156042","156041","156040","156039","156038","156035","156030","156027","156025","156024","156022","156019","156018","156017","156016","156015","156014","156013","156012","156011","156010","156008","156007","156006","156005","156004","156003","156002","156001","156000","155908","155887","155885","155884","155883","155882","155879","155878","155875","155874","155873","155872","155870","155869","155868","155867","155866","155865","155864","155863","155862","155860","155858","155853","155852","155851","155850","155789"])]),r.ge(1)),r.cw(0,r.a([r.y(0,7),r.os(r.s,12,["albury","bathurst","blacktown","bowral","coffs harbour","griffith","mosman","nelson","newcastle","orange","parkes","penrith","port macquarie","randwick","sydney","tamworth","tweed heads","wollongong"])]),r.ge(1)))),106491:r.q(r.cw(0,r.pe(0,"www.whisperfestival.be"),r.ge(1))),106623:r.q(r.cw(0,r.ps(0,"elementalnights.com"),r.ge(1))),108551:r.q(r.cw(0,r.ps(0,"heapsgoodfest.com"),r.ge(1))),109010:r.q(r.cw(0,r.ps(0,"kaleidoscopefestival.ie"),r.ge(1))),109062:r.q(r.cw(0,r.ps(1,"ticketmaster.co.za/checkout/confirmation"),r.ge(1))),109212:r.q(r.ocq(r.lm("8b899758-a939-4b98-81d2-4dc876f2951e",r.ge(.568825)),r.ifp("76363"))),109215:r.q(r.ocq(r.lm("630e2fa5-3305-4144-9f39-c41dd762ec80",r.ge(.6233506)),r.ifp("105237"))),109216:r.q(r.ocq(r.lm("6b6300ea-ee70-46c2-b9d2-8d6972df6616",r.ge(.8254241)),r.ifp("85973"))),109217:r.q(r.ocq(r.lm("a732011a-399e-4893-88d0-00e265668523",r.ge(.65186197)),r.ifp("101580"))),109610:r.q(r.cw(0,r.a([r.pe(14,"discoverybank"),r.ps(0,45)]),r.ge(1))),109686:r.q(r.ocq(r.lm("89bcc3d7-f013-437a-83ca-210338b5758b",r.ge(.4962397)),r.ifp("109610"))),109690:r.q(r.ocq(r.lm("f98db88a-4d2d-41b3-9282-449e8527341a",r.ge(.6048798)),r.ifp("74825"))),109692:r.q(r.ocq(r.lm("d6a9d0c8-1eca-4a17-a1d2-96dea72351b5",r.ge(.79646045)),r.ifp("83603"))),109693:r.q(r.ocq(r.lm("6c0f63b8-a1aa-463b-a44e-cd8de63b96af",r.ge(.8808534)),r.ifp("93330"))),109694:r.q(r.ocq(r.lm("adb87a61-0eac-48bd-aff3-b59eb9fdf7fd",r.ge(.9083951)),r.ifp("95231"))),109695:r.q(r.ocq(r.lm("f47c665a-3263-4cf1-80e5-f636d0cacea9",r.ge(.919213)),r.ifp("83688"))),109696:r.q(r.ocq(r.lm("69a4e2cc-fa00-4c42-8911-4904cb6c7fd0",r.ge(.908298)),r.ifp("74837"))),109697:r.q(r.ocq(r.lm("95b61ef8-d3d3-474e-b03f-c7f4f8c47d4b",r.ge(.896855)),r.ifp("74826"))),109775:r.q(r.cw(0,r.ps(0,"therockcircus.nl"),r.ge(1))),109920:r.q(r.cw(0,r.ps(0,"ticketmaster.co.za/checkout"),r.ge(1))),109921:r.q(r.cw(0,r.ps(0,"ticketmaster.ae/checkout/confirmation"),r.ge(1))),109923:r.q(r.cw(0,r.a([r.pe(14,"bigconcerts"),r.ps(0,45)]),r.ge(1))),109927:r.q(r.cw(0,r.ps(0,"ticketmaster.fi/checkout/confirmation"),r.ge(1))),110024:r.q(r.cw(0,r.ps(0,"sunriseavenuehelsinki.fi"),r.ge(1))),110519:r.q(r.ocq(r.cw(0,r.a([r.y(0,17),r.ps(1,3)]),r.ge(1)),r.cw(0,r.a([r.y(13,20),r.y(0,17)]),r.ge(1)))),110652:r.q(r.ocq(r.lm("4e04e51a-84fb-4b80-8629-96580ebbe239",r.ge(.8953099)),r.ifp("88107"))),110653:r.q(r.ocq(r.lm("09ca5e9e-7d46-43eb-854e-8adadaa6581e",r.ge(.87440974)),r.ifp("88386"))),110654:r.q(r.ocq(r.lm("2e8f1bee-7220-41ec-ac1f-829d609d08c4",r.ge(.7859814)),r.ifp("32380"))),111622:r.q(r.ocq(r.cw(0,r.a([r.y(0,6),r.ps(13,20)]),r.ge(1)),r.cw(0,r.a([r.y(0,6),r.ps(1,3)]),r.ge(1)))),111623:r.q(r.ocq(r.cw(0,r.a([r.y(0,0),r.ps(13,20)]),r.ge(1)),r.cw(0,r.a([r.y(0,0),r.ps(1,3)]),r.ge(1)))),111624:r.q(r.acq(r.ocq(r.cw(0,r.a([r.ps(0,108),r.ps(1,3)]),r.ge(1)),r.cw(0,r.a([r.ps(0,108),r.ps(11,3)]),r.ge(1))),r.ocq(r.cw(0,r.y(0,0),r.e(0)),r.cw(0,r.y(0,6),r.e(0))))),111654:r.q(r.ocq(r.cw(0,r.a([r.y(0,6),r.ps(1,"rosalia")]),r.ge(1)),r.cw(0,r.a([r.pe(13,"Rosalía"),r.y(0,6)]),r.ge(1)))),111803:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,0)]),r.ge(1))),111804:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,9)]),r.ge(1))),111805:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,7)]),r.ge(1))),111806:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,18)]),r.ge(1))),111809:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,16)]),r.ge(1))),111810:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,31)]),r.ge(1))),111811:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,53)]),r.ge(1))),111812:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,54)]),r.ge(1))),111813:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,30)]),r.ge(1))),111814:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,50)]),r.ge(1))),111815:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,52)]),r.ge(1))),111816:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,10)]),r.ge(1))),111818:r.q(r.cw(0,r.a([r.y(2,22),r.y(0,51)]),r.ge(1))),111844:r.q(r.ocq(r.cw(0,r.a([r.y(0,84),r.ps(13,20)]),r.ge(1)),r.cw(0,r.a([r.y(0,84),r.ps(1,3)]),r.ge(1)))),111845:r.q(r.ocq(r.cw(0,r.a([r.y(0,9),r.ps(13,20)]),r.ge(1)),r.cw(0,r.a([r.y(0,9),r.ps(1,3)]),r.ge(1)))),111846:r.q(r.ocq(r.cw(0,r.a([r.y(0,30),r.ps(13,20)]),r.ge(1)),r.cw(0,r.a([r.y(0,30),r.ps(1,3)]),r.ge(1)))),111849:r.q(r.acq(r.ocq(r.cw(0,r.a([r.ps(0,103),r.ps(1,3)]),r.ge(1)),r.cw(0,r.a([r.ps(0,103),r.ps(11,3)]),r.ge(1))),r.ocq(r.cw(0,r.y(0,9),r.e(0)),r.cw(0,r.y(0,17),r.e(0))))),111850:r.q(r.acq(r.ocq(r.cw(0,r.a([r.ps(0,104),r.ps(1,3)]),r.ge(1)),r.cw(0,r.a([r.ps(0,104),r.ps(11,3)]),r.ge(1))),r.ocq(r.cw(0,r.y(0,30),r.e(0)),r.cw(0,r.y(0,84),r.e(0))))),111851:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,30)]),r.ge(1))),111852:r.q(r.ocq(r.cw(0,r.a([r.y(0,10),r.ps(13,20)]),r.ge(1)),r.cw(0,r.a([r.y(0,10),r.ps(1,3)]),r.ge(1)))),111853:r.q(r.ocq(r.cw(0,r.a([r.ps(13,20),r.ps(0,94)]),r.ge(1)),r.cw(0,r.a([r.ps(0,94),r.ps(1,3)]),r.ge(1)))),111854:r.q(r.acq(r.ocq(r.cw(0,r.a([r.ps(0,101),r.ps(1,3)]),r.ge(1)),r.cw(0,r.a([r.ps(0,101),r.ps(11,3)]),r.ge(1))),r.ocq(r.cw(0,r.y(0,10),r.e(0)),r.cw(0,r.ps(0,94),r.e(0))))),111869:r.q(r.ocq(r.cw(0,r.a([r.ps(13,20),r.ps(0,31)]),r.ge(1)),r.cw(0,r.a([r.ps(0,31),r.ps(1,3)]),r.ge(1)))),111870:r.q(r.ocq(r.cw(0,r.a([r.ps(13,20),r.ps(0,86)]),r.ge(1)),r.cw(0,r.a([r.ps(0,86),r.ps(1,3)]),r.ge(1)))),111872:r.q(r.acq(r.ocq(r.cw(0,r.a([r.ps(0,106),r.ps(1,3)]),r.ge(1)),r.cw(0,r.a([r.ps(0,106),r.ps(11,3)]),r.ge(1))),r.ocq(r.cw(0,r.ps(0,31),r.e(0)),r.cw(0,r.ps(0,86),r.e(0))))),111874:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,31)]),r.ge(1))),111877:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,41)]),r.ge(1))),111887:r.q(r.ocq(r.cw(0,r.a([r.ps(13,20),r.ps(0,41)]),r.ge(1)),r.cw(0,r.a([r.ps(0,41),r.ps(1,3)]),r.ge(1)))),111888:r.q(r.ocq(r.cw(0,r.a([r.ps(13,20),r.ps(0,87)]),r.ge(1)),r.cw(0,r.a([r.ps(0,87),r.ps(1,3)]),r.ge(1)))),111890:r.q(r.acq(r.ocq(r.cw(0,r.a([r.ps(0,107),r.ps(1,3)]),r.ge(1)),r.cw(0,r.a([r.ps(0,107),r.ps(11,3)]),r.ge(1))),r.ocq(r.cw(0,r.ps(0,41),r.e(0)),r.cw(0,r.ps(0,87),r.e(0))))),111898:r.q(r.ocq(r.cw(0,r.a([r.ps(13,20),r.ps(0,85)]),r.ge(1)),r.cw(0,r.a([r.ps(0,85),r.ps(1,3)]),r.ge(1)))),111903:r.q(r.acq(r.ocq(r.cw(0,r.a([r.ps(0,105),r.ps(1,3)]),r.ge(1)),r.cw(0,r.a([r.ps(0,105),r.ps(11,3)]),r.ge(1))),r.cw(0,r.y(0,85),r.e(0)))),111995:r.q(r.cw(0,r.ps(0,"bayseries.co.uk"),r.ge(1))),111998:r.q(r.cw(0,r.ps(0,"margatesummerseries.co.uk"),r.ge(1))),111999:r.q(r.cw(0,r.ps(0,"thelastdancefestival.com"),r.ge(1))),112090:r.q(r.ocq(r.lm("4354d63d-bc6c-456b-a3a8-708a46cdcd3f",r.ge(.7175585)),r.ifp("37975"))),112099:r.q(r.ocq(r.lm("65af7876-1583-4334-8564-70e62831566e",r.ge(.8011453)),r.ifp("111622"))),112100:r.q(r.ocq(r.lm("9c00d77e-0da5-4fc8-8eaa-758c951cf3ca",r.ge(.8178778)),r.ifp("111623"))),112101:r.q(r.ocq(r.lm("4fd870ab-4cc0-4e5e-aa96-024db45161a5",r.ge(.8481691)),r.ifp("111624"))),112108:r.q(r.ocq(r.lm("a97b8575-ad68-46cb-928f-d030a26a036b",r.ge(.90914416)),r.ifp("32306"))),112109:r.q(r.ocq(r.lm("30a2e67b-e028-4066-a458-5e066e68d65c",r.ge(.8992493)),r.ifp("64455"))),112110:r.q(r.ocq(r.lm("0d2198b0-db5f-490f-945f-6eaadaf9282d",r.ge(.8972357)),r.ifp("26745"))),112905:r.q(r.cw(0,r.os(r.s,0,["copenhell.dk",75,150,"graspop.be",152,92,158,56,160,162]),r.ge(1))),112906:r.q(r.cw(0,r.a([r.y(3,116),r.ps(0,44)]),r.ge(1))),112907:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.cw(0,r.a([r.ps(0,44),r.os(r.w,3,[116,"953051"])]),r.ge(1)),r.cw(0,r.a([r.ps(0,2),r.os(r.w,3,[110,113,115])]),r.ge(1))),r.cw(0,r.a([r.y(3,112),r.ps(0,26)]),r.ge(1))),r.cw(0,r.a([r.pe(3,"878111"),r.ps(0,49)]),r.ge(1))),r.cw(0,r.a([r.y(3,109),r.ps(0,29)]),r.ge(1)))),112912:r.q(r.ocq(r.cw(0,r.a([r.ps(13,20),r.ps(0,15)]),r.ge(1)),r.cw(0,r.a([r.ps(0,15),r.ps(1,3)]),r.ge(1)))),112913:r.q(r.ocq(r.cw(0,r.a([r.ps(13,20),r.ps(0,83)]),r.ge(1)),r.cw(0,r.a([r.ps(0,83),r.ps(1,3)]),r.ge(1)))),112914:r.q(r.acq(r.ocq(r.cw(0,r.a([r.ps(0,102),r.ps(1,3)]),r.ge(1)),r.cw(0,r.a([r.ps(0,102),r.ps(11,3)]),r.ge(1))),r.ocq(r.cw(0,r.ps(0,15),r.e(0)),r.cw(0,r.ps(0,83),r.e(0))))),113114:r.q(r.cw(0,r.ps(0,"billieeilish.livenation.co.jp"),r.ge(1))),113116:r.q(r.ocq(r.lm("70507d07-8c42-49cb-9ffe-95fc21653e92",r.ge(.78954625)),r.ifp("100287"))),113117:r.q(r.ocq(r.lm("acdc041c-2667-4b14-a9fc-9e5b1904b325",r.ge(.8622837)),r.ifp("66793"))),113121:r.q(r.cw(0,r.ps(0,"852fes.hk"),r.ge(1))),113686:r.q(r.ocq(r.lm("84b42af4-484a-496d-aac9-9f7f61bae364",r.ge(.970236)),r.ifp("100463"))),113687:r.q(r.ocq(r.lm("f48c4d1e-9a4e-457d-b126-2f5ac599d686",r.ge(.8317181)),r.ifp("100465"))),113688:r.q(r.ocq(r.lm("f60eba07-4cb0-4864-b99d-31837cfa6764",r.ge(.805358)),r.ifp("100472"))),113689:r.q(r.ocq(r.lm("48310925-318d-457f-b56f-280c2611acd0",r.ge(.8557766)),r.ifp("100466"))),113690:r.q(r.ocq(r.lm("4d5cb3b6-21dc-4e53-ad51-666b7e956178",r.ge(.82672536)),r.ifp("100471"))),113691:r.q(r.ocq(r.lm("18bde4b7-135a-400a-9f8c-31a9d059a163",r.ge(.7802602)),r.ifp("100473"))),113692:r.q(r.ocq(r.lm("e0c29eb9-4b6c-45ed-a9ea-b68c8a4e031d",r.ge(.847828)),r.ifp("35769"))),113693:r.q(r.ocq(r.lm("28324e56-3b43-4b12-8e79-6f22615a7330",r.ge(.75645036)),r.ifp("94900"))),113694:r.q(r.ocq(r.lm("5f70ddd3-8c9c-4113-85d1-87c06ab4f892",r.ge(.86579)),r.ifp("67589"))),113695:r.q(r.ocq(r.lm("ab2e4ff9-dc27-4ec5-b6b2-b7c5488d0b9b",r.ge(.7978867)),r.ifp("88370"))),113696:r.q(r.ocq(r.lm("04cbabec-414a-49ff-9c75-f7c2782b02cc",r.ge(.87688184)),r.ifp("92063"))),113697:r.q(r.ocq(r.lm("cbcdafb7-ba52-45d0-bd59-8649b520f6df",r.ge(.90052307)),r.ifp("32309"))),113698:r.q(r.ocq(r.lm("3c690b3e-f126-47ff-964b-a47ba5cecb8b",r.ge(.87693334)),r.ifp("67583"))),113700:r.q(r.ocq(r.lm("2f8e41e5-7ce6-41a5-be00-629bd67cb3a9",r.ge(.859336)),r.ifp("31722"))),113701:r.q(r.ocq(r.lm("97be40c2-302c-4f04-b85b-9a42c73693dc",r.ge(.8251167)),r.ifp("67587"))),113702:r.q(r.ocq(r.lm("0dd5d8fb-1975-4111-93cf-06242663922c",r.ge(.8015673)),r.ifp("67594"))),113703:r.q(r.ocq(r.lm("acb2916d-2b3f-4f35-8e77-47332b1d8a37",r.ge(.8687381)),r.ifp("31723"))),113704:r.q(r.ocq(r.lm("38478360-81cd-48db-95b9-43634cb9ef72",r.ge(.83173877)),r.ifp("67593"))),113705:r.q(r.ocq(r.lm("8bc52d90-9643-40f8-9f14-8eabd9d58cc4",r.ge(.8773794)),r.ifp("32363"))),113706:r.q(r.ocq(r.lm("6ff36584-beb5-4377-af43-0e3444fd511d",r.ge(.80226904)),r.ifp("67596"))),113707:r.q(r.ocq(r.lm("86913f18-d354-4c4b-961c-318163257b83",r.ge(.6646092)),r.ifp("112905"))),113708:r.q(r.ocq(r.lm("4b578388-1e38-4021-b730-66edfff2722d",r.ge(.8784209)),r.ifp("112907"))),113834:r.q(r.cw(0,r.ps(0,"harvestrock.com"),r.ge(1))),113906:r.q(r.cw(0,r.ps(1,"ticketmaster.be/checkout/confirmation"),r.ge(1))),113907:r.q(r.cw(0,r.ps(1,"ticketmaster.ch/checkout/confirmation"),r.ge(1))),113908:r.q(r.cw(0,r.ps(1,"ticketmaster.cz/checkout/confirmation"),r.ge(1))),113909:r.q(r.cw(0,r.ps(1,"ticketmaster.dk/checkout/confirmation"),r.ge(1))),113910:r.q(r.cw(0,r.ps(1,"ticketmaster.it/checkout/confirmation"),r.ge(1))),113911:r.q(r.cw(0,r.ps(1,"ticketmaster.es/checkout/confirmation"),r.ge(1))),113912:r.q(r.cw(0,r.ps(1,"ticketmaster.no/checkout/confirmation"),r.ge(1))),113913:r.q(r.cw(0,r.ps(1,"ticketmaster.nl/checkout/confirmation"),r.ge(1))),113914:r.q(r.cw(0,r.ps(1,"ticketmaster.pl/checkout/confirmation"),r.ge(1))),113915:r.q(r.cw(0,r.ps(1,"ticketmaster.se/checkout/confirmation"),r.ge(1))),114763:r.q(r.ocq(r.lm("1737e72c-36ae-4ca8-8638-1d413d03ab3a",r.ge(.8487464)),r.ifp("42390"))),114764:r.q(r.ocq(r.lm("f844c7af-3a11-4bb7-8608-8130d0362dff",r.ge(.80490446)),r.ifp("104053"))),114765:r.q(r.ocq(r.lm("10757776-a271-43be-871b-26d3a598335c",r.ge(.8681835)),r.ifp("42389"))),114766:r.q(r.ocq(r.lm("dbdc52cf-03ac-467c-9980-50f82fe8ec45",r.ge(.8254226)),r.ifp("104054"))),114767:r.q(r.ocq(r.lm("4a14d009-48c9-4f37-93ad-bc70956a96d8",r.ge(.8781791)),r.ifp("104055"))),114768:r.q(r.ocq(r.lm("d288ca51-2fc5-4a88-b60d-78a8261c6ccc",r.ge(.90380776)),r.ifp("104057"))),114769:r.q(r.ocq(r.lm("9718a751-9a77-4e96-b73c-5b4d9cf94924",r.ge(.8924316)),r.ifp("104056"))),115518:r.q(r.cw(0,r.a([r.pe(3,"2694"),r.ps(0,26)]),r.ge(1))),115593:r.q(r.ocq(r.lm("984895cb-4178-4697-ae9d-c66af7d0b8fd",r.ge(.9021245)),r.ifp("115518"))),116600:r.q(r.cw(0,r.ps(0,"slavasnowshow.com.au"),r.ge(1))),117078:r.q(r.cw(0,r.a([r.y(5,88),r.ps(0,96)]),r.ge(1))),117079:r.q(r.acq(r.cw(0,r.ps(1,168),r.ge(1)),r.ocq(r.ocq(r.cw(0,r.y(5,47),r.ge(1)),r.cw(0,r.y(5,46),r.ge(1))),r.cw(0,r.y(5,88),r.ge(1))))),117422:r.q(r.cw(0,r.ps(0,5),r.ge(1))),117423:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,98)]),r.ge(1))),117424:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/venues/the-triffid-brisbane")]),r.ge(1))),117425:r.q(r.ocq(r.lm("99eed151-6c54-4498-a7a8-bf4f3f5e05e8",r.ge(.8475967)),r.ifp("113834"))),117426:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/venues/the-vanguard")]),r.ge(1))),117427:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/venues/oxford-art-factory-sydney")]),r.ge(1))),117428:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/venues/lion-arts-factory-adelaide")]),r.ge(1))),117429:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/venues/freo-social")]),r.ge(1))),117430:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/venues/brunswick-ballroom-melbourne")]),r.ge(1))),117431:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/venues/nightquarter-sunshine-coast")]),r.ge(1))),117432:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/venues/170-russell-melbourne")]),r.ge(1))),117433:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/venues/the-duke-of-george")]),r.ge(1))),117540:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/event/harvest-rock")]),r.ge(1))),117541:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/event/falls")]),r.ge(1))),117542:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/event/festival-x")]),r.ge(1))),117543:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/event/heaps-good")]),r.ge(1))),117544:r.q(r.cw(0,r.ps(0,43),r.ge(1))),117545:r.q(r.cw(0,r.a([r.ps(0,43),r.ps(1,98)]),r.ge(1))),117547:r.q(r.cw(0,r.a([r.ps(0,43),r.ps(1,"/venues/spark-arena")]),r.ge(1))),117548:r.q(r.cw(0,r.a([r.ps(0,43),r.ps(1,"/venues/the-tuning-fork")]),r.ge(1))),117549:r.q(r.cw(0,r.ps(0,157),r.ge(1))),117550:r.q(r.cw(0,r.a([r.ps(0,157),r.ps(1,98)]),r.ge(1))),117554:r.q(r.ocq(r.lm("0e50bdc5-e751-46a3-912e-ee353898d2cb",r.ge(.9133343)),r.ifp("117423"))),117555:r.q(r.ocq(r.lm("fca577b0-dadc-4f5e-a255-01f8382bfdb2",r.ge(.8504408)),r.ifp("108551"))),117556:r.q(r.ocq(r.lm("4603e509-0282-45cf-b7ad-873b8756dd7d",r.ge(.9465429)),r.ifp("85974"))),117557:r.q(r.ocq(r.lm("1a0f16a3-c28a-4cf4-b77c-67b47934fe96",r.ge(.9359759)),r.ifp("85529"))),117574:r.q(r.cw(0,r.a([r.pe(3,"2868002"),r.ps(0,4)]),r.ge(1))),117579:r.q(r.cw(0,r.a([r.pe(2,"716"),r.y(0,7)]),r.ge(1))),117756:r.q(r.ocq(r.lm("7c755274-95da-4264-a46a-a04f94c26515",r.ge(.87271893)),r.ifp("117544"))),117757:r.q(r.ocq(r.lm("3c600524-9ff6-4a31-b843-815807e9b95d",r.ge(.87359166)),r.ifp("117579"))),118547:r.q(r.ocq(r.lm("964f01a0-63f0-4301-950e-870a3d4abde0",r.ge(.9209788)),r.ifp("117422"))),118548:r.q(r.ocq(r.lm("7e6b59d4-3c1a-41ab-8110-e22efcec6df7",r.ge(.90799105)),r.ifp("117541"))),118549:r.q(r.ocq(r.lm("15ee7e11-1f74-41ee-9632-a62368eb2716",r.ge(.9450387)),r.ifp("117542"))),118550:r.q(r.ocq(r.lm("a017fbba-298e-4ba0-83b6-51591cce27f8",r.ge(.9066928)),r.ifp("117543"))),118551:r.q(r.ocq(r.lm("d693528c-3642-4a46-b431-be7fe7c29709",r.ge(.9015248)),r.ifp("117540"))),118552:r.q(r.ocq(r.lm("8abd5fd8-4605-46b9-8f1c-d1438521cf24",r.ge(.94085026)),r.ifp("117545"))),118553:r.q(r.ocq(r.lm("bec75469-6147-49d8-8512-32a5f90c23e7",r.ge(.7963281)),r.ifp("117548"))),118554:r.q(r.ocq(r.lm("f6f3bc10-2ff9-422b-9f5a-40a453fa61c7",r.ge(.7457764)),r.ifp("117574"))),118555:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/event/spilt-milk")]),r.ge(1))),118758:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,69)]),r.ge(1))),118759:r.q(r.cw(0,r.a([r.ps(0,43),r.ps(1,69)]),r.ge(1))),118817:r.q(r.cw(0,r.a([r.ps(0,5),r.as(r.s,1,["/143071",69])]),r.ge(1))),118819:r.q(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/139258")]),r.ge(1)),r.cw(0,r.a([r.pe(1,"/confirmation/139003"),r.ps(0,5)]),r.ge(1))),r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/139001")]),r.ge(1))),r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/139002")]),r.ge(1))),r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/138033")]),r.ge(1))),r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/139004")]),r.ge(1)))),118820:r.q(r.ocq(r.ocq(r.ocq(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/139334")]),r.ge(1)),r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/138849")]),r.ge(1))),r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/138898")]),r.ge(1))),r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/138890")]),r.ge(1)))),118821:r.q(r.cw(0,r.a([r.ps(0,43),r.ps(1,"/event/rhythm-and-vines")]),r.ge(1))),118822:r.q(r.cw(0,r.a([r.ps(0,5),r.ps(1,"/confirmation/140308")]),r.ge(1))),118854:r.q(r.cw(0,r.a([r.ps(0,43),r.as(r.s,1,["/123507",69])]),r.ge(1))),119204:r.q(r.ocq(r.lm("2bb42904-a8d2-49cb-a294-9e7d66778c4d",r.ge(.867241)),r.ifp("81425"))),119205:r.q(r.cw(0,r.a([r.pe(2,"695"),r.y(0,7)]),r.ge(1))),119211:r.q(r.cw(0,r.a([r.pe(2,"13"),r.y(0,0)]),r.ge(1))),120662:r.q(r.ocq(r.lm("f48e2398-0fce-4d7c-8fc9-fe1591f7a8f3",r.ge(.9681814)),r.ifp("119211"))),120663:r.q(r.ocq(r.lm("23661b43-50be-47a9-af43-b89963e05f09",r.ge(.89931715)),r.ifp("116600"))),121841:r.q(r.ocq(r.lm("0c6b09ef-0969-4042-b43c-8b731d59d9a4",r.ge(.8425172)),r.ifp("111803"))),121842:r.q(r.ocq(r.lm("ef6e1d80-276f-4b3f-b75d-4c61c24bb849",r.ge(.8604419)),r.ifp("59442"))),121843:r.q(r.ocq(r.lm("9ea9f156-feae-479b-bdd8-3152d8ee52b8",r.ge(.9325495)),r.ifp("119205"))),121844:r.q(r.ocq(r.lm("95172e22-0dec-4ca0-9a29-1761fc45fcb9",r.ge(.91142225)),r.ifp("118758"))),121845:r.q(r.ocq(r.lm("d8a137dc-7b25-43c4-aef6-b03364b357f5",r.ge(.94303477)),r.ifp("118759"))),121846:r.q(r.ocq(r.lm("b4435b51-9e66-4d74-88f4-ea7cc8508f80",r.ge(.6967727)),r.ifp("118821"))),121847:r.q(r.cw(0,r.a([r.pe(2,"25"),r.y(0,7)]),r.ge(1))),121848:r.q(r.cw(0,r.a([r.pe(2,"31"),r.y(0,7)]),r.ge(1))),122492:r.q(r.cw(0,r.ps(0,"wirelessfestival.me"),r.ge(1))),122544:r.q(r.cw(0,r.ps(0,"cardiffinternationalarena.co.uk"),r.ge(1))),122822:r.q(r.cw(0,r.a([r.y(0,0),r.y(7,8),r.y(6,1),r.y(8,1)]),r.ge(1))),122961:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(0,6)]),r.ge(1))),122962:r.q(r.cw(0,r.a([r.pe(0,"www.academymusicgroup.com"),r.y(7,8),r.y(6,1),r.y(8,1)]),r.ge(1))),122963:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,128)]),r.ge(1))),122964:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,129)]),r.ge(1))),122965:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,130)]),r.ge(1))),122966:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,131)]),r.ge(1))),122967:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,132)]),r.ge(1))),122968:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,133)]),r.ge(1))),122969:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,134)]),r.ge(1))),122970:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,135)]),r.ge(1))),122971:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,136)]),r.ge(1))),122972:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,137)]),r.ge(1))),122973:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,138)]),r.ge(1))),122974:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,139)]),r.ge(1))),122975:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,140)]),r.ge(1))),122976:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,141)]),r.ge(1))),122977:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,142)]),r.ge(1))),122978:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,143)]),r.ge(1))),122979:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,144)]),r.ge(1))),122980:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,145)]),r.ge(1))),122981:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,146)]),r.ge(1))),122982:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,147)]),r.ge(1))),122983:r.q(r.cw(0,r.a([r.y(7,8),r.y(6,1),r.y(8,1),r.ps(1,148)]),r.ge(1))),122984:r.q(r.ocq(r.lm("f37a9a61-9c6e-4d29-a8ff-e7f71d2e70c8",r.ge(.8915813)),r.ifp("121847"))),122985:r.q(r.ocq(r.lm("385961df-90fe-4e2a-b994-5b9510705e92",r.ge(.7576942)),r.ifp("121848"))),24318:r.q(r.cw(0,r.t,r.ge(1))),24713:r.q(r.cw(0,r.y(5,124),r.ge(1))),26109:r.q(r.cw(0,r.y(5,120),r.ge(1))),26110:r.q(r.cw(0,r.y(5,122),r.ge(1))),26111:r.q(r.cw(0,r.a([r.y(0,6),r.ps(1,95)]),r.ge(1))),26333:r.q(r.cw(0,r.y(5,46),r.ge(1))),26368:r.q(r.cw(0,r.o([r.ps(11,165),r.ps(1,165)]),r.ge(1))),26373:r.q(r.cw(0,r.o([r.ps(0,"www.downloadfestivaljapan.com"),r.ps(11,"download japan"),r.ps(1,"download-japan")]),r.ge(1))),26499:r.q(r.cw(0,r.a([r.ps(0,"www.livenation.asia"),r.ps(1,"livenation.asia")]),r.ge(1))),26745:r.q(r.cw(0,r.a([r.ps(0,100),r.ps(1,100)]),r.ge(1))),27134:r.q(r.acq(r.ocq(r.ocq(r.cw(0,r.a([r.y(0,6),r.ps(1,28)]),r.ge(1)),r.cw(0,r.os(r.s,1,["bluesfest.co.uk",91,149,75,"funkandsoulweekender.com",153,"gunnersville.com","https://smmrsessions.com/","https://www.latitudefestival.com","https://www.readingfestival.com",154,92,156,"lythamfestival.com","onblackheath.com",97,163,164,"wildernessfestival.com",99]),r.ge(1))),r.cw(0,r.a([r.ps(11,118),r.ps(1,28)]),r.ge(1))),r.cw(0,r.y(5,124),r.ge(1)))),27603:r.q(r.cw(0,r.y(0,17),r.ge(1))),28416:r.q(r.acq(r.cw(0,r.ref(2),r.ge(1)),r.cw(0,r.y(5,120),r.ge(1)))),28418:r.q(r.acq(r.cw(0,r.ref(0),r.ge(1)),r.cw(0,r.y(5,122),r.ge(1)))),28419:r.q(r.acq(r.cw(0,r.ref(0),r.ge(1)),r.cw(0,r.y(5,46),r.ge(1)))),28420:r.q(r.acq(r.cw(0,r.ref(0),r.ge(1)),r.cw(0,r.y(5,119),r.ge(1)))),31722:r.q(r.ocq(r.cw(0,r.ps(0,"www.latitudefestival.com"),r.ge(1)),r.cw(0,r.pe(1,"latitudefestival.com"),r.ge(1)))),31723:r.q(r.ocq(r.cw(0,r.ref(1),r.ge(1)),r.cw(0,r.ps(1,56),r.ge(1)))),31912:r.q(r.cw(0,r.ps(0,97),r.ge(1))),32018:r.q(r.ocq(r.cw(0,r.ps(0,127),r.ge(1)),r.cw(0,r.ps(1,127),r.ge(1)))),32072:r.q(r.ocq(r.cw(0,r.ps(0,"ww.wireless-festival.de"),r.ge(1)),r.cw(0,r.ps(1,"www.wireless-festival.de"),r.ge(1)))),32073:r.q(r.ocq(r.cw(0,r.ps(0,159),r.ge(1)),r.cw(0,r.ps(1,159),r.ge(1)))),32074:r.q(r.cw(0,r.ps(1,149),r.ge(1))),32075:r.q(r.cw(0,r.ps(1,153),r.ge(1))),32126:r.q(r.cw(0,r.ps(1,156),r.ge(1))),32127:r.q(r.cw(0,r.ps(1,163),r.ge(1))),32296:r.q(r.cw(0,r.ps(0,"www.bluesfest.co.uk"),r.ge(1))),32298:r.q(r.cw(0,r.ps(0,"www.campbestival.net"),r.ge(1))),32304:r.q(r.cw(0,r.ps(0,"citadelfestival.com"),r.ge(1))),32305:r.q(r.ocq(r.cw(0,r.ps(0,91),r.ge(1)),r.cw(0,r.y(1,91),r.ge(1)))),32306:r.q(r.ocq(r.cw(0,r.ps(0,75),r.ge(1)),r.cw(0,r.ps(1,75),r.ge(1)))),32307:r.q(r.cw(0,r.ps(0,"www.greenwichmusictime.co.uk"),r.ge(1))),32308:r.q(r.cw(0,r.pe(0,"www.funkandsoulweekender.com"),r.ge(1))),32309:r.q(r.cw(0,r.ps(0,154),r.ge(1))),32310:r.q(r.cw(0,r.ps(0,"www.gunnersville.com"),r.ge(1))),32311:r.q(r.cw(0,r.ps(0,"www.onblackheath.com"),r.ge(1))),32312:r.q(r.cw(0,r.ps(0,"www.somersethouse.org.uk/whats-on/somerset-house-summer-series"),r.ge(1))),32350:r.q(r.cw(0,r.ps(0,"www.lythamfestival.com"),r.ge(1))),32355:r.q(r.cw(0,r.ps(0,"www.york-festival.com"),r.ge(1))),32360:r.q(r.cw(0,r.ps(0,"www.thewarehouseproject.com"),r.ge(1))),32361:r.q(r.cw(0,r.ps(0,164),r.ge(1))),32363:r.q(r.cw(0,r.ps(0,"www.wildernessfestival.com"),r.ge(1))),32364:r.q(r.cw(0,r.ps(0,"www.smmrsessions.com"),r.ge(1))),32365:r.q(r.cw(0,r.ps(0,"downtherabbithole.nl"),r.ge(1))),32367:r.q(r.cw(0,r.ps(0,"lowlands.nl"),r.ge(1))),32370:r.q(r.cw(0,r.ps(0,"www.northseajazz.com"),r.ge(1))),32372:r.q(r.cw(0,r.ps(0,158),r.ge(1))),32380:r.q(r.cw(0,r.ps(0,"lollapaloozade.com"),r.ge(1))),32384:r.q(r.acq(r.ocq(r.cw(0,r.ps(11,"Festivaler"),r.ge(1)),r.cw(0,r.ps(11,118),r.ge(1))),r.cw(0,r.y(5,123),r.ge(1)))),32385:r.q(r.acq(r.cw(0,r.ref(2),r.ge(1)),r.cw(0,r.y(5,121),r.ge(1)))),32404:r.q(r.cw(0,r.ps(0,"motorpointarenacardiff.co.uk"),r.ge(1))),32406:r.q(r.cw(0,r.ps(0,"bordgaisenergytheatre.ie"),r.ge(1))),32408:r.q(r.cw(0,r.ps(0,"3arena.ie"),r.ge(1))),32410:r.q(r.cw(0,r.ps(0,"olympia.london"),r.ge(1))),32411:r.q(r.cw(0,r.ps(0,"www.kingtuts.co.uk"),r.ge(1))),32412:r.q(r.cw(0,r.ps(0,"www.scarboroughopenairtheatre.com"),r.ge(1))),32413:r.q(r.cw(0,r.ps(0,"flydsaarena.co.uk"),r.ge(1))),32414:r.q(r.cw(0,r.ps(0,"gaietytheatre.ie"),r.ge(1))),32557:r.q(r.cw(0,r.y(5,119),r.ge(1))),32761:r.q(r.cw(0,r.y(5,47),r.ge(1))),33219:r.q(r.cw(0,r.a([r.ps(0,93),r.ps(11,55)]),r.ge(1))),33220:r.q(r.cw(0,r.a([r.y(0,6),r.ps(11,55)]),r.ge(1))),33221:r.q(r.cw(0,r.a([r.y(0,167),r.ps(11,55)]),r.ge(1))),33222:r.q(r.cw(0,r.a([r.y(0,17),r.ps(11,55)]),r.ge(1))),33223:r.q(r.cw(0,r.a([r.y(0,23),r.ps(11,55)]),r.ge(1))),35542:r.q(r.cw(0,r.pe(0,"www.livenation.se"),r.ge(1))),35543:r.q(r.cw(0,r.pe(0,"www.livenation.es"),r.ge(1))),35767:r.q(r.cw(0,r.y(0,27),r.ge(1))),35768:r.q(r.cw(0,r.pe(0,"www.livenation.hk"),r.ge(1))),35769:r.q(r.cw(0,r.pe(0,"www.livenation.sg"),r.ge(1))),35770:r.q(r.cw(0,r.pe(0,"www.livenation.com.tw"),r.ge(1))),35771:r.q(r.cw(0,r.pe(0,"www.livenation.co.jp"),r.ge(1))),35772:r.q(r.cw(0,r.pe(0,"www.livenation.kr"),r.ge(1))),37975:r.q(r.cw(0,r.pe(0,"mainsquarefestival.fr"),r.ge(1))),40825:r.q(r.cw(0,r.ps(1,"https://www.livenation.co.uk/utilitalivefromthedrivein"),r.ge(1))),42111:r.q(r.ocq(r.cw(0,r.ps(1,"mojo.nl/tours/larger-than-live/"),r.ge(1)),r.cw(0,r.a([r.pe(0,"www.mojo.nl"),r.ps(1,"larger-than-live")]),r.ge(1)))),42113:r.q(r.cw(0,r.pe(0,"largerthan.live"),r.ge(1))),42389:r.q(r.ocq(r.cw(0,r.pe(0,"www.longitude.ie"),r.ge(1)),r.cw(0,r.ps(1,"longitude"),r.ge(1)))),42390:r.q(r.ocq(r.cw(0,r.pe(0,"www.electricpicnic.ie"),r.ge(1)),r.cw(0,r.ps(1,"electric-picnic"),r.ge(1)))),42395:r.q(r.ocq(r.cw(0,r.pe(0,"amexliput.fi"),r.ge(1)),r.cw(0,r.pe(1,"amexliput"),r.ge(1)))),42397:r.q(r.ocq(r.cw(0,r.pe(0,"americanexpresstickets.se"),r.ge(1)),r.cw(0,r.ps(1,"americanexpresstickets"),r.ge(1)))),46832:r.q(r.ocq(r.ocq(r.ocq(r.itp("liveramp_MeritDirect","1002713876",!1,"46832"),r.itp("liveramp_MeritDirect","1002713876",!1,"46832")),r.itp("eyeota","35435",!1,"46832")),r.itp("liveramp_Experian","1004256479",!1,"46832"))),46833:r.q(r.ocq(r.ocq(r.itp("liveramp_Experian","1004256489",!1,"46833"),r.itp("liveramp_MeritDirect","1002713866",!1,"46833")),r.itp("eyeota","6681",!1,"46833"))),47190:r.q(r.cw(0,r.o([r.ps(11,169),r.ps(1,169)]),r.ge(1))),47191:r.q(r.cw(0,r.o([r.ps(11,161),r.ps(1,161)]),r.ge(1))),47192:r.q(r.cw(0,r.o([r.ps(11,151),r.ps(1,151)]),r.ge(1))),49022:r.q(r.acq(r.cw(0,r.ps(1,"guns-n-roses-tickets"),r.ge(1)),r.cw(0,r.y(0,6),r.ge(1)))),51062:r.q(r.cw(0,r.a([r.ps(0,155),r.ps(1,155)]),r.ge(1))),52236:r.q(r.cw(0,r.y(0,166),r.ge(1))),52419:r.q(r.cw(0,r.ps(1,131),r.ge(1))),54300:r.q(r.acq(r.cw(0,r.ps(1,168),r.ge(1)),r.ocq(r.cw(0,r.y(5,47),r.ge(1)),r.cw(0,r.y(5,46),r.ge(1))))),54402:r.q(r.cw(0,r.a([r.y(0,0),r.ps(1,2)]),r.ge(1))),54875:r.q(r.acq(r.ocq(r.cw(0,r.ref(1),r.ge(1)),r.cw(0,r.ps(1,56),r.ge(1))),r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("liveramp_StatSocial","1006916721",!1,"54875"),r.itp("liveramp_Yougov","1006995671",!1,"54875")),r.itp("liveramp_Yougov","1006995661",!1,"54875")),r.itp("liveramp_StatSocial","1006911921",!1,"54875")),r.itp("eyeota","39863",!1,"54875")),r.itp("liveramp_Bombora","1005388659",!1,"54875")),r.itp("liveramp_ShareThis","1004108209",!1,"54875")),r.itp("liveramp_ShareThis","1004107639",!1,"54875")))),54880:r.q(r.acq(r.ocq(r.cw(0,r.ps(0,100),r.ge(1)),r.cw(0,r.ps(1,92),r.ge(1))),r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("liveramp_StatSocial","1006916721",!1,"54880"),r.itp("liveramp_Yougov","1006995671",!1,"54880")),r.itp("liveramp_Yougov","1006995661",!1,"54880")),r.itp("liveramp_StatSocial","1006911921",!1,"54880")),r.itp("eyeota","39863",!1,"54880")),r.itp("liveramp_Bombora","1005388659",!1,"54880")),r.itp("liveramp_ShareThis","1004108209",!1,"54880")),r.itp("liveramp_ShareThis","1004107639",!1,"54880")))),54881:r.q(r.acq(r.ocq(r.cw(0,r.ps(0,"www.wirelessfestival.co.uk"),r.ge(1)),r.cw(0,r.ps(1,99),r.ge(1))),r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("liveramp_StatSocial","1006916721",!1,"54881"),r.itp("liveramp_Yougov","1006995671",!1,"54881")),r.itp("liveramp_Yougov","1006995661",!1,"54881")),r.itp("liveramp_StatSocial","1006911921",!1,"54881")),r.itp("eyeota","39863",!1,"54881")),r.itp("liveramp_Bombora","1005388659",!1,"54881")),r.itp("liveramp_ShareThis","1004108209",!1,"54881")),r.itp("liveramp_ShareThis","1004107639",!1,"54881")))),54882:r.q(r.acq(r.cw(0,r.ps(0,97),r.ge(1)),r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.ocq(r.itp("liveramp_StatSocial","1006916721",!1,"54882"),r.itp("liveramp_Yougov","1006995671",!1,"54882")),r.itp("liveramp_Yougov","1006995661",!1,"54882")),r.itp("liveramp_StatSocial","1006911921",!1,"54882")),r.itp("eyeota","39863",!1,"54882")),r.itp("liveramp_Bombora","1005388659",!1,"54882")),r.itp("liveramp_ShareThis","1004108209",!1,"54882")),r.itp("liveramp_ShareThis","1004107639",!1,"54882")))),58365:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,0),r.ps(1,2)]),r.ge(1))),58367:r.q(r.ocq(r.lm("9a8389e8-a4a8-48db-b5e7-a50061998644",r.ge(.36419788)),r.ifp("49022"))),59438:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,0),r.ps(1,2)]),r.ge(1))),59442:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,0),r.ps(1,2)]),r.ge(1))),59443:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,0),r.ps(1,2)]),r.ge(1))),61267:r.q(r.cw(0,r.a([r.pe(13,"Lady Gaga"),r.pe(16,"Lady Gaga: The Chromatica Ball"),r.y(0,0),r.os(r.s,["type"],["tm_uk: intent-to-purchase: nomap","tm_uk: intent-to-purchase: staticmap"])]),r.ge(3))),61271:r.q(r.cw("FormSubmission",r.a([r.y(0,0),r.pe(11,"Genesis Tickets | 2020-21 Tour & Concert Dates"),r.pe(19,"https://www.ticketmaster.co.uk/search")]),r.ge(1))),63038:r.q(r.cw(0,r.pe(5,"Italy"),r.ge(1))),63039:r.q(r.cw(0,r.pe(5,"Spain"),r.ge(1))),63040:r.q(r.cw(0,r.ps(0,"palavelatorino.it"),r.ge(1))),63042:r.q(r.cw(0,r.ps(0,"laserpark.it"),r.ge(1))),63118:r.q(r.cw(0,r.ps(0,"firenzerocks.it"),r.ge(1))),63189:r.q(r.cw(0,r.a([r.ps(0,93),r.os(r.s,1,["5-seconds-of-summer","dua-lipa","ellie-goulding","harry-styles","little-mix","tove-lo","vanessa-mai","zara-larsson"])]),r.ge(1))),63190:r.q(r.cw(0,r.a([r.ps(0,93),r.ps(1,"zara-larsson-tickets")]),r.ge(1))),63526:r.q(r.cw(0,r.os(r.w,0,["nl.livenation.be","fr.livenation.be"]),r.ge(1))),63527:r.q(r.cw(0,r.y(0,83),r.ge(1))),63528:r.q(r.cw(0,r.y(0,84),r.ge(1))),63529:r.q(r.cw(0,r.pe(0,"www.livenation.ee"),r.ge(1))),63530:r.q(r.cw(0,r.pe(0,"www.livenation.fi"),r.ge(1))),63531:r.q(r.cw(0,r.y(0,167),r.ge(1))),63533:r.q(r.cw(0,r.y(0,85),r.ge(1))),63534:r.q(r.cw(0,r.pe(0,"www.livenation.co.il"),r.ge(1))),63535:r.q(r.cw(0,r.pe(0,"www.livenation.it"),r.ge(1))),63536:r.q(r.cw(0,r.pe(0,"www.livenation.lt"),r.ge(1))),63537:r.q(r.cw(0,r.pe(0,"www.livenation.me"),r.ge(1))),63538:r.q(r.cw(0,r.y(0,86),r.ge(1))),63539:r.q(r.cw(0,r.pe(0,"www.livenation.no"),r.ge(1))),63540:r.q(r.cw(0,r.y(0,87),r.ge(1))),63541:r.q(r.cw(0,r.pe(0,"www.bigconcerts.co.za"),r.ge(1))),63542:r.q(r.cw(0,r.pe(0,"www.livenation.co.th"),r.ge(1))),64136:r.q(r.cw(0,r.a([r.ps(14,"barclaycarduk"),r.ps(0,2)]),r.ge(1))),64455:r.q(r.cw(0,r.a([r.ps(3,115),r.ps(0,2)]),r.ge(1))),64481:r.q(r.cw(0,r.ps(0,"degroteschijn.nl"),r.ge(1))),64483:r.q(r.cw(0,r.ps(0,"festivalrepublic.com"),r.ge(1))),66793:r.q(r.cw(0,r.a([r.ps(3,70),r.ps(0,2)]),r.ge(1))),67583:r.q(r.cw(0,r.a([r.ps(3,"28397"),r.ps(0,2)]),r.ge(1))),67585:r.q(r.cw(0,r.a([r.ps(3,"5220045"),r.ps(0,2)]),r.ge(1))),67587:r.q(r.cw(0,r.a([r.ps(3,"773802"),r.ps(0,2)]),r.ge(1))),67589:r.q(r.cw(0,r.a([r.ps(3,"1617098"),r.ps(0,2)]),r.ge(1))),67591:r.q(r.cw(0,r.a([r.ps(3,"29232"),r.ps(0,2)]),r.ge(1))),67593:r.q(r.cw(0,r.a([r.ps(3,110),r.ps(0,2)]),r.ge(1))),67594:r.q(r.cw(0,r.a([r.ps(3,113),r.ps(0,2)]),r.ge(1))),67595:r.q(r.cw(0,r.a([r.ps(3,"1061343"),r.ps(0,2)]),r.ge(1))),67596:r.q(r.cw(0,r.a([r.ps(3,"1562166"),r.ps(0,2)]),r.ge(1))),69186:r.q(r.cw(0,r.y(0,23),r.ge(1))),69462:r.q(r.cw(0,r.a([r.y(0,0),r.ps(3,"711587")]),r.ge(1))),69463:r.q(r.cw(0,r.a([r.y(0,6),r.ps(1,"westlife")]),r.ge(1))),69466:r.q(r.cw(0,r.a([r.y(0,0),r.ps(3,"734977")]),r.ge(1))),69468:r.q(r.cw(0,r.a([r.y(0,6),r.ps(1,"eagles")]),r.ge(1))),69478:r.q(r.cw(0,r.a([r.y(0,166),r.ps(1,"onestowatch")]),r.ge(1))),70044:r.q(r.cw(0,r.a([r.y(2,40),r.y(0,0)]),r.ge(1))),70049:r.q(r.cw(0,r.a([r.y(2,34),r.y(0,0)]),r.ge(1))),70051:r.q(r.cw(0,r.a([r.y(2,33),r.y(0,0)]),r.ge(1))),70052:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,0)]),r.ge(1))),70054:r.q(r.cw(0,r.a([r.y(2,36),r.y(0,0)]),r.ge(1))),70055:r.q(r.cw(0,r.a([r.y(2,42),r.y(0,0)]),r.ge(1))),70056:r.q(r.cw(0,r.a([r.y(2,35),r.y(0,0)]),r.ge(1))),70057:r.q(r.cw(0,r.a([r.y(2,32),r.y(0,0)]),r.ge(1))),70058:r.q(r.cw(0,r.a([r.y(2,39),r.y(0,0)]),r.ge(1))),70059:r.q(r.cw(0,r.a([r.y(2,37),r.y(0,0)]),r.ge(1))),70060:r.q(r.cw(0,r.a([r.y(2,38),r.y(0,0)]),r.ge(1))),71267:r.q(r.cw(0,r.ps(0,"pinkpopsouvenirs.nl"),r.ge(1))),72657:r.q(r.cw(0,r.a([r.ps(0,95),r.ps(1,126)]),r.ge(1))),72658:r.q(r.ocq(r.cw(0,r.a([r.pe(3,"5348963"),r.ps(0,2)]),r.ge(1)),r.cw(0,r.ps(17,126),r.ge(1)))),73522:r.q(r.cw(0,r.a([r.y(0,17),r.ps(1,"paypalpriotickets")]),r.ge(1))),73540:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,77)]),r.ge(1))),73541:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,80)]),r.ge(1))),73542:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,72)]),r.ge(1))),73543:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,82)]),r.ge(1))),73607:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,79)]),r.ge(1))),73608:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,78)]),r.ge(1))),73609:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,81)]),r.ge(1))),73610:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,"reggae")]),r.ge(1))),73611:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,"latin")]),r.ge(1))),73612:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,"jazz-and-blues")]),r.ge(1))),73613:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,76)]),r.ge(1))),73614:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,"country")]),r.ge(1))),73615:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,74)]),r.ge(1))),73616:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,73)]),r.ge(1))),73617:r.q(r.cw(0,r.a([r.y(0,6),r.ps(9,"afrobeats")]),r.ge(1))),73620:r.q(r.cw(0,r.a([r.y(0,17),r.os(r.s,13,["ariana grande","billie eilish","clairo","conan gray","doja cat","dua lipa","halsey","harry styles","khalid","king princess","lana del rey","lorde","madison beer","olivia rodrigo","rex orange county","taylor swift","twenty one pilots","twenty øne piløts"])]),r.ge(1))),73623:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,80)]),r.ge(1))),73625:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,82)]),r.ge(1))),73626:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,77)]),r.ge(1))),73627:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,78)]),r.ge(1))),73632:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,72)]),r.ge(1))),73634:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,74)]),r.ge(1))),73635:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,79)]),r.ge(1))),73636:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,81)]),r.ge(1))),73638:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,76)]),r.ge(1))),73640:r.q(r.cw(0,r.a([r.y(0,17),r.ps(9,73)]),r.ge(1))),73816:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,80)]),r.ge(1))),73820:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,82)]),r.ge(1))),73821:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,77)]),r.ge(1))),73822:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,78)]),r.ge(1))),73823:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,72)]),r.ge(1))),73824:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,74)]),r.ge(1))),73827:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,79)]),r.ge(1))),73829:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,81)]),r.ge(1))),73831:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,76)]),r.ge(1))),73834:r.q(r.cw(0,r.a([r.y(0,23),r.ps(9,73)]),r.ge(1))),73841:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,80)]),r.ge(1))),73842:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,82)]),r.ge(1))),73843:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,77)]),r.ge(1))),73844:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,78)]),r.ge(1))),73845:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,72)]),r.ge(1))),73846:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,74)]),r.ge(1))),73847:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,79)]),r.ge(1))),73848:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,81)]),r.ge(1))),73849:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,76)]),r.ge(1))),73850:r.q(r.cw(0,r.a([r.y(0,27),r.ps(9,73)]),r.ge(1))),74324:r.q(r.cw(0,r.ps(0,"grootstefeestcafe.nl"),r.ge(1))),74366:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,90)]),r.ge(1))),74376:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,89)]),r.ge(1))),74377:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Glasgow")]),r.ge(1))),74378:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Birmingham")]),r.ge(1))),74379:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Leeds")]),r.ge(1))),74380:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Cardiff")]),r.ge(1))),74381:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Newcastle Upon Tyne")]),r.ge(1))),74382:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Liverpool")]),r.ge(1))),74383:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Belfast")]),r.ge(1))),74385:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Edinburgh")]),r.ge(1))),74386:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Sheffield")]),r.ge(1))),74387:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Nottingham")]),r.ge(1))),74388:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Bristol")]),r.ge(1))),74389:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Aberdeen")]),r.ge(1))),74390:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Brighton")]),r.ge(1))),74391:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,117)]),r.ge(1))),74392:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Bournemouth")]),r.ge(1))),74393:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Leicester")]),r.ge(1))),74394:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Southampton")]),r.ge(1))),74395:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Blackpool")]),r.ge(1))),74396:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"York")]),r.ge(1))),74397:r.q(r.cw(0,r.a([r.y(0,0),r.ps(12,"Hull")]),r.ge(1))),74825:r.q(r.cw(0,r.pe(0,"www.copenhell.dk"),r.ge(1))),74826:r.q(r.cw(0,r.pe(0,"www.wayoutwest.se"),r.ge(1))),74828:r.q(r.cw(0,r.pe(0,"www.graspop.be"),r.ge(1))),74829:r.q(r.cw(0,r.pe(0,"www.metropolismusic.com"),r.ge(1))),74830:r.q(r.cw(0,r.pe(0,"www.tonsofrock.no"),r.ge(1))),74831:r.q(r.cw(0,r.ps(0,"dcodefest.com"),r.ge(1))),74833:r.q(r.cw(0,r.ps(0,"findings.no"),r.ge(1))),74834:r.q(r.cw(0,r.ps(0,"bcnbeachfestival.com"),r.ge(1))),74835:r.q(r.cw(0,r.ps(0,"olympia.ie"),r.ge(1))),74836:r.q(r.cw(0,r.ps(0,"milanosummerfestival.it"),r.ge(1))),74837:r.q(r.cw(0,r.ps(0,"summerburst.se"),r.ge(1))),74855:r.q(r.cw(0,r.ps(0,"northwestwalls.be"),r.ge(1))),74856:r.q(r.cw(0,r.ps(0,"curacaonorthseajazz.com"),r.ge(1))),74857:r.q(r.cw(0,r.ps(0,"milanorocks.it"),r.ge(1))),74858:r.q(r.cw(0,r.ps(0,162),r.ge(1))),75149:r.q(r.cw(0,r.a([r.y(12,90),r.z(15,90),r.ps(0,2),r.nt(r.os(r.s,20,["bolton","bury","manchester","oldham","rochdale","salford","stockport","tameside","trafford","wigan"]))]),r.ge(1))),75151:r.q(r.cw(0,r.a([r.y(12,89),r.z(15,89),r.ps(0,2),r.nt(r.os(r.s,20,["barking and dagenham","barnet","bexley","brent","bromley","camden","city of london","city of westminster","croydon","ealing","enfield","greenwich","hackney","hammersmith and fulham","haringey","harrow","havering","hillingdon","hounslow","islington","kensington and chelsea","kingston","lambeth","lewisham","merton","newham","redbridge","richmond","southwark","sutton","tower hamlets","waltham forest","wandsworth"]))]),r.ge(1))),75199:r.q(r.cw(0,r.ps(0,"splendourxr.com"),r.ge(1))),75469:r.q(r.cw(0,r.ps(0,"idays.it"),r.ge(1))),76174:r.q(r.cw(0,r.ps(0,"summerisback.co.uk"),r.ge(1))),76363:r.q(r.cw(0,r.ps(0,"splendourinthecity.com"),r.ge(1))),76450:r.q(r.cw(0,r.ps(0,"wonderhall.co.uk"),r.ge(1))),77168:r.q(r.cw(0,r.ps(0,"lythamproms.co.uk"),r.ge(1))),77169:r.q(r.cw(0,r.ps(0,"cuffeandtaylor.com"),r.ge(1))),77412:r.q(r.cw(0,r.ps(0,"palaalpitour.it"),r.ge(1))),77661:r.q(r.cw(0,r.ps(0,"royalarena.dk"),r.ge(1))),77662:r.q(r.cw(0,r.ps(0,"comedystopcopenhagen.dk"),r.ge(1))),77728:r.q(r.cw(0,r.ps(0,"scarboroughopenairtheatre.com"),r.ge(1))),79422:r.q(r.cw(0,r.ps(0,"cream.co.uk"),r.ge(1))),79569:r.q(r.cw(0,r.ps(0,"playingtimes.splendourxr.com"),r.ge(1))),79582:r.q(r.cw(0,r.a([r.y(0,7),r.ps(1,4)]),r.ge(1))),79583:r.q(r.cw(0,r.a([r.y(0,18),r.ps(1,48)]),r.ge(1))),79584:r.q(r.cw(0,r.a([r.y(0,16),r.ps(1,25)]),r.ge(1))),80517:r.q(r.cw(0,r.ps(0,150),r.ge(1))),80547:r.q(r.cw(0,r.ps(0,"ilovetechnoeurope.com"),r.ge(1))),81095:r.q(r.cw(0,r.ps(0,"stadsparklive.nl"),r.ge(1))),81196:r.q(r.cw(0,r.ps(0,"creamfieldschelmsford.com"),r.ge(1))),81326:r.q(r.cw(0,r.ps(0,"ziggodomememberclub.nl"),r.ge(1))),81403:r.q(r.cw(0,r.ps(0,"parkpop.nl"),r.ge(1))),81424:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,7),r.ps(1,4)]),r.ge(1))),81425:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,7),r.ps(1,4)]),r.ge(1))),81426:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,7),r.ps(1,4)]),r.ge(1))),81427:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,7),r.ps(1,4)]),r.ge(1))),81428:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,18),r.ps(1,48)]),r.ge(1))),81429:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,18),r.ps(1,48)]),r.ge(1))),81430:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,18),r.ps(1,48)]),r.ge(1))),81431:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,18),r.ps(1,48)]),r.ge(1))),81432:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,16),r.ps(1,25)]),r.ge(1))),81433:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,16),r.ps(1,25)]),r.ge(1))),81434:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,16),r.ps(1,25)]),r.ge(1))),81435:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,16),r.ps(1,25)]),r.ge(1))),81443:r.q(r.cw(0,r.a([r.y(2,40),r.y(0,7)]),r.ge(1))),81444:r.q(r.cw(0,r.a([r.y(2,34),r.y(0,7)]),r.ge(1))),81445:r.q(r.cw(0,r.a([r.y(2,33),r.y(0,7)]),r.ge(1))),81446:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,7)]),r.ge(1))),81447:r.q(r.cw(0,r.a([r.y(2,36),r.y(0,7)]),r.ge(1))),81448:r.q(r.cw(0,r.a([r.y(2,42),r.y(0,7)]),r.ge(1))),81450:r.q(r.cw(0,r.a([r.y(2,35),r.y(0,7)]),r.ge(1))),81451:r.q(r.cw(0,r.a([r.y(2,32),r.y(0,7)]),r.ge(1))),81452:r.q(r.cw(0,r.a([r.y(2,39),r.y(0,7)]),r.ge(1))),81453:r.q(r.cw(0,r.a([r.y(2,37),r.y(0,7)]),r.ge(1))),81454:r.q(r.cw(0,r.a([r.y(2,38),r.y(0,7)]),r.ge(1))),81458:r.q(r.cw(0,r.a([r.y(2,40),r.y(0,18)]),r.ge(1))),81459:r.q(r.cw(0,r.a([r.y(2,34),r.y(0,18)]),r.ge(1))),81460:r.q(r.cw(0,r.a([r.y(2,33),r.y(0,18)]),r.ge(1))),81461:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,18)]),r.ge(1))),81462:r.q(r.cw(0,r.a([r.y(2,36),r.y(0,18)]),r.ge(1))),81464:r.q(r.cw(0,r.a([r.y(2,42),r.y(0,18)]),r.ge(1))),81465:r.q(r.cw(0,r.a([r.y(2,35),r.y(0,18)]),r.ge(1))),81466:r.q(r.cw(0,r.a([r.y(2,32),r.y(0,18)]),r.ge(1))),81467:r.q(r.cw(0,r.a([r.y(2,39),r.y(0,18)]),r.ge(1))),81468:r.q(r.cw(0,r.a([r.y(2,37),r.y(0,18)]),r.ge(1))),81469:r.q(r.cw(0,r.a([r.y(2,38),r.y(0,18)]),r.ge(1))),81470:r.q(r.cw(0,r.a([r.y(2,40),r.y(0,16)]),r.ge(1))),81471:r.q(r.cw(0,r.a([r.y(2,34),r.y(0,16)]),r.ge(1))),81472:r.q(r.cw(0,r.a([r.y(2,33),r.y(0,16)]),r.ge(1))),81473:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,16)]),r.ge(1))),81474:r.q(r.cw(0,r.a([r.y(2,36),r.y(0,16)]),r.ge(1))),81475:r.q(r.cw(0,r.a([r.y(2,42),r.y(0,16)]),r.ge(1))),81476:r.q(r.cw(0,r.a([r.y(2,35),r.y(0,16)]),r.ge(1))),81477:r.q(r.cw(0,r.a([r.y(2,32),r.y(0,16)]),r.ge(1))),81478:r.q(r.cw(0,r.a([r.y(2,39),r.y(0,16)]),r.ge(1))),81479:r.q(r.cw(0,r.a([r.y(2,37),r.y(0,16)]),r.ge(1))),81480:r.q(r.cw(0,r.a([r.y(2,38),r.y(0,16)]),r.ge(1))),81527:r.q(r.cw(0,r.ps(0,"rhythmandvines.co.nz"),r.ge(1))),81760:r.q(r.ocq(r.lm("5b212892-2add-4c41-a422-df8447c8a0dc",r.ge(.5)),r.ifp("75199"))),81767:r.q(r.acq(r.cw(0,r.ref(0),r.ge(1)),r.cw(0,r.y(5,47),r.ge(1)))),81848:r.q(r.cw(0,r.ps(0,"showsec.co.uk"),r.ge(1))),81881:r.q(r.cw(0,r.ps(0,"parkpopthehague.nl"),r.ge(1))),81882:r.q(r.cw(0,r.ps(0,"parkpopdowntown.nl"),r.ge(1))),81905:r.q(r.cw(0,r.a([r.y(10,114),r.y(0,0)]),r.ge(1))),81906:r.q(r.cw(0,r.ps(0,"rabbitresort.nl"),r.ge(1))),81982:r.q(r.cw(0,r.ps(0,"afaslive.nl"),r.ge(1))),82014:r.q(r.cw(0,r.ps(0,"ziggodome.nl"),r.ge(1))),82044:r.q(r.cw(0,r.ps(0,"luger.se"),r.ge(1))),82076:r.q(r.cw(0,r.a([r.y(10,114),r.os(r.s,["article","eventID"],["370057269a87353c","37005732a6175705","3700573bff46847d","37005758015db179","37005764980184a4","37005764dc20b368","3700576ff9a750a8","37005773b3184dba","3700577da0a3488b","37005782f008ac04","37005783b0f66760","37005783b0f76769","37005783b0f86770","37005789c67b90ac","370058438fcb30a6","3700584ac686966e","3700585ae8349699","3700585ae83996a0","37005864f6fe771b","370058f7d1f64858","370058fd958a19d1","37005913e4161f81","3700592e8cd70921","37005942f3d00c72","37005945bbf10948","37005957f63f4c19","37005970854d32b5","370059709d4c3311","37005a70d3a01b64","37005a76df9030f5","37005a7d1e624821","37005a97aaf84fad","37005aa4c5430e88","37005aa7b63a14ea","37005aaead5e679c","37005ab4b51c61e8","37005ab9b7a45a7b","37005abbb96f583d","37005acbdb2557b0","37005ae1912e4e63","37005aec8f32189a","37005af0c889394c","37005af5ba616f74","37005afba8ac7891"])]),r.ge(1))),82081:r.q(r.cw(0,r.ps(0,"gllamcamp.nl"),r.ge(1))),82311:r.q(r.cw(0,r.ps(0,"rebalancemusic.com"),r.ge(1))),83139:r.q(r.cw(0,r.ps(0,"vipnation.eu"),r.ge(1))),83140:r.q(r.cw(0,r.ps(0,"livenationexperiential.com"),r.ge(1))),83603:r.q(r.cw(0,r.ps(0,"heartlandfestival.dk"),r.ge(1))),83688:r.q(r.cw(0,r.ps(0,"blockfest.fi"),r.ge(1))),83890:r.q(r.cw(0,r.a([r.pe(3,"5255123"),r.ps(0,2)]),r.ge(1))),83961:r.q(r.ocq(r.lm("25d61218-68c0-4a67-b566-673472943fe8",r.ge(.5)),r.ifp("83890"))),84090:r.q(r.cw(0,r.ps(0,"dfconcertsandevents.com"),r.ge(1))),84174:r.q(r.cw(0,r.ps(0,"gigsinscotland.com"),r.ge(1))),84209:r.q(r.cw(0,r.a([r.y(0,0),r.os(r.s,17,["cinema","escape","live stream","online event","streaming"])]),r.ge(1))),84369:r.q(r.ocq(r.lm("a09ab5d2-befa-4592-8d42-ab32c7484393",r.ge(.5)),r.ifp("84209"))),84430:r.q(r.cw(0,r.ps(0,"palaistheatre.com.au"),r.ge(1))),84452:r.q(r.cw(0,r.ps(0,160),r.ge(1))),84472:r.q(r.cw(0,r.ps(0,"werchterboutique.be"),r.ge(1))),84474:r.q(r.cw(0,r.ps(0,"twclassic.be"),r.ge(1))),84609:r.q(r.cw(0,r.ps(0,"madcoolfestival.es"),r.ge(1))),84639:r.q(r.cw(0,r.ps(0,"openair-frauenfeld.ch"),r.ge(1))),84805:r.q(r.cw(0,r.ps(0,"aresessions.se"),r.ge(1))),84810:r.q(r.cw(0,r.ps(0,"bokaartist.livenation.se"),r.ge(1))),84922:r.q(r.cw(0,r.ps(0,"comedystophelsinki.fi"),r.ge(1))),84923:r.q(r.cw(0,r.ps(0,"comedystopparis.fr"),r.ge(1))),84924:r.q(r.cw(0,r.ps(0,"comedystophaarlem.nl"),r.ge(1))),84925:r.q(r.cw(0,r.ps(0,"comedystoposlo.no"),r.ge(1))),84926:r.q(r.cw(0,r.ps(0,"comedystopstockholm.se"),r.ge(1))),84927:r.q(r.cw(0,r.ps(0,"ladygagajapan2020.com"),r.ge(1))),84928:r.q(r.cw(0,r.ps(0,"suvilahtiwinefest.fi"),r.ge(1))),84931:r.q(r.cw(0,r.ps(0,"billiejapantour2020.com"),r.ge(1))),84936:r.q(r.cw(0,r.ps(0,"mslaurynhilljapan.com"),r.ge(1))),85099:r.q(r.cw(0,r.a([r.y(0,0),r.ps(1,"amexukpreferred")]),r.ge(1))),85529:r.q(r.cw(0,r.ps(0,"tuningfork.co.nz"),r.ge(1))),85671:r.q(r.cw(0,r.a([r.y(3,111),r.ps(0,0)]),r.ge(1))),85672:r.q(r.cw(0,r.a([r.y(3,111),r.ps(0,16)]),r.ge(1))),85674:r.q(r.cw(0,r.a([r.y(0,0),r.ps(1,"o2_priority")]),r.ge(1))),85972:r.q(r.cw(0,r.ps(0,"soundcrashmusic.com"),r.ge(1))),85973:r.q(r.cw(0,r.ps(0,"thefortitude.com.au"),r.ge(1))),85974:r.q(r.cw(0,r.ps(0,"sparkarena.co.nz"),r.ge(1))),85975:r.q(r.cw(0,r.ps(0,"livenationspecialevents.com.au"),r.ge(1))),85994:r.q(r.cw(0,r.ps(0,"music.carlsberg.co.uk"),r.ge(1))),86038:r.q(r.cw(0,r.ps(0,"the1878.ie"),r.ge(1))),86109:r.q(r.cw(0,r.ps(0,"thepremiumclub.ie"),r.ge(1))),86155:r.q(r.cw(0,r.ps(0,"planetevents.es"),r.ge(1))),87084:r.q(r.cw(0,r.ps(0,"lnejobs.com"),r.ge(1))),87221:r.q(r.cw(0,r.ps(0,"lightsfestival.se"),r.ge(1))),87499:r.q(r.cw(0,r.ps(0,"oitg.ch"),r.ge(1))),87825:r.q(r.cw(0,r.ps(1,128),r.ge(1))),87827:r.q(r.cw(0,r.ps(1,129),r.ge(1))),87828:r.q(r.cw(0,r.ps(1,130),r.ge(1))),87829:r.q(r.cw(0,r.ps(1,133),r.ge(1))),87831:r.q(r.cw(0,r.ps(1,134),r.ge(1))),87832:r.q(r.cw(0,r.ps(1,135),r.ge(1))),87833:r.q(r.cw(0,r.ps(1,137),r.ge(1))),87834:r.q(r.cw(0,r.ps(1,138),r.ge(1))),87837:r.q(r.cw(0,r.ps(1,139),r.ge(1))),87838:r.q(r.cw(0,r.ps(1,140),r.ge(1))),87839:r.q(r.cw(0,r.ps(1,141),r.ge(1))),87841:r.q(r.cw(0,r.ps(1,143),r.ge(1))),87842:r.q(r.cw(0,r.ps(1,144),r.ge(1))),87843:r.q(r.cw(0,r.ps(1,147),r.ge(1))),87844:r.q(r.cw(0,r.ps(1,148),r.ge(1))),87845:r.q(r.cw(0,r.ps(1,136),r.ge(1))),87846:r.q(r.cw(0,r.ps(1,145),r.ge(1))),87847:r.q(r.cw(0,r.ps(1,146),r.ge(1))),87848:r.q(r.cw(0,r.ps(1,132),r.ge(1))),87849:r.q(r.cw(0,r.ps(1,"press.academy-music-group.co.uk"),r.ge(1))),87903:r.q(r.cw(0,r.ps(1,152),r.ge(1))),88011:r.q(r.cw(0,r.ps(0,"mellenevents.com.au"),r.ge(1))),88107:r.q(r.cw(0,r.ps(0,"lollastockholm.com"),r.ge(1))),88187:r.q(r.cw(0,r.a([r.y(5,46),r.ps(0,96)]),r.ge(1))),88191:r.q(r.cw(0,r.a([r.y(5,47),r.ps(0,96)]),r.ge(1))),88370:r.q(r.cw(0,r.pe(0,"shropshire.campbestival.net"),r.ge(1))),88372:r.q(r.cw(0,r.ps(0,"happyplace.melbourne"),r.ge(1))),88386:r.q(r.cw(0,r.ps(0,"lollaparis.com"),r.ge(1))),88577:r.q(r.ocq(r.lm("f41e8055-4eec-4bcb-9746-a89a7d19b8ca",r.ge(.5)),r.ifp("27134"))),88590:r.q(r.cw(0,r.ps(0,"lollapaloozaar.com"),r.ge(1))),88592:r.q(r.cw(0,r.ps(0,"lollapaloozabr.com"),r.ge(1))),88593:r.q(r.cw(0,r.ps(0,"lollapaloozacl.com"),r.ge(1))),88609:r.q(r.cw(0,r.ps(0,"titancardiff.co.uk"),r.ge(1))),88881:r.q(r.ocq(r.lm("0c5be739-8208-4f9c-b390-0114ab8fe552",r.ge(.5)),r.ifp("28419"))),88882:r.q(r.ocq(r.lm("79d6b4e3-c075-41b8-bc9d-df3ce36be7e7",r.ge(.5)),r.ifp("28416"))),88883:r.q(r.ocq(r.lm("085f6516-1a28-405b-a460-1bbacdc43830",r.ge(.5)),r.ifp("26111"))),89064:r.q(r.ocq(r.lm("33910bba-e780-4d83-9b0b-31c6d889dc22",r.ge(.5)),r.ifp("35772"))),89065:r.q(r.ocq(r.lm("8d5eaa21-b90e-464f-89f9-ee10b99ff6d9",r.ge(.5)),r.ifp("52236"))),89066:r.q(r.ocq(r.lm("992c95c9-6e34-4619-ab7a-fd789df3fc04",r.ge(.5)),r.ifp("35768"))),89067:r.q(r.ocq(r.lm("e38d33a3-588c-46ac-a9bc-3f06f456d055",r.ge(.5)),r.ifp("69186"))),89068:r.q(r.ocq(r.lm("67b62ea8-2276-4395-a331-ec54617f6b8a",r.ge(.5)),r.ifp("27603"))),89069:r.q(r.ocq(r.lm("120cbccc-5ad8-4d44-8b70-767bfe4ef9c6",r.ge(.5)),r.ifp("35767"))),89070:r.q(r.ocq(r.lm("8e201ee9-a1d5-4382-a6a9-4f13e74f5438",r.ge(.5)),r.ifp("79582"))),89071:r.q(r.ocq(r.lm("96f9d677-1fcc-4ba6-8153-4a47d57359c6",r.ge(.5)),r.ifp("79583"))),89072:r.q(r.ocq(r.lm("e9d0d515-b0fe-4929-a166-10816ca37ee5",r.ge(.5)),r.ifp("79584"))),89074:r.q(r.ocq(r.lm("77d7ba1b-da55-491d-a2eb-ad185aa48d76",r.ge(.53150916)),r.ifp("54402"))),89179:r.q(r.cw(0,r.ps(0,"colourboxx.com"),r.ge(1))),90056:r.q(r.cw(0,r.a([r.pe(3,"344864"),r.ps(0,95)]),r.ge(1))),90062:r.q(r.cw(0,r.a([r.pe(3,"1435919"),r.ps(0,0)]),r.ge(1))),90178:r.q(r.cw(0,r.ps(1,142),r.ge(1))),90429:r.q(r.ocq(r.lm("6ea21ca4-fbc3-4089-8097-0502a3d9eabb",r.ge(.52687746)),r.ifp("90178"))),90430:r.q(r.ocq(r.lm("75bcf634-cac5-441c-8d3e-c0a6ce40a3ed",r.ge(.5)),r.ifp("87843"))),90431:r.q(r.ocq(r.lm("1e15f791-0025-4685-9dad-b4c03f417200",r.ge(.51742524)),r.ifp("87848"))),90432:r.q(r.ocq(r.lm("039803be-9686-40f5-9856-8ebe713d3861",r.ge(.53486145)),r.ifp("87847"))),90433:r.q(r.ocq(r.lm("9c63706c-8ff5-46c3-8066-6dde6c4c7741",r.ge(.50709957)),r.ifp("87846"))),90434:r.q(r.ocq(r.lm("7929435d-fce5-4b8b-aaba-cfec0428a8c9",r.ge(.5550974)),r.ifp("87839"))),90435:r.q(r.ocq(r.lm("d7933bce-d902-4381-98c1-98a41c54cc7e",r.ge(.5198274)),r.ifp("87829"))),90436:r.q(r.ocq(r.lm("beee87f9-f7bd-4c7c-bf64-08ce83d2dd6b",r.ge(.5129239)),r.ifp("87838"))),90437:r.q(r.ocq(r.lm("baf4141e-5f7f-4ffd-a274-3fb2986dc0bb",r.ge(.51929533)),r.ifp("87845"))),90438:r.q(r.ocq(r.lm("c564b6ba-8b75-4373-8c21-4c96952deea1",r.ge(.5388063)),r.ifp("87844"))),90439:r.q(r.ocq(r.lm("8317d5c6-0164-4936-8f2a-0494ee7b7e49",r.ge(.5045311)),r.ifp("87841"))),90440:r.q(r.ocq(r.lm("87bb6ef7-8672-48f9-b97f-cdb107c694a2",r.ge(.52867734)),r.ifp("87832"))),90441:r.q(r.ocq(r.lm("201216d3-32fa-4c62-8c72-afe457332f73",r.ge(.5)),r.ifp("87828"))),90442:r.q(r.ocq(r.lm("299a24ef-5aa9-4619-ba0f-b7321189f121",r.ge(.5181107)),r.ifp("87833"))),90443:r.q(r.ocq(r.lm("0513c992-4b9d-489b-aba8-5f3b887f1994",r.ge(.53942317)),r.ifp("87834"))),90444:r.q(r.ocq(r.lm("dd46b7f1-9857-4f01-a5a6-0c8d64ae01e2",r.ge(.5)),r.ifp("87837"))),90445:r.q(r.ocq(r.lm("bc9e80b8-289f-484f-84e3-0f3ef206933c",r.ge(.5274249)),r.ifp("87842"))),90446:r.q(r.ocq(r.lm("e1520d94-c680-4ab4-b44b-cdf5af0e0644",r.ge(.5)),r.ifp("87831"))),90447:r.q(r.ocq(r.lm("dd754a27-00df-4023-95e4-45a3962677f4",r.ge(.52203214)),r.ifp("87827"))),90448:r.q(r.ocq(r.lm("b0dbc9a2-6ac7-433d-bfe4-b0d0ff6bc97d",r.ge(.50190145)),r.ifp("87825"))),90603:r.q(r.ocq(r.lm("77fac786-85ee-444b-b08a-2775b7bc93ab",r.ge(.65804344)),r.ifp("47192"))),90604:r.q(r.ocq(r.lm("212243ee-2de7-40de-bcf2-b9e4033d0d23",r.ge(.71013975)),r.ifp("47190"))),90605:r.q(r.ocq(r.lm("3a3ec8fe-0799-4ec7-99e9-5c1588db2f2a",r.ge(.8410013)),r.ifp("47191"))),90606:r.q(r.ocq(r.lm("677d0c71-9d32-4138-8a3f-4316dfb746c4",r.ge(.8766774)),r.ifp("88372"))),90607:r.q(r.ocq(r.lm("809a1eac-2468-4d27-ab9a-1406a77996a9",r.ge(.6059864)),r.ifp("32370"))),90608:r.q(r.ocq(r.lm("1457092d-138a-4d40-9e75-f6c073012804",r.ge(.51753885)),r.ifp("32367"))),90609:r.q(r.ocq(r.lm("038b7da9-4c31-4393-accf-0a770df465e9",r.ge(.5336289)),r.ifp("32372"))),90709:r.q(r.ocq(r.lm("9ce5aee5-6fad-4140-81ba-65ba41f99af4",r.ge(.5)),r.ifp("81527"))),90851:r.q(r.ocq(r.lm("d04f5e84-0295-4456-bb65-d3c1633bcf65",r.ge(.7511362)),r.ifp("90062"))),90852:r.q(r.ocq(r.lm("6956f097-d614-4417-ad22-306784497397",r.ge(.5)),r.ifp("90056"))),91171:r.q(r.cw(0,r.ps(0,"bergenlive.no"),r.ge(1))),91332:r.q(r.cw(0,r.a([r.y(0,9),r.ps(1,26)]),r.ge(1))),91341:r.q(r.cw(0,r.a([r.pe(3,"860453"),r.ps(0,0)]),r.ge(1))),91350:r.q(r.cw(0,r.a([r.pe(3,"860931"),r.ps(0,4)]),r.ge(1))),91351:r.q(r.cw(0,r.a([r.pe(18,"AFL"),r.pe(2,"711"),r.ps(0,4)]),r.ge(1))),91352:r.q(r.cw(0,r.a([r.pe(3,"800824"),r.ps(0,4)]),r.ge(1))),91353:r.q(r.cw(0,r.a([r.pe(3,"779378"),r.ps(0,4)]),r.ge(1))),91354:r.q(r.cw(0,r.a([r.pe(3,"1055714"),r.ps(0,4)]),r.ge(1))),91356:r.q(r.cw(0,r.a([r.pe(3,"1055647"),r.ps(0,4)]),r.ge(1))),91359:r.q(r.cw(0,r.a([r.pe(3,"1055677"),r.ps(0,4)]),r.ge(1))),91361:r.q(r.cw(0,r.a([r.pe(3,"1055634"),r.ps(0,4)]),r.ge(1))),91362:r.q(r.cw(0,r.a([r.pe(3,"1436352"),r.ps(0,4)]),r.ge(1))),91364:r.q(r.cw(0,r.a([r.pe(3,"1529463"),r.ps(0,4)]),r.ge(1))),91365:r.q(r.cw(0,r.a([r.pe(3,"1055648"),r.ps(0,4)]),r.ge(1))),91366:r.q(r.cw(0,r.a([r.pe(3,"714537"),r.ps(0,4)]),r.ge(1))),91368:r.q(r.cw(0,r.a([r.pe(3,"1055715"),r.ps(0,4)]),r.ge(1))),91371:r.q(r.cw(0,r.a([r.pe(3,"1055736"),r.ps(0,4)]),r.ge(1))),91372:r.q(r.cw(0,r.a([r.pe(3,"845830"),r.ps(0,4)]),r.ge(1))),91373:r.q(r.cw(0,r.a([r.pe(3,"1055617"),r.ps(0,4)]),r.ge(1))),91374:r.q(r.cw(0,r.a([r.pe(3,"799989"),r.ps(0,4)]),r.ge(1))),91375:r.q(r.cw(0,r.a([r.pe(3,"845214"),r.ps(0,4)]),r.ge(1))),91376:r.q(r.cw(0,r.a([r.pe(3,"1055618"),r.ps(0,4)]),r.ge(1))),91474:r.q(r.ocq(r.lm("3e007d58-b25d-4a14-9f95-d5b7646423a2",r.ge(.68664813)),r.ifp("91341"))),91475:r.q(r.ocq(r.lm("a0b1c416-b5aa-4d5b-bb68-fdfe8fbd5081",r.ge(.6724222)),r.ifp("91171"))),91476:r.q(r.ocq(r.lm("5ade88d0-3f01-475e-bc7c-b8a4500299c2",r.ge(.70956194)),r.ifp("91351"))),91658:r.q(r.cw(0,r.ps(0,"connectmusicfestival.com"),r.ge(1))),91864:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,9),r.ps(1,26)]),r.ge(1))),91866:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,9),r.ps(1,26)]),r.ge(1))),91867:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,9),r.ps(1,26)]),r.ge(1))),91868:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,9),r.ps(1,26)]),r.ge(1))),91928:r.q(r.cw(0,r.a([r.y(2,40),r.y(0,9)]),r.ge(1))),91931:r.q(r.cw(0,r.a([r.y(2,34),r.y(0,9)]),r.ge(1))),91932:r.q(r.cw(0,r.a([r.y(2,33),r.y(0,9)]),r.ge(1))),91933:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,9)]),r.ge(1))),91934:r.q(r.cw(0,r.a([r.y(2,36),r.y(0,9)]),r.ge(1))),91937:r.q(r.cw(0,r.a([r.y(2,35),r.y(0,9)]),r.ge(1))),91938:r.q(r.cw(0,r.a([r.y(2,32),r.y(0,9)]),r.ge(1))),91939:r.q(r.cw(0,r.a([r.y(2,39),r.y(0,9)]),r.ge(1))),91940:r.q(r.cw(0,r.a([r.y(2,37),r.y(0,9)]),r.ge(1))),91941:r.q(r.cw(0,r.a([r.y(2,38),r.y(0,9)]),r.ge(1))),91972:r.q(r.cw(0,r.a([r.ps(3,112),r.ps(0,9)]),r.ge(1))),91997:r.q(r.cw(0,r.a([r.y(0,9),r.ps(1,"subchannel_id=11278")]),r.ge(1))),92059:r.q(r.cw(0,r.a([r.pe(3,"5365930"),r.ps(0,0)]),r.ge(1))),92060:r.q(r.cw(0,r.a([r.pe(3,"1573250"),r.ps(0,0)]),r.ge(1))),92061:r.q(r.cw(0,r.a([r.pe(3,"1842565"),r.ps(0,0)]),r.ge(1))),92062:r.q(r.cw(0,r.a([r.pe(3,"33286"),r.ps(0,0)]),r.ge(1))),92063:r.q(r.cw(0,r.a([r.ps(3,"5362887"),r.ps(0,2)]),r.ge(1))),92064:r.q(r.cw(0,r.a([r.ps(3,"5247742"),r.ps(0,2)]),r.ge(1))),92065:r.q(r.cw(0,r.a([r.ps(3,"2227130"),r.ps(0,2)]),r.ge(1))),92066:r.q(r.cw(0,r.a([r.ps(3,"5345388"),r.ps(0,2)]),r.ge(1))),92067:r.q(r.cw(0,r.a([r.ps(3,"5363603"),r.ps(0,2)]),r.ge(1))),92068:r.q(r.cw(0,r.a([r.pe(3,"1925537"),r.ps(0,2)]),r.ge(1))),92069:r.q(r.cw(0,r.a([r.pe(3,"5342522"),r.ps(0,2)]),r.ge(1))),92070:r.q(r.cw(0,r.a([r.pe(3,"5256762"),r.ps(0,2)]),r.ge(1))),92071:r.q(r.cw(0,r.a([r.pe(3,"31171"),r.ps(0,2)]),r.ge(1))),92072:r.q(r.cw(0,r.a([r.pe(3,"5365006"),r.ps(0,2)]),r.ge(1))),92073:r.q(r.cw(0,r.a([r.pe(3,"5249510"),r.ps(0,2)]),r.ge(1))),92074:r.q(r.cw(0,r.a([r.pe(3,"1587127"),r.ps(0,2)]),r.ge(1))),92075:r.q(r.cw(0,r.a([r.pe(3,"1714331"),r.ps(0,2)]),r.ge(1))),92076:r.q(r.cw(0,r.a([r.pe(3,"1808202"),r.ps(0,2)]),r.ge(1))),92079:r.q(r.cw(0,r.a([r.pe(3,"5343603"),r.ps(0,2)]),r.ge(1))),92080:r.q(r.cw(0,r.a([r.pe(3,"1880774"),r.ps(0,2)]),r.ge(1))),92081:r.q(r.cw(0,r.a([r.pe(3,"2151853"),r.ps(0,2)]),r.ge(1))),92082:r.q(r.cw(0,r.a([r.pe(3,"1992315"),r.ps(0,2)]),r.ge(1))),92083:r.q(r.cw(0,r.a([r.pe(3,"5270477"),r.ps(0,2)]),r.ge(1))),92084:r.q(r.cw(0,r.a([r.pe(3,"5345201"),r.ps(0,2)]),r.ge(1))),92248:r.q(r.cw(0,r.ps(0,"knotfestgermany.com"),r.ge(1))),92522:r.q(r.cw(0,r.a([r.pe(3,"974861"),r.ps(0,26)]),r.ge(1))),92538:r.q(r.cw(0,r.a([r.pe(3,"227"),r.ps(0,26)]),r.ge(1))),92541:r.q(r.cw(0,r.a([r.pe(3,"82"),r.ps(0,26)]),r.ge(1))),92545:r.q(r.cw(0,r.a([r.pe(3,"22306"),r.ps(0,26)]),r.ge(1))),92559:r.q(r.cw(0,r.a([r.ps(14,"threeplus"),r.ps(0,2)]),r.ge(1))),92586:r.q(r.ocq(r.lm("47ceee84-5e77-4cba-81af-57589a830894",r.ge(.83236736)),r.ifp("91997"))),92587:r.q(r.ocq(r.lm("6cb816f7-7722-45d2-a5d9-713d563452ff",r.ge(.58324206)),r.ifp("91864"))),92588:r.q(r.ocq(r.lm("035e2189-d7c1-40bb-8383-27324217aef5",r.ge(.70064765)),r.ifp("91866"))),92589:r.q(r.ocq(r.lm("4e309cc5-bce4-4f09-8116-96536476d966",r.ge(.7716651)),r.ifp("91868"))),92590:r.q(r.ocq(r.lm("3466f550-397f-464f-ab43-6fe3db0b81ac",r.ge(.7024909)),r.ifp("91867"))),92591:r.q(r.ocq(r.lm("1ebca572-210e-4c6e-8e42-3665519d950a",r.ge(.7446507)),r.ifp("91928"))),92592:r.q(r.ocq(r.lm("ee83fba9-2d8f-48af-9e52-f2124f97c81c",r.ge(.8126167)),r.ifp("91931"))),92593:r.q(r.ocq(r.lm("b260e173-2a08-4d9d-8340-cc29983470b4",r.ge(.81046623)),r.ifp("91932"))),92594:r.q(r.ocq(r.lm("38522cc0-2f6d-4bb7-880a-2f77c5629bde",r.ge(.8139338)),r.ifp("91933"))),92595:r.q(r.ocq(r.lm("bcfb2795-1893-410f-96e4-eb4df8deb12e",r.ge(.8014882)),r.ifp("91934"))),92596:r.q(r.ocq(r.lm("f5990c5c-20d5-4814-a7b4-33d9b561f0a5",r.ge(.8190954)),r.ifp("91937"))),92597:r.q(r.ocq(r.lm("2c4d6cbb-ff2a-4ca3-8636-a5c55779498d",r.ge(.82811797)),r.ifp("91938"))),92598:r.q(r.ocq(r.lm("2ced5426-8b90-410c-a54f-d26ee6ae55d2",r.ge(.8133914)),r.ifp("91940"))),92811:r.q(r.ocq(r.lm("751478ce-b251-4bbf-975a-d91d3a2e300b",r.ge(.60317814)),r.ifp("92559"))),92985:r.q(r.ocq(r.lm("9cfb7f93-a9f3-4dd4-a200-a911c3a5c342",r.ge(.71474797)),r.ifp("73540"))),92986:r.q(r.ocq(r.lm("f0b0aa88-a439-4393-8718-a25d6ff59a60",r.ge(.8470587)),r.ifp("73541"))),92987:r.q(r.ocq(r.lm("1a4d4171-3bc6-40b3-87f1-5385a4f59ee4",r.ge(.80289996)),r.ifp("73542"))),92988:r.q(r.ocq(r.lm("c367f9cf-226d-485e-ad45-e33d7b8a356c",r.ge(.69652075)),r.ifp("73543"))),92989:r.q(r.ocq(r.lm("5f505200-0e2b-48d5-9657-4203ecbbe36f",r.ge(.8215496)),r.ifp("73607"))),92990:r.q(r.ocq(r.lm("e33a49bb-20b3-452d-a380-a35310893a86",r.ge(.85587555)),r.ifp("73608"))),92991:r.q(r.ocq(r.lm("69c9d842-7961-42e1-9607-05f25ddf8776",r.ge(.8260757)),r.ifp("73609"))),92992:r.q(r.ocq(r.lm("94b13bf2-564f-4ee6-8c5c-adc808ac4dbc",r.ge(.83711094)),r.ifp("73610"))),92993:r.q(r.ocq(r.lm("535b848b-8bdf-4759-8e4d-c45c4e0bda33",r.ge(.8276918)),r.ifp("73612"))),92994:r.q(r.ocq(r.lm("7f9ed192-295a-4e82-a735-0e6dd8a3a95e",r.ge(.842173)),r.ifp("73613"))),92995:r.q(r.ocq(r.lm("cd057ec1-5134-43e3-a986-67bf80509a6b",r.ge(.6241122)),r.ifp("73816"))),92996:r.q(r.ocq(r.lm("08430df7-17a0-4762-9029-2b13d6a86e3b",r.ge(.86631995)),r.ifp("73614"))),92997:r.q(r.ocq(r.lm("c56842fa-74bd-4001-b22b-ab68a0df23b0",r.ge(.50932235)),r.ifp("73615"))),92998:r.q(r.ocq(r.lm("17c16f7c-51ce-4871-bcd5-9b084f0c4edb",r.ge(.87610567)),r.ifp("73616"))),92999:r.q(r.ocq(r.lm("2747c324-c393-4b03-9025-a395fc0369b6",r.ge(.8551767)),r.ifp("73617"))),93330:r.q(r.cw(0,r.ps(0,"neonfestival.no"),r.ge(1))),94762:r.q(r.cw(0,r.a([r.pe(3,"1072647"),r.ps(0,4)]),r.ge(1))),94766:r.q(r.cw(0,r.a([r.pe(10,"304490"),r.ps(0,7)]),r.ge(1))),94774:r.q(r.cw(0,r.a([r.pe(10,"303717"),r.ps(0,7)]),r.ge(1))),94839:r.q(r.cw(0,r.a([r.pe(10,"304415"),r.ps(0,7)]),r.ge(1))),94900:r.q(r.cw(0,r.pe(0,"dorset.campbestival.net"),r.ge(1))),95231:r.q(r.cw(0,r.ps(0,"bergenfest.no"),r.ge(1))),95313:r.q(r.cw(0,r.a([r.pe(10,"155697"),r.ps(0,7)]),r.ge(1))),95385:r.q(r.ocq(r.lm("41ee6c67-cf3c-4065-95dc-e6247e17bbf6",r.ge(.73233867)),r.ifp("84430"))),95386:r.q(r.cw(0,r.ps(0,58),r.ge(1))),95387:r.q(r.cw(0,r.a([r.y(4,11),r.ps(0,21),r.ps(1,58)]),r.ge(1))),95389:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,21),r.ps(1,58)]),r.ge(1))),95390:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,21),r.ps(1,58)]),r.ge(1))),95391:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,21),r.ps(1,58)]),r.ge(1))),95392:r.q(r.cw(0,r.a([r.y(0,10),r.ps(1,44)]),r.ge(1))),95394:r.q(r.cw(0,r.a([r.y(0,19),r.ps(1,59)]),r.ge(1))),95395:r.q(r.cw(0,r.a([r.y(0,15),r.ps(1,60)]),r.ge(1))),95396:r.q(r.cw(0,r.a([r.y(0,30),r.ps(1,49)]),r.ge(1))),95397:r.q(r.cw(0,r.a([r.y(0,52),r.ps(1,63)]),r.ge(1))),95398:r.q(r.cw(0,r.a([r.y(0,51),r.ps(1,62)]),r.ge(1))),95399:r.q(r.cw(0,r.a([r.y(0,50),r.ps(1,61)]),r.ge(1))),95400:r.q(r.cw(0,r.a([r.y(0,53),r.ps(1,64)]),r.ge(1))),95401:r.q(r.cw(0,r.a([r.y(0,31),r.ps(1,29)]),r.ge(1))),95402:r.q(r.cw(0,r.a([r.y(0,41),r.ps(1,65)]),r.ge(1))),95403:r.q(r.cw(0,r.a([r.y(0,54),r.ps(1,66)]),r.ge(1))),95404:r.q(r.cw(0,r.a([r.y(0,67),r.ps(1,57)]),r.ge(1))),95405:r.q(r.cw(0,r.a([r.y(0,68),r.ps(1,45)]),r.ge(1))),95407:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,10),r.ps(1,44)]),r.ge(1))),95410:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,10),r.ps(1,44)]),r.ge(1))),95411:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,10),r.ps(1,44)]),r.ge(1))),95412:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,10),r.ps(1,44)]),r.ge(1))),95413:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,19),r.ps(1,59)]),r.ge(1))),95414:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,19),r.ps(1,59)]),r.ge(1))),95415:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,19),r.ps(1,59)]),r.ge(1))),95416:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,19),r.ps(1,59)]),r.ge(1))),95423:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,15),r.ps(1,60)]),r.ge(1))),95424:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,15),r.ps(1,60)]),r.ge(1))),95425:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,15),r.ps(1,60)]),r.ge(1))),95426:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,15),r.ps(1,60)]),r.ge(1))),95428:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,30),r.ps(1,49)]),r.ge(1))),95429:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,30),r.ps(1,49)]),r.ge(1))),95430:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,30),r.ps(1,49)]),r.ge(1))),95431:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,30),r.ps(1,49)]),r.ge(1))),95496:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,52),r.ps(1,63)]),r.ge(1))),95497:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,52),r.ps(1,63)]),r.ge(1))),95498:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,52),r.ps(1,63)]),r.ge(1))),95500:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,52),r.ps(1,63)]),r.ge(1))),95502:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,51),r.ps(1,62)]),r.ge(1))),95503:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,51),r.ps(1,62)]),r.ge(1))),95504:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,51),r.ps(1,62)]),r.ge(1))),95505:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,51),r.ps(1,62)]),r.ge(1))),95507:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,50),r.ps(1,61)]),r.ge(1))),95508:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,50),r.ps(1,61)]),r.ge(1))),95509:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,50),r.ps(1,61)]),r.ge(1))),95510:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,50),r.ps(1,61)]),r.ge(1))),95579:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,53),r.ps(1,64)]),r.ge(1))),95580:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,53),r.ps(1,64)]),r.ge(1))),95581:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,53),r.ps(1,64)]),r.ge(1))),95582:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,53),r.ps(1,64)]),r.ge(1))),95583:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,31),r.ps(1,29)]),r.ge(1))),95584:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,31),r.ps(1,29)]),r.ge(1))),95585:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,31),r.ps(1,29)]),r.ge(1))),95586:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,31),r.ps(1,29)]),r.ge(1))),95589:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,41),r.ps(1,65)]),r.ge(1))),95593:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,41),r.ps(1,65)]),r.ge(1))),95594:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,41),r.ps(1,65)]),r.ge(1))),95595:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,41),r.ps(1,65)]),r.ge(1))),95598:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,54),r.ps(1,66)]),r.ge(1))),95600:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,54),r.ps(1,66)]),r.ge(1))),95601:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,54),r.ps(1,66)]),r.ge(1))),95603:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,54),r.ps(1,66)]),r.ge(1))),95608:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,67),r.ps(1,57)]),r.ge(1))),95609:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,67),r.ps(1,57)]),r.ge(1))),95614:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,67),r.ps(1,57)]),r.ge(1))),95616:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,67),r.ps(1,57)]),r.ge(1))),95621:r.q(r.cw(0,r.a([r.y(4,11),r.y(0,68),r.ps(1,45)]),r.ge(1))),95622:r.q(r.cw(0,r.a([r.y(4,14),r.y(0,68),r.ps(1,45)]),r.ge(1))),95623:r.q(r.cw(0,r.a([r.y(4,12),r.y(0,68),r.ps(1,45)]),r.ge(1))),95624:r.q(r.cw(0,r.a([r.y(4,13),r.y(0,68),r.ps(1,45)]),r.ge(1))),96442:r.q(r.cw(0,r.a([r.y(2,40),r.y(0,21)]),r.ge(1))),96443:r.q(r.cw(0,r.a([r.y(2,34),r.y(0,21)]),r.ge(1))),96444:r.q(r.cw(0,r.a([r.y(2,33),r.y(0,21)]),r.ge(1))),96445:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,21)]),r.ge(1))),96446:r.q(r.cw(0,r.a([r.y(2,36),r.y(0,21)]),r.ge(1))),96447:r.q(r.cw(0,r.a([r.y(2,42),r.y(0,21)]),r.ge(1))),96448:r.q(r.cw(0,r.a([r.y(2,35),r.y(0,21)]),r.ge(1))),96449:r.q(r.cw(0,r.a([r.y(2,32),r.y(0,21)]),r.ge(1))),96450:r.q(r.cw(0,r.a([r.y(2,39),r.y(0,21)]),r.ge(1))),96451:r.q(r.cw(0,r.a([r.y(2,37),r.y(0,21)]),r.ge(1))),96452:r.q(r.cw(0,r.a([r.y(2,38),r.y(0,21)]),r.ge(1))),96711:r.q(r.cw(0,r.a([r.y(2,40),r.y(0,10)]),r.ge(1))),96712:r.q(r.cw(0,r.a([r.y(2,34),r.y(0,10)]),r.ge(1))),96713:r.q(r.cw(0,r.a([r.y(2,33),r.y(0,10)]),r.ge(1))),96714:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,10)]),r.ge(1))),96715:r.q(r.cw(0,r.a([r.y(2,36),r.y(0,10)]),r.ge(1))),96716:r.q(r.cw(0,r.a([r.y(2,42),r.y(0,10)]),r.ge(1))),96717:r.q(r.cw(0,r.a([r.y(2,35),r.y(0,10)]),r.ge(1))),96718:r.q(r.cw(0,r.a([r.y(2,32),r.y(0,10)]),r.ge(1))),96719:r.q(r.cw(0,r.a([r.y(2,39),r.y(0,10)]),r.ge(1))),96720:r.q(r.cw(0,r.a([r.y(2,37),r.y(0,10)]),r.ge(1))),96721:r.q(r.cw(0,r.a([r.y(2,38),r.y(0,10)]),r.ge(1))),96739:r.q(r.cw(0,r.a([r.pe(3,"2302081"),r.ps(0,4)]),r.ge(1))),97707:r.q(r.cw(0,r.ps(0,"jailbreak.dk"),r.ge(1))),97811:r.q(r.cw(0,r.a([r.y(2,40),r.y(0,19)]),r.ge(1))),97812:r.q(r.cw(0,r.a([r.y(2,34),r.y(0,19)]),r.ge(1))),97813:r.q(r.cw(0,r.a([r.y(2,33),r.y(0,19)]),r.ge(1))),97814:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,19)]),r.ge(1))),97815:r.q(r.cw(0,r.a([r.y(2,36),r.y(0,19)]),r.ge(1))),97816:r.q(r.cw(0,r.a([r.y(2,42),r.y(0,19)]),r.ge(1))),97817:r.q(r.cw(0,r.a([r.y(2,35),r.y(0,19)]),r.ge(1))),97818:r.q(r.cw(0,r.a([r.y(2,32),r.y(0,19)]),r.ge(1))),97819:r.q(r.cw(0,r.a([r.y(2,39),r.y(0,19)]),r.ge(1))),97820:r.q(r.cw(0,r.a([r.y(2,37),r.y(0,19)]),r.ge(1))),97821:r.q(r.cw(0,r.a([r.y(2,38),r.y(0,19)]),r.ge(1))),98150:r.q(r.cw(0,r.a([r.y(0,6),r.ps(["user","loggedInStatus"],"true")]),r.ge(1))),98522:r.q(r.cw(0,r.a([r.pe(3,"877267"),r.ps(0,29)]),r.ge(1))),98525:r.q(r.cw(0,r.a([r.pe(3,"935065"),r.ps(0,29)]),r.ge(1))),98526:r.q(r.cw(0,r.a([r.y(3,109),r.ps(0,29)]),r.ge(1))),99088:r.q(r.cw(0,r.a([r.pe(10,"197033"),r.ps(0,25)]),r.ge(1))),99477:r.q(r.cw(0,r.a([r.y(2,40),r.y(0,15)]),r.ge(1))),99478:r.q(r.cw(0,r.a([r.y(2,34),r.y(0,15)]),r.ge(1))),99479:r.q(r.cw(0,r.a([r.y(2,33),r.y(0,15)]),r.ge(1))),99480:r.q(r.cw(0,r.a([r.y(2,24),r.y(0,15)]),r.ge(1))),99483:r.q(r.cw(0,r.a([r.y(2,36),r.y(0,15)]),r.ge(1))),99484:r.q(r.cw(0,r.a([r.y(2,42),r.y(0,15)]),r.ge(1))),99485:r.q(r.cw(0,r.a([r.y(2,35),r.y(0,15)]),r.ge(1))),99486:r.q(r.cw(0,r.a([r.y(2,32),r.y(0,15)]),r.ge(1))),99487:r.q(r.cw(0,r.a([r.y(2,39),r.y(0,15)]),r.ge(1))),99488:r.q(r.cw(0,r.a([r.y(2,37),r.y(0,15)]),r.ge(1))),99489:r.q(r.cw(0,r.a([r.y(2,38),r.y(0,15)]),r.ge(1))),99582:r.q(r.cw(0,r.pe(5,"Belgium"),r.ge(1))),99583:r.q(r.cw(0,r.y(5,123),r.ge(1))),99584:r.q(r.cw(0,r.pe(5,"Austria"),r.ge(1))),99585:r.q(r.cw(0,r.pe(5,"Switzerland"),r.ge(1))),99586:r.q(r.cw(0,r.pe(5,"Czechia"),r.ge(1))),99587:r.q(r.cw(0,r.pe(5,"Denmark"),r.ge(1))),99588:r.q(r.cw(0,r.pe(5,"Finland"),r.ge(1))),99589:r.q(r.cw(0,r.pe(5,"Norway"),r.ge(1))),99592:r.q(r.cw(0,r.pe(5,"Poland"),r.ge(1))),99593:r.q(r.cw(0,r.pe(5,"United Arab Emirates"),r.ge(1))),99594:r.q(r.cw(0,r.pe(5,"South Africa"),r.ge(1))),99596:r.q(r.cw(0,r.pe(5,"Estonia"),r.ge(1))),99597:r.q(r.cw(0,r.pe(5,"China"),r.ge(1))),99598:r.q(r.cw(0,r.pe(5,"Singapore"),r.ge(1))),99599:r.q(r.cw(0,r.y(5,88),r.ge(1))),99600:r.q(r.cw(0,r.pe(5,"Japan"),r.ge(1))),99601:r.q(r.cw(0,r.pe(5,"South Korea"),r.ge(1))),99602:r.q(r.cw(0,r.pe(5,"Thailand"),r.ge(1))),99603:r.q(r.cw(0,r.pe(5,"Taiwan"),r.ge(1))),99604:r.q(r.cw(0,r.pe(5,"Malaysia"),r.ge(1)))}||{},queriesByEvent:{"!UpdateLookalikeModels":["109212","109215","109216","109217","109686","109690","109692","109693","109694","109695","109696","109697","110652","110653","110654","112090","112099","112100","112101","112108","112109","112110","113116","113117","113686","113687","113688","113689","113690","113691","113692","113693","113694","113695","113696","113697","113698","113700","113701","113702","113703","113704","113705","113706","113707","113708","114763","114764","114765","114766","114767","114768","114769","115593","117425","117554","117555","117556","117557","117756","117757","118547","118548","118549","118550","118551","118552","118553","118554","119204","120662","120663","121841","121842","121843","121844","121845","121846","122984","122985","58367","81760","83961","84369","88577","88881","88882","88883","89064","89065","89066","89067","89068","89069","89070","89071","89072","89074","90429","90430","90431","90432","90433","90434","90435","90436","90437","90438","90439","90440","90441","90442","90443","90444","90445","90446","90447","90448","90603","90604","90605","90606","90607","90608","90609","90709","90851","90852","91474","91475","91476","92586","92587","92588","92589","92590","92591","92592","92593","92594","92595","92596","92597","92598","92811","92985","92986","92987","92988","92989","92990","92991","92992","92993","92994","92995","92996","92997","92998","92999","95385"],"!UpdateThirdPartyData":["46832","46833","54875","54880","54881","54882"],FormSubmission:["61271"],Pageview:["100112","100113","100114","100287","100463","100465","100466","100471","100472","100473","100801","100802","100893","100894","101149","101368","101560","101580","102569","103502","103509","103510","104053","104054","104055","104056","104057","104071","104078","104400","104401","104725","105215","105232","105236","105237","106190","106491","106623","108551","109010","109062","109610","109775","109920","109921","109923","109927","110024","110519","111622","111623","111624","111654","111803","111804","111805","111806","111809","111810","111811","111812","111813","111814","111815","111816","111818","111844","111845","111846","111849","111850","111851","111852","111853","111854","111869","111870","111872","111874","111877","111887","111888","111890","111898","111903","111995","111998","111999","112905","112906","112907","112912","112913","112914","113114","113121","113834","113906","113907","113908","113909","113910","113911","113912","113913","113914","113915","115518","116600","117078","117079","117422","117423","117424","117426","117427","117428","117429","117430","117431","117432","117433","117540","117541","117542","117543","117544","117545","117547","117548","117549","117550","117574","117579","118555","118758","118759","118817","118819","118820","118821","118822","118854","119205","119211","121847","121848","122492","122544","122822","122961","122962","122963","122964","122965","122966","122967","122968","122969","122970","122971","122972","122973","122974","122975","122976","122977","122978","122979","122980","122981","122982","122983","24318","24713","26109","26110","26111","26333","26368","26373","26499","26745","27134","27603","28416","28418","28419","28420","31722","31723","31912","32018","32072","32073","32074","32075","32126","32127","32296","32298","32304","32305","32306","32307","32308","32309","32310","32311","32312","32350","32355","32360","32361","32363","32364","32365","32367","32370","32372","32380","32384","32385","32404","32406","32408","32410","32411","32412","32413","32414","32557","32761","33219","33220","33221","33222","33223","35542","35543","35767","35768","35769","35770","35771","35772","37975","40825","42111","42113","42389","42390","42395","42397","47190","47191","47192","49022","51062","52236","52419","54300","54402","54875","54880","54881","54882","58365","59438","59442","59443","61267","63038","63039","63040","63042","63118","63189","63190","63526","63527","63528","63529","63530","63531","63533","63534","63535","63536","63537","63538","63539","63540","63541","63542","64136","64455","64481","64483","66793","67583","67585","67587","67589","67591","67593","67594","67595","67596","69186","69462","69463","69466","69468","69478","70044","70049","70051","70052","70054","70055","70056","70057","70058","70059","70060","71267","72657","72658","73522","73540","73541","73542","73543","73607","73608","73609","73610","73611","73612","73613","73614","73615","73616","73617","73620","73623","73625","73626","73627","73632","73634","73635","73636","73638","73640","73816","73820","73821","73822","73823","73824","73827","73829","73831","73834","73841","73842","73843","73844","73845","73846","73847","73848","73849","73850","74324","74366","74376","74377","74378","74379","74380","74381","74382","74383","74385","74386","74387","74388","74389","74390","74391","74392","74393","74394","74395","74396","74397","74825","74826","74828","74829","74830","74831","74833","74834","74835","74836","74837","74855","74856","74857","74858","75149","75151","75199","75469","76174","76363","76450","77168","77169","77412","77661","77662","77728","79422","79569","79582","79583","79584","80517","80547","81095","81196","81326","81403","81424","81425","81426","81427","81428","81429","81430","81431","81432","81433","81434","81435","81443","81444","81445","81446","81447","81448","81450","81451","81452","81453","81454","81458","81459","81460","81461","81462","81464","81465","81466","81467","81468","81469","81470","81471","81472","81473","81474","81475","81476","81477","81478","81479","81480","81527","81767","81848","81881","81882","81905","81906","81982","82014","82044","82076","82081","82311","83139","83140","83603","83688","83890","84090","84174","84209","84430","84452","84472","84474","84609","84639","84805","84810","84922","84923","84924","84925","84926","84927","84928","84931","84936","85099","85529","85671","85672","85674","85972","85973","85974","85975","85994","86038","86109","86155","87084","87221","87499","87825","87827","87828","87829","87831","87832","87833","87834","87837","87838","87839","87841","87842","87843","87844","87845","87846","87847","87848","87849","87903","88011","88107","88187","88191","88370","88372","88386","88590","88592","88593","88609","89179","90056","90062","90178","91171","91332","91341","91350","91351","91352","91353","91354","91356","91359","91361","91362","91364","91365","91366","91368","91371","91372","91373","91374","91375","91376","91658","91864","91866","91867","91868","91928","91931","91932","91933","91934","91937","91938","91939","91940","91941","91972","91997","92059","92060","92061","92062","92063","92064","92065","92066","92067","92068","92069","92070","92071","92072","92073","92074","92075","92076","92079","92080","92081","92082","92083","92084","92248","92522","92538","92541","92545","92559","93330","94762","94766","94774","94839","94900","95231","95313","95386","95387","95389","95390","95391","95392","95394","95395","95396","95397","95398","95399","95400","95401","95402","95403","95404","95405","95407","95410","95411","95412","95413","95414","95415","95416","95423","95424","95425","95426","95428","95429","95430","95431","95496","95497","95498","95500","95502","95503","95504","95505","95507","95508","95509","95510","95579","95580","95581","95582","95583","95584","95585","95586","95589","95593","95594","95595","95598","95600","95601","95603","95608","95609","95614","95616","95621","95622","95623","95624","96442","96443","96444","96445","96446","96447","96448","96449","96450","96451","96452","96711","96712","96713","96714","96715","96716","96717","96718","96719","96720","96721","96739","97707","97811","97812","97813","97814","97815","97816","97817","97818","97819","97820","97821","98150","98522","98525","98526","99088","99477","99478","99479","99480","99483","99484","99485","99486","99487","99488","99489","99582","99583","99584","99585","99586","99587","99588","99589","99592","99593","99594","99596","99597","99598","99599","99600","99601","99602","99603","99604"],SegmentEntry:[],SegmentExit:[]}||{}}}();!function(e){const n=self;function c(e,c,t,r){function a(c){if("function"!=typeof n.postMessage)return e.ports[0].postMessage(c);n.postMessage(c)}if(!t)return a([c,null,r]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",t),a([c,t])}n.addEventListener("message",(function(n){if(t=n,!Array.isArray(t.data)||2!==t.data.length)return;var t;const r=n.data,[a,o]=r;if("function"==typeof e)return function(e,n,t,r){const a=function(e,n){try{return{res:e(n)}}catch(e){return{err:e}}}(n,r);return Boolean(null===(o=a)||void 0===o?void 0:o.err)?c(e,t,a.err):!(i=a.res)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then?c(e,t,null,a.res):void a.res.then((function(n){c(e,t,null,n)}),(function(n){c(e,t,n)}));var o,i}(n,e,a,o);c(n,a,new Error("Please pass a function into register()."))}))}((function(e){return((e,n)=>Pn(kc(e,n),(n=>Object.assign(Object.assign({},n),{userId:e.userId}))))(e,Sc)}))})();',"Worker",void 0,void 0)}var o=t(655);const u=()=>({kind:"null",value:null}),d=e=>({kind:"string",value:e}),l=e=>({kind:"number",value:e}),f=e=>({kind:"array",value:e}),p=e=>({kind:"object",value:e}),g=e=>e,m=()=>({kind:"bottom"}),h=e=>({kind:"inner",a:e}),_=e=>({kind:"top",error:e}),v=e=>({kind:"unbounded",group:e}),b=(e,r)=>({kind:"windowed",key:r,group:e}),w=(e,r,t)=>({kind:"countLimit",n:t,limit:r,group:e}),y=(e,r,t)=>({kind:"uniqueLimit",n:t,limit:r,group:e}),q=e=>({kind:"numberGroup",group:e}),k=e=>({kind:"stringGroup",group:e}),E=e=>({kind:"tuple",tuple:e}),D=e=>({state:e}),P=(e,r)=>({commands:e,payload:r});function S(e){return e}function M(e,r,t,n,i,a,s,c,o){switch(arguments.length){case 1:return e;case 2:return r(e);case 3:return t(r(e));case 4:return n(t(r(e)));case 5:return i(n(t(r(e))));case 6:return a(i(n(t(r(e)))));case 7:return s(a(i(n(t(r(e))))));case 8:return c(s(a(i(n(t(r(e)))))));case 9:return o(c(s(a(i(n(t(r(e))))))));default:for(var u=arguments[0],d=1;d<arguments.length;d++)u=arguments[d](u);return u}}var O=function(e){return{equals:function(r,t){return r===t||e(r,t)}}},T=function(e){return O((function(r,t){for(var n in e)if(!e[n].equals(r[n],t[n]))return!1;return!0}))},I=function(e){return function(r,t){return r===t||0===e(r,t)}},C=function(e){return{equals:I(e),compare:function(r,t){return r===t?0:e(r,t)}}},x=function(e){return function(r){return C((function(t,n){return r.compare(e(t),e(n))}))}},A=function(e){return function(r,t){return-1===e.compare(r,t)}},j=function(e){return function(r,t){return 1===e.compare(r,t)}},L=function(e){return function(r,t){return r===t||e.compare(r,t)>-1?r:t}};var U={equals:function(e,r){return e===r}},R={equals:U.equals,compare:function(e,r){return e<r?-1:e>r?1:0}};const G=(e,r)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return h(r(e.a));case"top":return _(e.error)}},B=e=>C(((r,t)=>{if("bottom"===r.kind&&"bottom"===t.kind)return 0;if("bottom"===r.kind)return-1;if("bottom"===t.kind)return 1;if("top"===r.kind&&"top"===t.kind)return R.compare(r.error,t.error);if("top"===r.kind)return 1;if("top"===t.kind)return-1;if("inner"===r.kind&&"inner"===t.kind)return e.compare(r.a,t.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var N=function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},z=function(e){return"Some"===e._tag},W={_tag:"None"},K=function(e){return{_tag:"Some",value:e}},$=function(e){return"Left"===e._tag},F=(Object.prototype.hasOwnProperty,function(e){return N([e[0]],e.slice(1))});var J=W,Q=K;function H(e){return function(r){return e(r)?Q(r):J}}var V=function(e){return"Left"===e._tag?J:Q(e.right)},Y=function(e){return{equals:function(r,t){return r===t||(te(r)?te(t):!te(t)&&e.equals(r.value,t.value))}}},X=function(e){return{equals:Y(e).equals,compare:function(r,t){return r===t?0:re(r)?re(t)?e.compare(r.value,t.value):1:-1}}},Z=function(e){return function(r){return te(r)?J:Q(e(r.value))}},ee=V,re=z,te=function(e){return"None"===e._tag},ne=function(e){return function(r){return te(r)?e():r.value}};var ie;ie=void 0;var ae=function(e){return e[0]},se=ae;var ce=function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e},oe=function(e){return e.length>0},ue=function(e,r){return e<0||e>=r.length},de=function(e){return function(r){return ce([e],r)}},le=de,fe=function(e){return function(r){return ce(ce([],r),[e])}},pe=fe,ge=F,me=function(e){return oe(e)?K(e):W},he=function(e){return function(r){for(var t=Math.max(0,Math.floor(r)),n=[e(0)],i=1;i<t;i++)n.push(e(i));return n}};var _e=ge;var ve=function(e){return function(r){var t=Math.max(1,e);return t>=r.length?[_e(r),[]]:[M(r.slice(1,t),le(we(r))),r.slice(t)]}},be=function(e){return O((function(r,t){return r.length===t.length&&r.every((function(r,n){return e.equals(r,t[n])}))}))},we=se;var ye={equals:function(e,r){return e===r}},qe={equals:ye.equals,compare:function(e,r){return e<r?-1:e>r?1:0}};var ke=function(e,r){return function(t){for(var n=t.length,i=e,a=0;a<n;a++)i=r(a,i,t[a]);return i}};var Ee=function(e){return 0===e.length},De=oe,Pe=le,Se=pe,Me=function(e,r){return e<=0?[]:he(r)(e)};var Oe=ue,Te=function(e){return function(r){return Oe(e,r)?xe(r):r.slice(0,e)}};var Ie=function(e,r){for(var t=e.length,n=0;n<t&&r(e[n]);n++);return n};var Ce=function(e){return function(r){return e<=0||Ee(r)?xe(r):e>=r.length?[]:r.slice(e,r.length)}};var xe=function(e){return e.slice()},Ae=function(e){return Ee(e)?[]:e.slice().reverse()},je=function(e){return function(r){return r.length<=1?xe(r):r.slice().sort(e.compare)}},Le=function(e,r,t){for(var n=[],i=Math.min(e.length,r.length),a=0;a<i;a++)n[a]=t(e[a],r[a]);return n};var Ue=function(e){return function(r){return e>=1&&De(r)?ve(e)(r):Ee(r)?[xe(r),[]]:[[],xe(r)]}};var Re=function(e){return function(r){return M(r,function(e){return function(r){for(var t=[],n=0;n<r.length;n++)t.push.apply(t,e(n,r[n]));return t}}((function(r,t){return e(t)})))}},Ge=function(e){return function(r){for(var t=[],n=0;n<r.length;n++){var i=e(n,r[n]);z(i)&&t.push(i.value)}return t}},Be=function(e){return Ge((function(r,t){return e(t)}))},Ne=Be(S),ze=ke,We=function(e){var r=Ke(e);return function(e){return r((function(r,t){return e(t)}))}},Ke=function(e){return function(r){return ze(e.of([]),(function(t,n,i){return e.ap(e.map(n,(function(e){return function(r){return M(e,Se(r))}})),r(t,i))}))}},$e=function(e){return C((function(r,t){for(var n=r.length,i=t.length,a=Math.min(n,i),s=0;s<a;s++){var c=e.compare(r[s],t[s]);if(0!==c)return c}return qe.compare(n,i)}))},Fe=function(e){return{_tag:"Left",left:e}},Je=function(e){return{_tag:"Right",right:e}},Qe=function(e,r){return M(e,Ye(r))},He=function(e,r){return M(e,Ze(r))},Ve="Either",Ye=function(e){return function(r){return rr(r)?r:Je(e(r.right))}},Xe=Je,Ze=function(e){return function(r){return rr(r)?r:rr(e)?e:Je(r.right(e.right))}},er={URI:Ve,map:Qe,ap:He,of:Xe},rr=$;var tr=function(e){return-1===e?1:1===e?-1:0};function nr(e,r){return Ne(e.map(r))}function ir(e,r,t,n){const i=(e,r)=>{if(0===e.length)return Ne(r.map((e=>Q({1:e[1],2:t(J,Q(e[2]))}))));if(0===r.length)return Ne(e.map((e=>Q({1:e[1],2:t(Q(e[2]),J)}))));if(e.length>0&&r.length>0&&A(n)(e[0][1],r[0][1])){const[n,...a]=e,s=n[1],c=n[2];return Pe({1:s,2:t(Q(c),J)})(i(a,r))}if(e.length>0&&r.length>0&&j(n)(e[0][1],r[0][1])){const[n,...a]=r,s=n[1],c=n[2];return Pe({1:s,2:t(J,Q(c))})(i(e,a))}if(e.length>0&&r.length>0){const[n,...a]=e,[s,...c]=r,o=n[1],u=n[2],d=s[2];return Pe({1:o,2:t(Q(u),Q(d))})(i(a,c))}throw new Error("Non exhaustive match in mapOption2")},a=x((e=>e[1]))(n),s=(e=>{const r=nr(e,(e=>re(e[2])?Q({1:e[1],2:e[2].value}):J));return 0===r.length?J:Q(r)})(i(je(a)([...e].map((e=>({1:e[0],2:e[1]})))),je(a)([...r].map((e=>({1:e[0],2:e[1]}))))));return Z((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function ar(e,r,t,n){const i=x((e=>e[0]))(n),a=je(i)([...r]).reduceRight(((e,r)=>{if(rr(e)){const n=t(r[1],e.left);return re(n)?Fe(n.value):Je(r[0])}return e}),Fe(e));return ee(a)}function sr(e,r){return new Map([...e].map(r))}function cr(e,r){return new Map([...e].filter(r))}function or(e){return JSON.stringify(ur(e))}function ur(e){switch(e.kind){case"null":return fr.encode(e);case"string":return pr.encode(e);case"number":return gr.encode(e);case"array":return mr.encode(e);case"object":return hr.encode(e)}}function dr(e){return null===e?fr.decode(e):"number"==typeof e?gr.decode(e):"string"==typeof e?pr.decode(e):Array.isArray(e)?mr.decode(e):hr.decode(e)}const lr=(e,r)=>Fe(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${r}`),fr={encode:e=>null,decode:e=>null===e?Je({kind:"null",value:null}):lr(e,"SimpleNull")},pr={encode:e=>e.value,decode:e=>"string"==typeof e?Je(d(e)):lr(e,"SimpleString")},gr={encode:e=>e.value,decode:e=>"number"==typeof e?Je(l(e)):lr(e,"SimpleNumber")},mr={encode:e=>e.value.map(ur),decode:e=>{if(Array.isArray(e)){const r=We(er)(dr)(e);return Ye(f)(r)}return lr(e,"SimpleArray")}},hr={encode:e=>{const r=[...e.value.entries()];return Object.assign({},...Array.from(r,(([e,r])=>({[e]:ur(r)}))))},decode:e=>{if(e&&e.constructor===Object){const r=We(er)((([e,r])=>M(dr(r),Ye((r=>function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e}(e,r))))))(Object.entries(e));return Ye((e=>p(new Map([...e]))))(r)}return lr(e,"SimpleObject")}};function _r(e){return M(e,br,Z(or),ne((()=>"<encode error>")))}function vr(e){return Z(Dr)(function(e){switch(e.state.kind){case"top":return Q(d(e.state.error));case"bottom":return J;case"inner":return br(e.state.a)}}(e))}function br(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return wr(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?Q(f(function(e,r){const t=Z((e=>Pe(e)(r)))(e);return ne((()=>r))(t)}(Z((e=>d(function(e){const r=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=e=>1===e[2]?r(e[1]):r(e[1])+JSON.stringify(e[2]);return e.map(t).join("")}(e))))(e.commands),function(e){const r=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return d(e.error);case"inner":return l(e.a)}},t=e=>nr([yr,qr,e=>M(e,Er,p,Q)],(r=>r(e))),n=e=>nr([yr,kr,e=>M(e,Er,(e=>sr(e,(([e,r])=>[JSON.stringify(e),r]))),p,Q)],(r=>r(e)));switch(e.kind){case"tuple":return e.tuple.map(r);case"stringGroup":return t(e.group);case"numberGroup":return n(e.group)}}(e.payload)))):J}function wr(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||re(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||re(e.limit)}}function yr(e){switch(e.kind){case"unbounded":return J;case"windowed":return Q(d("w"));case"countLimit":return Q(d(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return Q(d(1===e.n?"u":`u${e.n}`))}}function qr(e){switch(e.kind){case"unbounded":return J;case"windowed":return Q(d(re(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return Q(d(re(e.limit)?e.limit.value:""))}}function kr(e){switch(e.kind){case"unbounded":return J;case"windowed":return re(e.key)?Q(l(e.key.value)):Q({kind:"null",value:null});case"countLimit":case"uniqueLimit":return re(e.limit)?Q(l(e.limit.value)):Q({kind:"null",value:null})}}function Er(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function Dr(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?Dr(e.value[0]):f(e.value.map(Dr));case"object":return M(cr(e.value,(([e,r])=>"null"!==r.kind)),(e=>sr(e,(e=>[e[0],Dr(e[1])]))),p);default:return e}}function Pr(e){const r=e=>{if(0===e.length)return{kind:"bottom"};const r=(e=>{if(4!==e.length)return J;const[r,t,n,i]=e;if("string"===r.kind&&"string"===t.kind&&"object"===i.kind){const e=H((e=>Sr(e[1].value)&&Mr(e[2].value)))({1:r,2:t});return Z((e=>({prim:e[1].value,grp:e[2].value,cutoff:n,m:i.value})))(e)}return J})(e);if(re(r)){const{prim:e,grp:t,cutoff:n,m:i}=r.value,a=Or(n,i,Tr(t));return"string"==typeof a?_(a):h(P(Ir(e),a))}const t=(e=>{if(3!==e.length)return J;const[r,t,n]=e;if("string"===r.kind&&"object"===n.kind){const e=H((e=>Mr(e.value)))(r);return Z((e=>({grp:e.value,cutoff:t,m:n.value})))(e)}return J})(e);if(re(t)){const{grp:e,cutoff:r,m:n}=t.value,i=Or(r,n,Tr(e));return"string"==typeof i?_(i):h(P(J,i))}const n=(e=>{if(2!==e.length)return J;const[r,t]=e;if("string"===r.kind&&"object"===t.kind){const e=H((e=>Sr(e.value)))(r);return Z((e=>({prim:e.value,m:t.value})))(e)}return J})(e);if(re(n)){const{prim:e,m:r}=n.value;return h(P(Ir(e),k(v(r))))}const i=(e=>{if(1!==e.length)return J;const[r]=e;return"object"===r.kind?Q({m:r.value}):J})(e);if(re(i)){const{m:e}=i.value;return h(P(J,k(v(e))))}const a=(e=>{if(e.length<1)return J;const[r,...t]=e;if("string"===r.kind){const e=H((e=>Sr(e.value)))(r);return Z((e=>({prim:e.value,rest:t})))(e)}return J})(e);if(re(a)){const{prim:e,rest:r}=a.value;return h(P(Ir(e),xr(r)))}return h(P(J,xr(e)))},t=e=>"array"===e.kind?Re(t)(e.value):[e];return"null"===e.kind?D({kind:"bottom"}):D(r(t(e)))}function Sr(e){const r=e.split("");if(!0==(0===r.length))return!1;{const[e,...t]=r;return-1!=="pmvn".indexOf(e)&&t.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}function Mr(e){const r=e.split("");switch(!0){case 0===r.length:return!1;case"w"===r[0]&&void 0===r[1]:return!0;default:{const[e,...t]=r;return-1!=="ux".indexOf(e)&&-1===t.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function Or(e,r,t){switch(e.kind){case"string":return k(t({1:Q(e.value),2:r}));case"number":case"null":return q(t({1:"null"===e.kind?J:Q(e.value),2:cr(sr(r,(([e,r])=>[Number(e),r])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function Tr(e){const r=e=>r=>y(r[2],r[1],e),t=e=>r=>w(r[2],r[1],e),n=e.split("");switch(!0){case"w"===n[0]&&void 0===n[1]:return e=>b(e[2],e[1]);case"u"===n[0]&&void 0===n[1]:return r(1);case"u"===n[0]&&void 0!==n[1]:return r(parseInt(n.slice(1).join("")));case"x"===n[0]&&void 0===n[1]:return t(1);case"x"===n[0]&&void 0!==n[1]:return t(parseInt(n.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Ir(e){return Z(g)(me(Cr(e,(e=>{const r=e.split("");if(0===r.length)return J;const[t,...n]=r,i=(e=>{switch(e){case"p":return Q("add");case"m":return Q("mul");case"v":return Q("max");case"n":return Q("min");default:return J}})(t);return Z((e=>{const{init:r,rest:t}=(i=e=>{return"number"==typeof(r=parseInt(e))&&isFinite(r)&&Math.floor(r)===r;var r},function(e){var r=Ue(Ie(e,i))(e);return{init:r[0],rest:r[1]}})(n);var i;return{1:{1:e,2:0===r.length?1:parseInt(r.join(""))},2:t.join("")}}))(i)}))))}function Cr(e,r){const t=r(e);return ne((()=>[]))(Z((e=>[e[1]].concat(Cr(e[2],r))))(t))}function xr(e){return E(e.map(Ar))}function Ar(e){switch(e.kind){case"number":return h(e.value);case"string":return _(e.value);case"null":return{kind:"bottom"};case"object":return _("{object}");case"array":return _("{array}")}}const jr={strategy:(e,r,t)=>n=>{if(te(t))return r;if("delta"===e&&te(r))return J;if(te(r))return t;if(re(r)&&re(t))return n(r.value,t.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,r,t,n,i,a)=>{const s=$e(B(a));if("append"===e&&"add"===r)return Le(t,n,Wr("append",i.plus));if("append"===e&&"mul"===r)return Le(t,n,Wr("append",i.times));if("append"===e&&"max"===r)return L(s)(t,n);if("join"===e&&"add"===r)return Le(t,n,Wr("join",L(a)));if("join"===e&&"mul"===r)return Le(t,n,Wr("join",L(a)));if("join"===e&&"max"===r)return L(s)(t,n);if("min"===r)return jr.operation(e,"max",t,n,i,function(e){return C(((r,t)=>tr(e.compare(r,t))))}(a));if("delta"===e&&"max"===r)return j(s)(t,n)?t:n.map(m);if("delta"===e)return Le(t,n,((e,r)=>j(B(a))(e,r)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,r,t,n)=>{if("delta"===e&&"top"===t.kind&&"top"===n.kind)return j(R)(t.error,n.error)?_(t.error):{kind:"bottom"};if("delta"===e&&"bottom"===n.kind)return t;if("delta"===e&&"bottom"===t.kind)return{kind:"bottom"};if("top"===t.kind&&"top"===n.kind)return _(L(R)(t.error,n.error));if("top"===t.kind)return t;if("top"===n.kind)return n;if("inner"===t.kind&&"inner"===n.kind)return r(t.a,n.a);if("bottom"===t.kind)return n;if("bottom"===n.kind)return t;throw new Error("Non exhaustive match in extend")}},Lr={plus:(e,r)=>e+r,times:(e,r)=>e*r};function Ur(e,r,t,n){if("unbounded"===e.kind&&"unbounded"===r.kind){const i=e.group,a=r.group;return ne(m)(Z((e=>h(v(e))))(ir(i,a,t,n)))}if("windowed"===e.kind&&"windowed"===r.kind){const i=e.key,a=e.group,s=r.key,c=r.group,o=L(X(n))(i,s);return ne(m)(Z((e=>h(b(e,o))))(ir(a,c,t,n)))}if("countLimit"===e.kind&&"countLimit"===r.kind){const i=e.n,a=r.n;if(i===a){const a=e.limit,s=e.group,c=r.limit,o=r.group,u=L(X(n))(a,c);return ne(m)(Z((e=>h(w(e,u,i))))(ir(s,o,t,n)))}return _("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===r.kind){const i=e.n,a=r.n;if(i===a){const a=e.limit,s=e.group,c=r.limit,o=r.group,u=L(X(n))(a,c);return ne(m)(Z((e=>h(y(e,u,i))))(ir(s,o,t,n)))}return _("Non matching counts")}return _("Non matching group types")}function Rr(e,r,t,n,i,a){const s=(e,r)=>({1:Te(e)(r).concat(Me(Math.max(0,e-r.length),m)),2:Ce(e)(r)}),c=(r,t,n)=>{if(0===r.length)return jr.operation(e,"max",t,n,i,a);if(r.length>0){const[o,...u]=r,d=s(o[2],t),l=d[1],f=d[2],p=s(o[2],n),g=p[1],m=p[2];return jr.operation(e,o[1],l,g,i,a).concat(c(u,f,m))}throw new Error("Non exhaustive match in recurse")};return Ae((o=e=>"bottom"===e.kind,function(e){return e.slice(Ie(e,o))})(Ae(c(r,t,n))));var o}function Gr(e,r,t){return ne(u)(Br(e,J)(r,t))}function Br(e,r){const t=r=>(t,n)=>jr.strategy(e,t,n)(Br(e,r)),n=(n,i)=>{if(Y(be(T({1:U,2:ye}))).equals(n.commands,i.commands)){const a=((r,n,i)=>{if("stringGroup"===n.kind&&"stringGroup"===i.kind){const e=Ur(n.group,i.group,t(r),R);return G(e,(e=>k(zr(e,R))))}if("numberGroup"===n.kind&&"numberGroup"===i.kind){const e=Ur(n.group,i.group,t(r),qe);return G(e,(e=>q(zr(e,qe))))}if("tuple"===n.kind&&"tuple"===i.kind){const t=re(r)?r.value:[];return h(E(Rr(e,t,n.tuple,i.tuple,Lr,qe)))}throw new Error(`Non matching payload. Got ${n.kind} and ${i.kind}`)})(te(n.commands)?r:n.commands,n.payload,i.payload);return G(a,(e=>P(n.commands,e)))}throw new Error(`Non matching primitive strings. Got ${_r(n)} and ${_r(i)}`)};return(r,t)=>vr(D(jr.extend(e,n,Pr(r).state,Pr(t).state)))}function Nr(e,r,t){const n=Z((r=>cr(e,(([e,n])=>{return(i=t,function(e,r){return-1!==i.compare(e,r)})(e,r);var i}))))(r);return ne((()=>e))(n)}function zr(e,r){switch(e.kind){case"unbounded":return e;case"windowed":return te(e.key)?e:b(Nr(e.group,e.key,r),e.key);case"countLimit":{const t=e.limit,n=e.n,i=e.group,a=(e,r)=>r<=1?J:Q(r-1),s=ar(n,i,a,r),c=L(X(r))(t,s);return w(Nr(i,c,r),c,n)}case"uniqueLimit":{const t=e.limit,n=e.n,i=e.group,a=(e,r)=>{if("object"===e.kind){const t=[...e.value.keys(),...r.keys()],i=new Set(t);return i.size>=n?J:Q(i)}return J},s=ar(new Set,i,a,r),c=L(X(r))(t,s);return y(Nr(i,c,r),c,n)}}}function Wr(e,r){return(t,n)=>jr.extend(e,((e,t)=>h(r(e,t))),t,n)}var Kr=t(6567),$r=t(64),Fr=t(6013),Jr=t(7545),Qr=t(7121);class Hr{constructor(e,r,t){this.externalData=e,this.localQueries=r,this.externalQueries=t,this.queryCodesAsList=[],this.queryCodesAsMap={};const n=this.externalData.getExternalJsonData($r.mL)||[],i=(0,Kr.fS)((()=>[]))((0,Kr.Y3)((()=>n.filter((e=>(0,Qr.UC)(e,this.localQueries,this.externalQueries))))));this.add(i)}has(e){return e in this.queryCodesAsMap}add(e){return(0,i.zG)(e.forEach((e=>this.queryCodesAsMap[e]=!0)),(e=>this.updateSegmentsList()))}remove(e){return(0,i.zG)(e.forEach((e=>delete this.queryCodesAsMap[e])),(e=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getStdAsList(){return this.queryCodesAsList.filter((e=>e>=1e7))}getAllAsMap(){return this.queryCodesAsMap}getUpdates(e){const r=[],t=[];return Object.entries(e).forEach((([e,n])=>{const i=parseInt(e),a=(null==n?void 0:n.result)||{result:!1},s=!0===(null==a?void 0:a.result)&&!(i in this.queryCodesAsMap),c=!1===(null==a?void 0:a.result)&&i in this.queryCodesAsMap;s?r.push(i):c&&t.push(i)})),{entered:r,exited:t}}flush(){this.externalData.setExternalJsonData($r.mL,this.getAllAsList())}reset(){this.externalData.removeExternalData($r.mL),this.queryCodesAsList=[],this.queryCodesAsMap={}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((e=>parseInt(e)))}}const Vr="bootstrap",Yr="process",Xr="processTransitions",Zr="updateEnvironment",et="updateExternalState",rt="updateLAL",tt="updateTPD";const nt="permutive:query:changed",it="internal_query_states",at="external_query_states",st=e=>class extends e{constructor(...e){super(...e),this.isWorkerReady=!1,this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={},this.userSegments=new Hr(this.externalData,this.queryMetadata,this.externalQueries),this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.hasNewOrModifiedQueries=!1,this.makeDebouncedProcessTransitions()}makeStateMaps(){const e=this.permutiveData.getData(it)||{},r=this.permutiveData.getData(at)||{},t=Object.keys(this.queryMetadata),n=Object.keys(e);this.hasNewOrModifiedQueries=t.length!==n.length||t.filter((r=>{var t;return this.queryMetadata[r]!==(null===(t=e[r])||void 0===t?void 0:t.checksum)})).length>0,this.logger.debug("QueryManager has new or modified queries",this.hasNewOrModifiedQueries);const a=this.hasNewOrModifiedQueries?(0,Fr.fl)(e,(r=>{var t;return(null===(t=e[r])||void 0===t?void 0:t.checksum)===this.queryMetadata[r]})):e;this.extStateMap=this.hasNewOrModifiedQueries?(0,i.zG)((0,Fr.fl)(r,(e=>e in a)),(e=>(this.permutiveData.setData(at,e),e))):r,this.stateMap={value:a,promise:Promise.resolve(a)};this.permutiveData.getData("query_states")&&this.permutiveData.setData("query_states",null)}makeDebouncedProcessTransitions(){this.scheduler=new Jr.b(this.transitionDebounceTime,this.transitionDebounceMaxTime);this.debouncedProcessTransitions=this.scheduler.scheduleAccumulated((e=>this.processTransitions(e)),{concat:(e,r)=>e.concat(r),empty:[]})}makeMessage(e,r,t){return{type:e,payload:(0,i.bc)(this.queryMetadata,this.extStateMap,...r),stateMap:t,userId:this.userId.get()}}trackTransition(e,r){const t=$r.ED?this.customProperties.getCustomProps():{},n=Object.assign(Object.assign(Object.assign({},t),{segment_number:r}),{});e?this.segmentEntryQueryCodes.add(r):this.segmentExitQueryCodes.add(r),this.permutive.track(e?"SegmentEntry":"SegmentExit",n)}trackSegmentsTransition(e,r){e.forEach((e=>{this.trackTransition(!0,e),this.messages.emit(nt,{queryCode:e,result:{result:!0}})})),r.forEach((e=>{this.trackTransition(!1,e),this.messages.emit(nt,{queryCode:e,result:{result:!1}})}))}updateUserSegments(e,r){this.userSegments.add(e),this.userSegments.remove(r),this.userSegments.flush()}onStateChangeReady(e){const{entered:r,exited:t}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(r,t),this.updateUserSegments(r,t),this.logger.debug("QM: Updating cohort and query state cache",e),this.permutiveData.setData(it,e);const n=r.length>0||t.length>0;return(0,i.zG)(n,(e=>e?this.messages.emit("permutive:segments:updated"):{}),(e=>({segmentsEntered:new Set(r),segmentsExited:new Set(t)})))}onStateChange(e,r){return(0,i.zG)(r.length>0?this.network.error(`QL error(s). Got ${r.join("; ")}`,this.userId.get()):{},(r=>this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),e)),(e=>this.isWorkerReady?[e,this.onStateChangeReady(e)]:[e,{segmentsEntered:new Set,segmentsExited:new Set}]))}postMessage(e,r){const t=e=>this.userId.get()===e.userId?e:{diff:{},errors:[]};return new Promise((n=>{this.stateMap.promise=this.stateMap.promise.then((0,i.ls)((t=>this.makeMessage(e,r,t)),(e=>this.processMessage(e)))).then((0,i.ls)(t,(({diff:e,errors:r})=>{const[t,i]=this.onStateChange(e,r);return n([e,i]),t}))).catch((e=>(0,i.zG)(this.network.error(`Error during query execution. Got ${e}`,this.userId.get()),(e=>n([{},{segmentsEntered:new Set,segmentsExited:new Set}])),(e=>this.stateMap.value))))}))}processTransitions(e){return this.postMessage(Xr,[e])}bootstrap(e){return this.postMessage(Vr,[{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this.sessionManager.getSessionId(),viewId:this.viewId.get(),lookalikeModels:{}},e])}updateEnvironment(e){return this.postMessage(Zr,[e])}updateLAL(e){return this.postMessage(rt,[e])}updateTPD(e){return this.postMessage(tt,[e])}process(e,r){return(0,Qr.AG)(e)?this.debouncedProcessTransitions([e]):this.processStandard([e],r)}processStandard(e,r){return(0,o.mG)(this,void 0,void 0,(function*(){const t=yield this.postMessage(Yr,[e]);return r&&this.setAsRealTimeifNeeded(e),t}))}updateExternalState(e){const r=(0,Fr.b0)(e,((e,r)=>{const t=this.queryMetadata[e];return t&&r[t]?(0,Kr.Uo)(dr(r[t])):Kr.YP})),t=(0,Fr.b0)(this.extStateMap,((e,r)=>(0,Kr.Uo)(dr(r)))),n=(e,r,t)=>(0,i.zG)((0,Kr.Y3)((()=>function(e,r){return Gr("join",e,r)}(e,r))),(0,Kr.fS)((()=>(this.network.error(`Failed to join external state for query: ${t}. Had ${or(r)}, received ${or(e)}}`,this.userId.get()),r)))),a=(0,Fr.b0)(Object.assign(Object.assign({},t),r),((e,r)=>t[e]?(0,Kr.G)(ur(n(r,t[e],e))):(0,Kr.G)(ur(r))));return this.permutiveData.setData(at,a),this.extStateMap=a,this.postMessage(et,[])}reset(){this.userSegments.reset(),this.permutiveData.setData(it,{}),this.permutiveData.setData(at,{}),this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}updateExternalSegments(e){const r={};for(const t of Object.keys(e)){const n=parseInt(t);!isNaN(n)&&this.externalQueries.has(n)&&(r[n]={result:{result:e[n]}})}const{entered:t,exited:n}=this.userSegments.getUpdates(r);this.trackSegmentsTransition(t,n),this.updateUserSegments(t,n);(t.length>0||n.length>0)&&this.messages.emit("permutive:segments:updated")}setAsRealTimeifNeeded(e){return!this.realtime.isRealtime()&&e.filter((e=>"Pageview"===e.name)).length>0?this.realtime.setAsRealtime(this.userSegments.getAllAsList().length):void 0}};function ct(){return(0,n.h)(new c)}class ot{constructor(e){this.queryMetadata={24318:"0c8b70cdb7",24713:"22911a2329",26109:"5c7f630772",26110:"7d307948b5",26111:"f87f6ae9be",26333:"3e53f4ed9a",26368:"a9e319118e",26373:"1fac3ddf5b",26499:"f69d763b52",26745:"cfbba9b0f2",27134:"449a3f9a5d",27603:"6447fbf8d2",28416:"1e9dabab01",28418:"446e684142",28419:"34b85d053e",28420:"36c7e3e1ae",31722:"a1675bc488",31723:"da38fc20c6",31912:"e5c1d6ea02",32018:"6ddcb04fc1",32072:"bff89933f4",32073:"623ed1088a",32074:"04e06f44e6",32075:"04d73b2773",32126:"9d795d0655",32127:"9c0d52b682",32296:"f431fc8587",32298:"fc5193de40",32304:"66d46cf15c",32305:"44bbfc053f",32306:"de338e6f67",32307:"b30db7a4f0",32308:"5e4d9b716d",32309:"35a9198df6",32310:"869dff64e3",32311:"643e916539",32312:"774ac8efbc",32350:"91eda4c772",32355:"090d0d0fdd",32360:"fe4109b6da",32361:"1c8112dc4a",32363:"63f71cd6a8",32364:"3d0df651c3",32365:"d4bb8bd942",32367:"5c0a999aef",32370:"3c5471728e",32372:"276448923f",32380:"7de7e03a45",32384:"0196b4cc51",32385:"ddccb38f8c",32404:"ad0f6ed318",32406:"70904f8ecc",32408:"27475f953e",32410:"813a7a8a75",32411:"fc87a88104",32412:"dbed7ce2e8",32413:"e1c66e7ad8",32414:"cb30eeef7d",32557:"2a9090ff40",32761:"bf2a282c7c",33219:"e7b95d4b5a",33220:"c46864c2eb",33221:"2d37dfade3",33222:"9bfafcba4f",33223:"e380e2d6c5",35542:"144ee8cbad",35543:"c9c3f5a4b7",35767:"b331d0bf53",35768:"740b04bb66",35769:"f26154113b",35770:"7f98cf2999",35771:"f588ff0eac",35772:"f9a29e81b2",37975:"a2f6734ed9",40825:"5ef19f32c9",42111:"b1291da13c",42113:"d160f45c40",42389:"79ad697511",42390:"1286f7a8fe",42395:"7fb53d00e4",42397:"c059bea652",46832:"8d3d8185e5",46833:"3ace92dbcb",47190:"9bac7b9dbf",47191:"4257534175",47192:"4bc4041678",49022:"3afc94cb22",51062:"bb7cbe33b0",52236:"18a9ed5632",52419:"c0268c3530",54300:"920b8b3ca8",54402:"93f9f65789",54875:"1dfc9b1cdb",54880:"6c1e46728c",54881:"7ffa66e8f5",54882:"ef13f99b59",58365:"0177b30b2d",58367:"7405013393",59438:"d8e4d66b5e",59442:"a419484fb1",59443:"5c53fe0414",61267:"d2b7aa0565",61271:"4ddcd59d72",63038:"7e92d43b66",63039:"3ff5df46a3",63040:"f698233ff2",63042:"60276ae954",63118:"7f16134902",63189:"8bbe14084d",63190:"9cb92abe68",63526:"478d0d32d2",63527:"bfb1e3535e",63528:"1c13c2879e",63529:"7a9ed78793",63530:"d94e64b32a",63531:"fa4df6434c",63533:"1339ed238c",63534:"15f1f43f67",63535:"85632d373a",63536:"e97b28e2f2",63537:"e6c3a1a6cb",63538:"02bec8c3b0",63539:"cd662acba8",63540:"a99a2a264f",63541:"f848eb267b",63542:"dece47c233",64136:"01bf10f19b",64455:"f4598ee72e",64481:"6f43d0792b",64483:"04b563618d",66793:"0f41dab24b",67583:"d14f02a13a",67585:"480c5bf0c2",67587:"e58c20bf66",67589:"d5f926aecd",67591:"3f28917466",67593:"7867991f98",67594:"0324ee4478",67595:"137035d448",67596:"5e398c4ee1",69186:"5750b8c9d4",69462:"f4881afde0",69463:"4f1900c1ee",69466:"d9ff731169",69468:"e4b1ed66da",69478:"0de914aa89",70044:"6347cf9332",70049:"ed5fff2e44",70051:"225533e992",70052:"e2475f6eaf",70054:"7ce43eb398",70055:"ca99f8dce3",70056:"ab585d2f46",70057:"c6d540ff43",70058:"156809a0af",70059:"d256fa98bb",70060:"99828d5fd9",71267:"36b315aae9",72657:"5cb409ed50",72658:"9a89ab847b",73522:"654f30dbfa",73540:"18afbde806",73541:"8c249c8b4a",73542:"c7b33e1d64",73543:"e2673a4ab2",73607:"daa6d72812",73608:"ab2e1b25d5",73609:"e84e4d071f",73610:"2e4741b37a",73611:"b462e444e5",73612:"5fa697fbed",73613:"4626a44899",73614:"1f3aafe358",73615:"f6b5db000b",73616:"391ad341d2",73617:"e1fd7abcc7",73620:"929340d046",73623:"dfb0bd87d5",73625:"fdb532fdd2",73626:"bacc903b7d",73627:"8bcd9baf0d",73632:"bd83e5ff87",73634:"b0a4a5874a",73635:"1311574a03",73636:"e90cecdd26",73638:"8d2b533156",73640:"82a79b77a8",73816:"9c6d8ccd0a",73820:"1a54e6cb8f",73821:"bd956dffdd",73822:"0ae689139f",73823:"0a00792418",73824:"7acec9a2e8",73827:"5e2e9532c6",73829:"c1e0adbed2",73831:"1248a332a0",73834:"dc0246ecac",73841:"2a3276aa1d",73842:"96c29bba90",73843:"e357dd95a1",73844:"dd3168deb0",73845:"b969e9b9a3",73846:"6596ca1392",73847:"174fc7b82e",73848:"9917f1c558",73849:"a95e1a07a3",73850:"f776c6991a",74324:"abf8182fb8",74366:"67910330fd",74376:"5d83f6a287",74377:"d284ab2280",74378:"60768797d4",74379:"e330fb139b",74380:"95b78ece58",74381:"70e5be604a",74382:"c53b68ed46",74383:"fffbea5525",74385:"240254fd35",74386:"a6994d4590",74387:"b63482197e",74388:"79b0f09205",74389:"52736db3ea",74390:"c3c256d97b",74391:"503ef90ac5",74392:"40a8bf3e7c",74393:"681ca3e7c1",74394:"c573f43f42",74395:"57fbc2c759",74396:"15f8a532a8",74397:"e47da028e5",74825:"aba894c9af",74826:"cc1731619d",74828:"c833674148",74829:"6fa4de882d",74830:"8d43202b3e",74831:"9f48732d87",74833:"b332f15938",74834:"c62bad517e",74835:"62761154f9",74836:"022c00eaf6",74837:"9b29629a07",74855:"7fe57d7584",74856:"e33d67cd3e",74857:"768b0620a0",74858:"f21af2f5a1",75149:"b082d14a99",75151:"0186984fc7",75199:"5fc2f5bb32",75469:"4561dfe895",76174:"c70e6f20fc",76363:"641c1843ed",76450:"dc0df1939d",77168:"0cc797672a",77169:"81945208b0",77412:"643eee1db2",77661:"2617511b60",77662:"3917ae3ef9",77728:"70ca9161ad",79422:"2b61069f7f",79569:"605a5b97ed",79582:"8770f23a26",79583:"0a6fb9e014",79584:"9431233f82",80517:"b6fed59f28",80547:"2eeaa832ad",81095:"f527afd4b1",81196:"e888d33573",81326:"bfff92e4f6",81403:"b2c6dac55b",81424:"8b3bc5f378",81425:"481c8da087",81426:"c3266b7788",81427:"b49ae4272b",81428:"045284d4e7",81429:"3cb96d2450",81430:"cb125d87b8",81431:"1f29369d65",81432:"ac1cc0d056",81433:"c287090e08",81434:"28b2ed1e40",81435:"f10230e31e",81443:"03e40738cf",81444:"79a90fa927",81445:"af5aab3a05",81446:"06d96a7f52",81447:"e087ca53c6",81448:"ceeb5ed85a",81450:"bc3a76f933",81451:"36bbd9b6e2",81452:"99e232608b",81453:"c7a19968ea",81454:"e8faa627fd",81458:"99bb9782e9",81459:"5ef958ab08",81460:"1fe5fcb8d2",81461:"49907cc44d",81462:"8559d516a4",81464:"8efdfe3e27",81465:"1cd07a9388",81466:"f6496a63d5",81467:"be8bc556b0",81468:"802a3b0aa2",81469:"83f67b197e",81470:"37e4954a5b",81471:"8d09176aab",81472:"a0c66c5e4d",81473:"0d300e366e",81474:"87a50b27e2",81475:"af91c5149f",81476:"ac632767dc",81477:"625d3317bb",81478:"c850589227",81479:"4bb3de6fcd",81480:"f1f671bf47",81527:"9150205d32",81760:"d30c667e85",81767:"047f242bc5",81848:"0aaf91c925",81881:"43d02b974b",81882:"874485eb46",81905:"d7b641eb4f",81906:"ae8002cfdd",81982:"7b0e4ebf54",82014:"a179b1543f",82044:"f98e66cd25",82076:"94f1b13ad3",82081:"2133dd3b5b",82311:"64fafc1183",83139:"fb1cabc69c",83140:"8579652bbb",83603:"555618be80",83688:"6c9ff4bd2c",83890:"74461ca015",83961:"db1c2e563b",84090:"a944516a6d",84174:"9101840d16",84209:"426a7c0e5b",84369:"fa577e1590",84430:"373aaf314f",84452:"6ac917b857",84472:"a70ae06fe7",84474:"9eb6c37513",84609:"def12abb03",84639:"feb4d8f4c4",84805:"f3d517ffca",84810:"0a225ff52a",84922:"829e5907eb",84923:"608ff8684f",84924:"a68187d85e",84925:"bc4e8b9e7c",84926:"21dc5abf3a",84927:"da050edbd3",84928:"ea96b09c8c",84931:"8ba8ae663b",84936:"2b00b06f14",85099:"44526a7835",85529:"5e6b3977a3",85671:"3db515e55a",85672:"040049b928",85674:"1918edb594",85972:"c8755d7290",85973:"25d8ca6be5",85974:"c6ed966766",85975:"a12c64c769",85994:"c648e042b9",86038:"75dbf45e72",86109:"ea84d9d5b8",86155:"61f6122bee",87084:"bf1011b1ab",87221:"a87db0e82f",87499:"60a644a08b",87825:"239216d7fb",87827:"c7484c49ca",87828:"fc5a0e7947",87829:"fb3edc89cb",87831:"8106982b6f",87832:"e708d5f94c",87833:"a634c8a92c",87834:"5a61349234",87837:"2977c877af",87838:"ed90473133",87839:"d05b715ef4",87841:"8d3cc577c3",87842:"40ba018a94",87843:"fee974fa60",87844:"4720be8754",87845:"df0a991de2",87846:"f9e41ec8c8",87847:"11fe75b6ef",87848:"76d9efe1cb",87849:"cce8f0094a",87903:"a9c0529545",88011:"befd0676fb",88107:"fdce6b3437",88187:"771586a999",88191:"12e0346a54",88370:"bb6c0906e3",88372:"fde85b9dc1",88386:"f0ba34b87b",88577:"fdfaaf2079",88590:"9daa76acee",88592:"8f56e999b3",88593:"ff25479c00",88609:"be49a4bac5",88881:"a44c948913",88882:"688d2792e2",88883:"6516425b20",89064:"a5eedbcfb5",89065:"29159688f3",89066:"6c9e93f876",89067:"60098b7bd7",89068:"c9bd5e85d3",89069:"84905d87ee",89070:"3bc835daed",89071:"c7e9a9e5cb",89072:"12cdbad036",89074:"b5df275380",89179:"a259e6c9f5",90056:"7587c4bab1",90062:"48287c07d9",90178:"8b4f72c7f6",90429:"9074f3b18a",90430:"aee9849c15",90431:"a39b5d74ef",90432:"0224039f49",90433:"1b3d17a72f",90434:"27dc9cb01a",90435:"b03719a42a",90436:"4f5d157bdd",90437:"d721d88b53",90438:"61fa79bfc3",90439:"de25fafd58",90440:"58e5097a62",90441:"e8d8a12490",90442:"26952287ac",90443:"f645feac1e",90444:"357db4e94a",90445:"16a88f4c86",90446:"7ac591508f",90447:"727f10fb5c",90448:"07da83597f",90603:"5b7e043d94",90604:"7f3c07148f",90605:"862397bebd",90606:"4e65555fdd",90607:"d12649234b",90608:"2a5f81f9b2",90609:"124eab2fa5",90709:"c05eeb5d68",90851:"53fa2a598e",90852:"9dd81b65c5",91171:"57f21629de",91332:"3daf5a1373",91341:"6bdc758eb5",91350:"744b134f1d",91351:"fee71fff1c",91352:"253e4e3ad5",91353:"2a03469196",91354:"59d44cdcf1",91356:"520ba6084a",91359:"ae3ee21e76",91361:"47aca1d3e3",91362:"a046d17b16",91364:"7d38167df5",91365:"1c2e6f8d5c",91366:"bd858e420e",91368:"7c2ff6f817",91371:"453b6c507c",91372:"33acc31f89",91373:"9c9cbb0d55",91374:"09cf70860d",91375:"9a187556c4",91376:"dc2d8e10e4",91474:"3250d5eb22",91475:"a718a6d5a6",91476:"d6afd38598",91658:"4484f21364",91864:"32ac7c26a9",91866:"1c175e74f9",91867:"7236275c0f",91868:"a3d6e240f3",91928:"6b30a185de",91931:"7391a4bae0",91932:"9db89a6f05",91933:"5f60969d09",91934:"2aec482d1a",91937:"e064e01802",91938:"4b7ac44d2f",91939:"186359c036",91940:"f14ea73e66",91941:"5dc35ac1d7",91972:"43e74f7f3c",91997:"5f2caf7e83",92059:"19e8804457",92060:"aefbcbed76",92061:"8a43931a78",92062:"4304caf9a0",92063:"1373a5291a",92064:"1b526567f6",92065:"0e740af044",92066:"f506e4639b",92067:"b9f3ed8bca",92068:"4e30c7204e",92069:"572c4e4e69",92070:"ab5ba8bf9c",92071:"988ebc454d",92072:"7bdf64eaad",92073:"715cba030d",92074:"2fc198afd4",92075:"5d446922be",92076:"087bc5fd49",92079:"8813beaa10",92080:"3ef5957da1",92081:"0d32491c4e",92082:"b8abaefa8c",92083:"ea7513b898",92084:"04e9da5071",92248:"902a86aa9d",92522:"364c11294d",92538:"100d0c1824",92541:"aa8aafe229",92545:"45d08359e8",92559:"3293ee0172",92586:"5bc70a5d18",92587:"c1b1ab898e",92588:"7ba54ab8bb",92589:"95b67d1165",92590:"5b42115828",92591:"c2719e2524",92592:"3f5b643e93",92593:"d6c30ad016",92594:"8393596dcb",92595:"be9289b783",92596:"f3f15b67e5",92597:"a4bbed163b",92598:"e8659d5f33",92811:"3715668262",92985:"1143094569",92986:"3e155fdf7d",92987:"d6d420b95d",92988:"218b04993d",92989:"c0b6055f8d",92990:"ca1245406f",92991:"6373ffbe52",92992:"48989accbd",92993:"2d58349c40",92994:"a41a28e191",92995:"98230be320",92996:"52df20159d",92997:"6f74164695",92998:"65089ede0d",92999:"4e559d07c7",93330:"01fea75e85",94762:"55a286dc7c",94766:"b3bada4450",94774:"b6d3d14945",94839:"c8dba3011e",94900:"ae19f3bc01",95231:"c09d730bf4",95313:"4aa5ea7d53",95385:"7fafa22561",95386:"48ced90c5a",95387:"08063efbef",95389:"88c0e82d88",95390:"8acf7f13d8",95391:"b41bb2ab74",95392:"c6a9e240cd",95394:"e8e2300531",95395:"cb41f7ee5e",95396:"220df843e8",95397:"25eacf7a58",95398:"41542e97b2",95399:"b5c27e3adf",95400:"c507464e20",95401:"6893b61f41",95402:"3da50f0607",95403:"3a21c83657",95404:"a921ef5aa6",95405:"ab2424ae28",95407:"b786ec59ce",95410:"04119a87f7",95411:"a836c2c79d",95412:"247e6c0eb5",95413:"fa3ced9db1",95414:"0587705505",95415:"cfa391f281",95416:"fbd3cc1cd4",95423:"7b5a9b580b",95424:"cfa81cf238",95425:"e67fb32f08",95426:"9710c3d197",95428:"a0da57aa78",95429:"a71b23a448",95430:"d96912ccd5",95431:"bc15f881c4",95496:"a16e3e6029",95497:"7dc2f8caea",95498:"15b0098c8e",95500:"4acb2c7ecc",95502:"d6c4038148",95503:"4c3882e81d",95504:"90da603836",95505:"7d175cff2b",95507:"3a403546b8",95508:"9ebdb52d60",95509:"3558fdc7d3",95510:"e86c3f9b4e",95579:"81e5bdac88",95580:"3129f2540f",95581:"fda068d14d",95582:"659883cbad",95583:"58a117d97f",95584:"6ae0e0f5df",95585:"8967d7783f",95586:"f7fbc8ee6e",95589:"6df3092a8a",95593:"fffc122780",95594:"6dd4f21d97",95595:"067fa11de1",95598:"57db6d0d2c",95600:"dd7ca9079e",95601:"6b89184356",95603:"7d352d069c",95608:"b357740b74",95609:"8150ed5002",95614:"4b8b6dff3c",95616:"da0a876ee8",95621:"2ba751ebbc",95622:"00303a8bda",95623:"015c89d60c",95624:"bc8733cc21",96442:"0271842b61",96443:"c4f80d3573",96444:"f8c6c9b7c8",96445:"41714da133",96446:"659c106f43",96447:"143f4074fe",96448:"34b4af1ac5",96449:"fa6f353742",96450:"5b5254026a",96451:"703584faee",96452:"13a4f88b31",96711:"0bb7ac3557",96712:"54cc5c28ec",96713:"304cae8523",96714:"48ae31957e",96715:"6d0ad518d6",96716:"c3dcf127ad",96717:"717b06c73c",96718:"d3e82f179e",96719:"c7c1290e7c",96720:"b89e9cea35",96721:"7277bcd86e",96739:"0046b7f478",97707:"2c6fb1d846",97811:"4d7c8713ed",97812:"f8fec04255",97813:"1b97253f8d",97814:"c80c193186",97815:"19ecbf3ab0",97816:"19d38b2bbe",97817:"e4da02c116",97818:"3c019a0b9e",97819:"de8998b57d",97820:"0f81c087fa",97821:"e43b452114",98150:"8f851dc31e",98522:"559ed8d423",98525:"78194d0eb3",98526:"d017da4ae0",99088:"6a0d33d7b8",99477:"ebf966d34d",99478:"3be2d927c4",99479:"b44e0c610c",99480:"ba0ac06501",99483:"af2651b313",99484:"0b6e5e1aaa",99485:"2efb692989",99486:"efd216e040",99487:"05d2c670cf",99488:"f016edef6b",99489:"702dccb264",99582:"2014c1331e",99583:"55771ca467",99584:"1833a85efa",99585:"f91e3d075c",99586:"87bf4ba756",99587:"71c8be876f",99588:"f3abff3535",99589:"88b2c7daca",99592:"a7708dad4c",99593:"fddc12ce4a",99594:"c402cf3c0b",99596:"b12169ae08",99597:"551a1b1ac7",99598:"25e88b143b",99599:"b4ef92742a",99600:"9ef6e3dc68",99601:"7ae0ea776d",99602:"a8de2d236d",99603:"2199057101",99604:"961236ea77",100112:"fd77061c69",100113:"9c2fb34b00",100114:"37141b52f2",100287:"68c628cb23",100463:"07d53f26e1",100465:"b74d17dc57",100466:"4c0de8ffa4",100471:"3b2396430a",100472:"caa21363cd",100473:"8318406d0a",100801:"c2db91752b",100802:"12b6087d7e",100893:"5f443ff785",100894:"4ef86cd461",101149:"ba8769c11e",101368:"c20145ec13",101560:"eacaad649a",101580:"9886b6d9ba",102569:"269ff6532d",103502:"0d9c310580",103509:"8f2bdcadbd",103510:"4483178ef2",104053:"46e28d4ab2",104054:"dbbb7f176e",104055:"f14ccba3d0",104056:"0bf529e1e3",104057:"4e966d4f4f",104071:"e901e74bde",104078:"67ac38796f",104400:"2d701cf073",104401:"0ef39970d1",104725:"7ab13b7f37",105215:"19eb640daa",105232:"1caacf2c00",105236:"76562f9919",105237:"005701ae52",106190:"03a0111055",106491:"4baa744c1f",106623:"63dcd93df7",108551:"8716c6e2b0",109010:"252a315a06",109062:"12d2cfb895",109212:"6ceb792fc8",109215:"b1b4c9e849",109216:"f159bf66e9",109217:"a6ed2b884b",109610:"146e3964c6",109686:"310440484d",109690:"c3d0255d0a",109692:"87d505527b",109693:"86fb35e61b",109694:"d5d1a9d25a",109695:"8a6f4b6bd8",109696:"1ce3f91ca3",109697:"a7c849ee49",109775:"e89c820977",109920:"74d9f40ac2",109921:"1b2ea6c7a2",109923:"e36349622d",109927:"ec1dde3903",110024:"cec0181a08",110519:"07c4cd645c",110652:"af94e9c7df",110653:"99f5056e59",110654:"faf3db36f7",111622:"0a20335378",111623:"4360234fd3",111624:"01b81cf286",111654:"dbbb83782e",111803:"dd0680bacc",111804:"7aad98d3d2",111805:"4b8a55c4a2",111806:"0fe2b9a78c",111809:"7116bc4745",111810:"8d95cd67be",111811:"8e80ff1582",111812:"d2a9c662d4",111813:"f3557223aa",111814:"dec5c7cde2",111815:"9853f56628",111816:"a61fb8b720",111818:"3200488422",111844:"15ff484c0d",111845:"028a436b7e",111846:"4c27a057b6",111849:"9689f88190",111850:"392944ef00",111851:"51132a70a6",111852:"923fc286fb",111853:"41f0518e0a",111854:"10c54a5602",111869:"4a8d7a1090",111870:"785cd1ce83",111872:"cfcffec11c",111874:"77d07591db",111877:"75d0ab4a18",111887:"5f1b126770",111888:"c5ff7a388d",111890:"eab000e1ba",111898:"943a700594",111903:"5362508a37",111995:"1bfb12be3c",111998:"39184fc943",111999:"a6681dbd3c",112090:"e8b21f969e",112099:"ae2e3a8e88",112100:"c7dff5118e",112101:"51212168c4",112108:"66141026b5",112109:"322f1417bc",112110:"7c83fa006b",112905:"111d2183ae",112906:"7555a2f87a",112907:"5024b1b709",112912:"55f45d9da3",112913:"39241222a2",112914:"a61173bd85",113114:"1c7448fd49",113116:"0f3c223df8",113117:"09fecb77f0",113121:"abef630dcd",113686:"e9bf4fd421",113687:"be1c28ffeb",113688:"67562bd11a",113689:"89fd063ffc",113690:"2d9ada6219",113691:"e5789a30e1",113692:"86119c459a",113693:"53ef833522",113694:"1b86ac06aa",113695:"9ea2cc472f",113696:"8d503a8dcf",113697:"c802be8e62",113698:"b9008cb0a1",113700:"c8d66304b8",113701:"49990c2c9e",113702:"a03f53a684",113703:"cb7daf08ca",113704:"a23bfebe64",113705:"59ccd9de8e",113706:"2e002bfbbe",113707:"073a05030e",113708:"3761d74f05",113834:"a8de49c57a",113906:"19992d5c1b",113907:"797564c33e",113908:"985cefdff4",113909:"17e6ed419d",113910:"fb0d66ade6",113911:"aa70806101",113912:"c994e3a643",113913:"0da7718104",113914:"b33e7bee44",113915:"4dcd852f5c",114763:"a5174c71d6",114764:"379bdbeb17",114765:"c9b2d5220d",114766:"4a0da7a091",114767:"32596a9af2",114768:"35308ef4ca",114769:"40f2d15606",115518:"153b0e05a0",115593:"99d54fe5c4",116600:"f38e16d8ef",117078:"1473efeccf",117079:"5f9f3115e2",117422:"ae9c683d5e",117423:"76afe5c729",117424:"95dbec5db7",117425:"94dab5c436",117426:"cf4b23fac9",117427:"ad66ea3d6c",117428:"2a5d7ffd77",117429:"14bc7a4769",117430:"8c85233577",117431:"e544ff9a47",117432:"022b35d3d7",117433:"14cf4a8387",117540:"06d8ff6938",117541:"2edf6982c3",117542:"0b2913f5e2",117543:"9477caaa42",117544:"81465f8580",117545:"95e02cfa65",117547:"c1435cb946",117548:"19daaf13e0",117549:"144da4cbb4",117550:"62708a8d84",117554:"92527cf481",117555:"c64a26402f",117556:"fc39cd0f0b",117557:"387fd944da",117574:"945ffd66c0",117579:"c62b0937ca",117756:"a9115e7587",117757:"25cb1818f1",118547:"d8bed36599",118548:"c73e26d01e",118549:"5c84d9bfa7",118550:"03f2aecd12",118551:"32dc03e630",118552:"bab6c5d66d",118553:"75ab5bbfcc",118554:"8ad6fffaaf",118555:"269df8852d",118758:"a55b2ff9ef",118759:"7f941e1837",118817:"2de10ab6da",118819:"182ddce355",118820:"be90fc5542",118821:"a530cf3fd5",118822:"10f06825ca",118854:"869e1c187d",119204:"1622fbf8d5",119205:"18361f203b",119211:"f2b485f13d",120662:"ebdb1413c4",120663:"c2c4120460",121841:"1673ad39c1",121842:"98e6d09e47",121843:"8efe9e8ac9",121844:"c96aa447a7",121845:"9d454485d2",121846:"19fff6d957",121847:"f726bceee1",121848:"2f1abae299",122492:"9317ce3553",122544:"27e451d3b3",122822:"7dd6443353",122961:"bc30b1dcfc",122962:"90527b6bf1",122963:"970d4de4e4",122964:"8a284d3a18",122965:"bae0089dfb",122966:"f82230fa98",122967:"d07f34040e",122968:"e57a903d13",122969:"5b0a2a7009",122970:"6190579ead",122971:"57b6a14655",122972:"b7ed1bb788",122973:"2b84e04822",122974:"cbbb8bbc93",122975:"e9a8b28213",122976:"356c8727eb",122977:"3cf7fa8dd7",122978:"7118635739",122979:"1b4b5446e7",122980:"4570419ba5",122981:"057e260680",122982:"5036230670",122983:"b7c008c159",122984:"a783bb4f54",122985:"f96e8afe0c"},this.externalQueries=new Set([]),this.customProperties=e.customProperties,this.externalData=e.externalData,this.logger=e.logger,this.messages=e.messages,this.network=e.network,this.permutive=e.permutive,this.permutiveData=e.permutiveData,this.queryWorker=e.queryWorker,this.realtime=e.realtime,this.sessionManager=e.sessionManager,this.transitionDebounceMaxTime=e.transitionDebounceMaxTime,this.transitionDebounceTime=e.transitionDebounceTime,this.userId=e.userId,this.viewId=e.viewId}processMessage(e){return this.queryWorker.postMessage(e)}}class ut extends((()=>(0,i.zG)(ot,st))()){constructor(e){super(e),this.makeStateMaps()}}},3253:(e,r,t)=>{t.d(r,{S:()=>s});var n=t(655),i=t(3735),a=t(6013);class s{constructor(e,r){var t;this.db=e,this.options=r,this.hasChanged=!1,this.options=null!==(t=this.options)&&void 0!==t?t:{},this.options.timeout_seconds=this.options.timeout_seconds||1800,this.options.session_data_key=this.options.session_data_key||"permutive-session",this.session_id=null}getSessionId(){return this.session_id}sessionHasChanged(){return this.hasChanged}decodeSessionData(e){return null===e?null:"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?Object.assign(Object.assign({},e),{last_updated:new Date(e.last_updated)}):null}reset(){return this.db.delete(this.options.session_data_key)}persistSessionData(e){return(0,n.mG)(this,void 0,void 0,(function*(){const r=e.last_updated.toISOString();yield this.db.put(Object.assign(Object.assign({},e),{last_updated:r}),this.options.session_data_key)}))}newSession(e){return this.hasChanged=!0,{session_id:(0,a.k$)(),last_updated:e}}hasExpired(e,r){if(isNaN(r.getTime()))return!0;return e>new Date(r.getTime()+1e3*this.options.timeout_seconds)}static initialise(e,r,t){return(0,n.mG)(this,void 0,void 0,(function*(){const n=new s(r,t);e.deleteCookie(n.options.session_data_key);const a=new Date,c=yield n.db.get(n.options.session_data_key).catch(i.gn),o=n.decodeSessionData(c),u=null===o||n.hasExpired(a,o.last_updated)?n.newSession(a):Object.assign(Object.assign({},o),{last_updated:a});return yield n.persistSessionData(u),n.session_id=u.session_id,n}))}}},2747:(e,r,t)=>{t.d(r,{S:()=>m});var n=t(3735),i=t(787),a=t(6013),s=t(7545);class c{constructor(e,r,t,n,i){this.config=e,this.namespace=r,this.logger=t,this.network=n,this.userId=i,this.permutiveData={},this.permutiveDataSize=0,this.localStorageQueue=new Set,this.localStorageScheduler=new s.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,r){this.permutiveData[e]=r,this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.getDataChunk("misc")),this.getDataChunk("models")),this.getDataChunk("queries")),this.getDataChunk("tpd")),this.getDataChunk("enrichers"))}getDataChunk(e){const r=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),t=window.localStorage.getItem(r),n=(0,i.A)(t);return null===n?{}:(this.permutiveDataSize+=2*t.length,n)}chunkKeyToStorageKey(e){switch(e){case"models":return this.config.permutiveDataModelsKey;case"queries":return this.config.permutiveDataQueriesKey;case"tpd":return this.config.permutiveDataTPDKey;case"enrichers":return this.config.permutiveDataEnrichersKey;case"misc":return this.config.permutiveDataMiscKey;default:return(0,a.Fi)(e)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[r,t]=this.dataKeyToChunkInfo(e);return(0,a.Z_)(this.network,this.userId,(()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(r),JSON.stringify(t))))()}dataKeyToChunkInfo(e){const r=e=>(0,a.eu)(this.permutiveData,e);switch(e){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),r(o)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),r(u)];case"third-party-data":case"third-party-data-session-id":case"third-party-data-usage":return[this.chunkKeyToStorageKey("tpd"),r(d)];case"enricher:geoip":return[this.chunkKeyToStorageKey("enrichers"),r(l)];case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:twitter_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),r(f)];default:return(0,a.Fi)(e)}}}const o=["models_data","models_last_updated"],u=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],d=["third-party-data","third-party-data-session-id","third-party-data-usage"],l=["enricher:geoip"],f=["identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:twitter_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"];var p=t(590);const g=e=>{const{logger:r,consentTracking:t}=e,n=e=>{r.debug(`Data Store: Failed to write ${e} as consent is revoked`)};return e=>class extends e{constructor(){super(...arguments),this.writeData=(0,p.vX)(super.writeData.bind(this),n,t.isRevoked)}}},m=(e,r,t,i,a,s)=>new((0,n.zG)(c,g({consentTracking:s,logger:t})))(e,r,t,i,a)},1823:(e,r,t)=>{t.d(r,{$:()=>i});var n=t(6013);class i{constructor(e){this.permutiveData=e,this.eventSourceId=e.getData("event-source-id")||this.generateAndStoreEventSourceId()}get(){return this.eventSourceId}generateAndSet(){this.eventSourceId=this.generateAndStoreEventSourceId()}generateAndStoreEventSourceId(){const e=(0,n.k$)();return this.permutiveData.setData("event-source-id",e),e}}},7738:(e,r,t)=>{t.d(r,{L:()=>n});class n{constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}},1728:(e,r,t)=>{t.d(r,{u:()=>n});class n{constructor(e,r){this.metrics=e,this.messages=r}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){this._isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){this._isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{sdk_version:"v19.29.0"}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},2472:(e,r,t)=>{t.d(r,{a:()=>s});var n=t(655),i=t(3735),a=t(356);class s{constructor(e,r,t,n,i,a,s,c){this.config=e,this.localStorage=r,this.logger=t,this.queryManager=n,this.permutiveData=i,this.eventSourceId=a,this.cookies=s,this.externalData=c}reset(){return(0,n.mG)(this,void 0,void 0,(function*(){return this.logger.log("Resetting State"),(0,i.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,a.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfwqp:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,_pclmc:!0,"permutive-prebid-rtd":!0,"permutive-events-cache":!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.queryManager.reset()),(e=>this.permutiveData.reset()),(e=>this.eventSourceId.generateAndSet()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataModelsKey),this.localStorage.delete(this.config.permutiveDataQueriesKey),this.localStorage.delete(this.config.permutiveDataTPDKey),this.localStorage.delete(this.config.permutiveDataEnrichersKey),this.localStorage.delete(this.config.permutiveDataMiscKey)])),i.Q1)}))}}},1714:(e,r,t)=>{t.d(r,{N:()=>m,e:()=>p});var n=t(655),i=t(2688),a=t(7183),s=t(70),c=t(3735),o=t(477),u=t.n(o);function d(){return u()('/*! permutive-javascript-sdk v19.29.0 (web) (built 2022-09-29T07:13:53.870Z) */(()=>{"use strict";const n=()=>({kind:"null",value:null}),r=n=>({kind:"string",value:n}),t=n=>({kind:"number",value:n}),e=n=>({kind:"array",value:n}),u=n=>({kind:"object",value:n}),i=n=>n,o=()=>({kind:"bottom"}),c=n=>({kind:"inner",a:n}),a=n=>({kind:"top",error:n}),s=n=>({kind:"unbounded",group:n}),f=(n,r)=>({kind:"windowed",key:r,group:n}),l=(n,r,t)=>({kind:"countLimit",n:t,limit:r,group:n}),d=(n,r,t)=>({kind:"uniqueLimit",n:t,limit:r,group:n}),p=n=>({kind:"numberGroup",group:n}),m=n=>({kind:"stringGroup",group:n}),g=n=>({kind:"tuple",tuple:n}),v=n=>({state:n}),h=(n,r)=>({commands:n,payload:r});function k(n){return n}function w(n,r,t,e,u,i,o,c,a){switch(arguments.length){case 1:return n;case 2:return r(n);case 3:return t(r(n));case 4:return e(t(r(n)));case 5:return u(e(t(r(n))));case 6:return i(u(e(t(r(n)))));case 7:return o(i(u(e(t(r(n))))));case 8:return c(o(i(u(e(t(r(n)))))));case 9:return a(c(o(i(u(e(t(r(n))))))));default:for(var s=arguments[0],f=1;f<arguments.length;f++)s=arguments[f](s);return s}}var y=function(n){return{equals:function(r,t){return r===t||n(r,t)}}},b=function(n){return y((function(r,t){for(var e in n)if(!n[e].equals(r[e],t[e]))return!1;return!0}))},x=function(n){return function(r,t){return r===t||0===n(r,t)}},j=function(n){return{equals:x(n),compare:function(r,t){return r===t?0:n(r,t)}}},N=function(n){return function(r){return j((function(t,e){return r.compare(n(t),n(e))}))}},q=function(n){return function(r,t){return-1===n.compare(r,t)}},L=function(n){return function(r,t){return 1===n.compare(r,t)}},O=function(n){return function(r,t){return r===t||n.compare(r,t)>-1?r:t}};var M={equals:function(n,r){return n===r}},S={equals:M.equals,compare:function(n,r){return n<r?-1:n>r?1:0}};const G=(n,r)=>{switch(n.kind){case"bottom":return{kind:"bottom"};case"inner":return c(r(n.a));case"top":return a(n.error)}},E=n=>j(((r,t)=>{if("bottom"===r.kind&&"bottom"===t.kind)return 0;if("bottom"===r.kind)return-1;if("bottom"===t.kind)return 1;if("top"===r.kind&&"top"===t.kind)return S.compare(r.error,t.error);if("top"===r.kind)return 1;if("top"===t.kind)return-1;if("inner"===r.kind&&"inner"===t.kind)return n.compare(r.a,t.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var _=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},A=function(n){return"Some"===n._tag},$={_tag:"None"},I=function(n){return{_tag:"Some",value:n}},C=function(n){return"Left"===n._tag},z=(Object.prototype.hasOwnProperty,function(n){return _([n[0]],n.slice(1))});var J=$,P=I;function R(n){return function(r){return n(r)?P(r):J}}var F=function(n){return"Left"===n._tag?J:P(n.right)},W=function(n){return{equals:function(r,t){return r===t||(H(r)?H(t):!H(t)&&n.equals(r.value,t.value))}}},B=function(n){return{equals:W(n).equals,compare:function(r,t){return r===t?0:D(r)?D(t)?n.compare(r.value,t.value):1:-1}}},T=function(n){return function(r){return H(r)?J:P(n(r.value))}},U=F,D=A,H=function(n){return"None"===n._tag},K=function(n){return function(r){return H(r)?n():r.value}};var Q;Q=void 0;var V=function(n){return n[0]},X=V;var Y=function(n,r){for(var t=0,e=r.length,u=n.length;t<e;t++,u++)n[u]=r[t];return n},Z=function(n){return n.length>0},nn=function(n,r){return n<0||n>=r.length},rn=function(n){return function(r){return Y([n],r)}},tn=rn,en=function(n){return function(r){return Y(Y([],r),[n])}},un=en,on=z,cn=function(n){return Z(n)?I(n):$},an=function(n){return function(r){for(var t=Math.max(0,Math.floor(r)),e=[n(0)],u=1;u<t;u++)e.push(n(u));return e}};var sn=on;var fn=function(n){return function(r){var t=Math.max(1,n);return t>=r.length?[sn(r),[]]:[w(r.slice(1,t),tn(dn(r))),r.slice(t)]}},ln=function(n){return y((function(r,t){return r.length===t.length&&r.every((function(r,e){return n.equals(r,t[e])}))}))},dn=X;var pn={equals:function(n,r){return n===r}},mn={equals:pn.equals,compare:function(n,r){return n<r?-1:n>r?1:0}};var gn=function(n,r){return function(t){for(var e=t.length,u=n,i=0;i<e;i++)u=r(i,u,t[i]);return u}};var vn=function(n){return 0===n.length},hn=Z,kn=tn,wn=un,yn=function(n,r){return n<=0?[]:an(r)(n)};var bn=nn,xn=function(n){return function(r){return bn(n,r)?qn(r):r.slice(0,n)}};var jn=function(n,r){for(var t=n.length,e=0;e<t&&r(n[e]);e++);return e};var Nn=function(n){return function(r){return n<=0||vn(r)?qn(r):n>=r.length?[]:r.slice(n,r.length)}};var qn=function(n){return n.slice()},Ln=function(n){return vn(n)?[]:n.slice().reverse()},On=function(n){return function(r){return r.length<=1?qn(r):r.slice().sort(n.compare)}},Mn=function(n,r,t){for(var e=[],u=Math.min(n.length,r.length),i=0;i<u;i++)e[i]=t(n[i],r[i]);return e};var Sn=function(n){return function(r){return n>=1&&hn(r)?fn(n)(r):vn(r)?[qn(r),[]]:[[],qn(r)]}};var Gn=function(n){return function(r){return w(r,function(n){return function(r){for(var t=[],e=0;e<r.length;e++)t.push.apply(t,n(e,r[e]));return t}}((function(r,t){return n(t)})))}},En=function(n){return function(r){for(var t=[],e=0;e<r.length;e++){var u=n(e,r[e]);A(u)&&t.push(u.value)}return t}},_n=function(n){return En((function(r,t){return n(t)}))},An=_n(k),$n=gn,In=function(n){var r=Cn(n);return function(n){return r((function(r,t){return n(t)}))}},Cn=function(n){return function(r){return $n(n.of([]),(function(t,e,u){return n.ap(n.map(e,(function(n){return function(r){return w(n,wn(r))}})),r(t,u))}))}},zn=function(n){return j((function(r,t){for(var e=r.length,u=t.length,i=Math.min(e,u),o=0;o<i;o++){var c=n.compare(r[o],t[o]);if(0!==c)return c}return mn.compare(e,u)}))},Jn=function(n){return{_tag:"Left",left:n}},Pn=function(n){return{_tag:"Right",right:n}},Rn=function(n,r){return w(n,Bn(r))},Fn=function(n,r){return w(n,Un(r))},Wn="Either",Bn=function(n){return function(r){return Hn(r)?r:Pn(n(r.right))}},Tn=Pn,Un=function(n){return function(r){return Hn(r)?r:Hn(n)?n:Pn(r.right(n.right))}},Dn={URI:Wn,map:Rn,ap:Fn,of:Tn},Hn=C;var Kn=function(n){return-1===n?1:1===n?-1:0};function Qn(n,r){return An(n.map(r))}function Vn(n,r,t,e){const u=(n,r)=>{if(0===n.length)return An(r.map((n=>P({1:n[1],2:t(J,P(n[2]))}))));if(0===r.length)return An(n.map((n=>P({1:n[1],2:t(P(n[2]),J)}))));if(n.length>0&&r.length>0&&q(e)(n[0][1],r[0][1])){const[e,...i]=n,o=e[1],c=e[2];return kn({1:o,2:t(P(c),J)})(u(i,r))}if(n.length>0&&r.length>0&&L(e)(n[0][1],r[0][1])){const[e,...i]=r,o=e[1],c=e[2];return kn({1:o,2:t(J,P(c))})(u(n,i))}if(n.length>0&&r.length>0){const[e,...i]=n,[o,...c]=r,a=e[1],s=e[2],f=o[2];return kn({1:a,2:t(P(s),P(f))})(u(i,c))}throw new Error("Non exhaustive match in mapOption2")},i=N((n=>n[1]))(e),o=(n=>{const r=Qn(n,(n=>D(n[2])?P({1:n[1],2:n[2].value}):J));return 0===r.length?J:P(r)})(u(On(i)([...n].map((n=>({1:n[0],2:n[1]})))),On(i)([...r].map((n=>({1:n[0],2:n[1]}))))));return T((n=>new Map(n.map((n=>[n[1],n[2]])))))(o)}function Xn(n,r,t,e){const u=N((n=>n[0]))(e),i=On(u)([...r]).reduceRight(((n,r)=>{if(Hn(n)){const e=t(r[1],n.left);return D(e)?Jn(e.value):Pn(r[0])}return n}),Jn(n));return U(i)}function Yn(n,r){return new Map([...n].map(r))}function Zn(n,r){return new Map([...n].filter(r))}function nr(n){return JSON.stringify(rr(n))}function rr(n){switch(n.kind){case"null":return ur.encode(n);case"string":return ir.encode(n);case"number":return or.encode(n);case"array":return cr.encode(n);case"object":return ar.encode(n)}}function tr(n){return null===n?ur.decode(n):"number"==typeof n?or.decode(n):"string"==typeof n?ir.decode(n):Array.isArray(n)?cr.decode(n):ar.decode(n)}const er=(n,r)=>Jn(`Failed to decode. Input was ${JSON.stringify(n)}. Codec type was ${r}`),ur={encode:n=>null,decode:n=>null===n?Pn({kind:"null",value:null}):er(n,"SimpleNull")},ir={encode:n=>n.value,decode:n=>"string"==typeof n?Pn(r(n)):er(n,"SimpleString")},or={encode:n=>n.value,decode:n=>"number"==typeof n?Pn(t(n)):er(n,"SimpleNumber")},cr={encode:n=>n.value.map(rr),decode:n=>{if(Array.isArray(n)){const r=In(Dn)(tr)(n);return Bn(e)(r)}return er(n,"SimpleArray")}},ar={encode:n=>{const r=[...n.value.entries()];return Object.assign({},...Array.from(r,(([n,r])=>({[n]:rr(r)}))))},decode:n=>{if(n&&n.constructor===Object){const r=In(Dn)((([n,r])=>w(tr(r),Bn((r=>function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n}(n,r))))))(Object.entries(n));return Bn((n=>u(new Map([...n]))))(r)}return er(n,"SimpleObject")}};function sr(n){return w(n,lr,T(nr),K((()=>"<encode error>")))}function fr(n){return T(hr)(function(n){switch(n.state.kind){case"top":return P(r(n.state.error));case"bottom":return J;case"inner":return lr(n.state.a)}}(n))}function lr(n){return function(n){switch(n.kind){case"numberGroup":case"stringGroup":return dr(n.group);case"tuple":return n.tuple.length>0}}(n.payload)?P(e(function(n,r){const t=T((n=>kn(n)(r)))(n);return K((()=>r))(t)}(T((n=>r(function(n){const r=n=>{switch(n){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=n=>1===n[2]?r(n[1]):r(n[1])+JSON.stringify(n[2]);return n.map(t).join("")}(n))))(n.commands),function(n){const e=n=>{switch(n.kind){case"bottom":return{kind:"null",value:null};case"top":return r(n.error);case"inner":return t(n.a)}},i=n=>Qn([pr,mr,n=>w(n,vr,u,P)],(r=>r(n))),o=n=>Qn([pr,gr,n=>w(n,vr,(n=>Yn(n,(([n,r])=>[JSON.stringify(n),r]))),u,P)],(r=>r(n)));switch(n.kind){case"tuple":return n.tuple.map(e);case"stringGroup":return i(n.group);case"numberGroup":return o(n.group)}}(n.payload)))):J}function dr(n){switch(n.kind){case"unbounded":return n.group.size>0;case"windowed":return n.group.size>0||D(n.key);case"countLimit":case"uniqueLimit":return n.group.size>0||D(n.limit)}}function pr(n){switch(n.kind){case"unbounded":return J;case"windowed":return P(r("w"));case"countLimit":return P(r(1===n.n?"x":`x${n.n}`));case"uniqueLimit":return P(r(1===n.n?"u":`u${n.n}`))}}function mr(n){switch(n.kind){case"unbounded":return J;case"windowed":return P(r(D(n.key)?n.key.value:""));case"countLimit":case"uniqueLimit":return P(r(D(n.limit)?n.limit.value:""))}}function gr(n){switch(n.kind){case"unbounded":return J;case"windowed":return D(n.key)?P(t(n.key.value)):P({kind:"null",value:null});case"countLimit":case"uniqueLimit":return D(n.limit)?P(t(n.limit.value)):P({kind:"null",value:null})}}function vr(n){switch(n.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return n.group}}function hr(n){switch(n.kind){case"array":return 0===n.value.length?{kind:"null",value:null}:1===n.value.length?hr(n.value[0]):e(n.value.map(hr));case"object":return w(Zn(n.value,(([n,r])=>"null"!==r.kind)),(n=>Yn(n,(n=>[n[0],hr(n[1])]))),u);default:return n}}function kr(n){const r=n=>{if(0===n.length)return{kind:"bottom"};const r=(n=>{if(4!==n.length)return J;const[r,t,e,u]=n;if("string"===r.kind&&"string"===t.kind&&"object"===u.kind){const n=R((n=>wr(n[1].value)&&yr(n[2].value)))({1:r,2:t});return T((n=>({prim:n[1].value,grp:n[2].value,cutoff:e,m:u.value})))(n)}return J})(n);if(D(r)){const{prim:n,grp:t,cutoff:e,m:u}=r.value,i=br(e,u,xr(t));return"string"==typeof i?a(i):c(h(jr(n),i))}const t=(n=>{if(3!==n.length)return J;const[r,t,e]=n;if("string"===r.kind&&"object"===e.kind){const n=R((n=>yr(n.value)))(r);return T((n=>({grp:n.value,cutoff:t,m:e.value})))(n)}return J})(n);if(D(t)){const{grp:n,cutoff:r,m:e}=t.value,u=br(r,e,xr(n));return"string"==typeof u?a(u):c(h(J,u))}const e=(n=>{if(2!==n.length)return J;const[r,t]=n;if("string"===r.kind&&"object"===t.kind){const n=R((n=>wr(n.value)))(r);return T((n=>({prim:n.value,m:t.value})))(n)}return J})(n);if(D(e)){const{prim:n,m:r}=e.value;return c(h(jr(n),m(s(r))))}const u=(n=>{if(1!==n.length)return J;const[r]=n;return"object"===r.kind?P({m:r.value}):J})(n);if(D(u)){const{m:n}=u.value;return c(h(J,m(s(n))))}const i=(n=>{if(n.length<1)return J;const[r,...t]=n;if("string"===r.kind){const n=R((n=>wr(n.value)))(r);return T((n=>({prim:n.value,rest:t})))(n)}return J})(n);if(D(i)){const{prim:n,rest:r}=i.value;return c(h(jr(n),qr(r)))}return c(h(J,qr(n)))},t=n=>"array"===n.kind?Gn(t)(n.value):[n];return"null"===n.kind?v({kind:"bottom"}):v(r(t(n)))}function wr(n){const r=n.split("");if(!0==(0===r.length))return!1;{const[n,...t]=r;return-1!=="pmvn".indexOf(n)&&t.every((n=>-1!=="pmvn0123456789".indexOf(n)))}}function yr(n){const r=n.split("");switch(!0){case 0===r.length:return!1;case"w"===r[0]&&void 0===r[1]:return!0;default:{const[n,...t]=r;return-1!=="ux".indexOf(n)&&-1===t.map((n=>!isNaN(parseInt(n)))).indexOf(!1)}}}function br(n,r,t){switch(n.kind){case"string":return m(t({1:P(n.value),2:r}));case"number":case"null":return p(t({1:"null"===n.kind?J:P(n.value),2:Zn(Yn(r,(([n,r])=>[Number(n),r])),(n=>!isNaN(n[0])))}));default:return"{bad cutoff}"}}function xr(n){const r=n=>r=>d(r[2],r[1],n),t=n=>r=>l(r[2],r[1],n),e=n.split("");switch(!0){case"w"===e[0]&&void 0===e[1]:return n=>f(n[2],n[1]);case"u"===e[0]&&void 0===e[1]:return r(1);case"u"===e[0]&&void 0!==e[1]:return r(parseInt(e.slice(1).join("")));case"x"===e[0]&&void 0===e[1]:return t(1);case"x"===e[0]&&void 0!==e[1]:return t(parseInt(e.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function jr(n){return T(i)(cn(Nr(n,(n=>{const r=n.split("");if(0===r.length)return J;const[t,...e]=r,u=(n=>{switch(n){case"p":return P("add");case"m":return P("mul");case"v":return P("max");case"n":return P("min");default:return J}})(t);return T((n=>{const{init:r,rest:t}=(u=n=>{return"number"==typeof(r=parseInt(n))&&isFinite(r)&&Math.floor(r)===r;var r},function(n){var r=Sn(jn(n,u))(n);return{init:r[0],rest:r[1]}})(e);var u;return{1:{1:n,2:0===r.length?1:parseInt(r.join(""))},2:t.join("")}}))(u)}))))}function Nr(n,r){const t=r(n);return K((()=>[]))(T((n=>[n[1]].concat(Nr(n[2],r))))(t))}function qr(n){return g(n.map(Lr))}function Lr(n){switch(n.kind){case"number":return c(n.value);case"string":return a(n.value);case"null":return{kind:"bottom"};case"object":return a("{object}");case"array":return a("{array}")}}const Or={strategy:(n,r,t)=>e=>{if(H(t))return r;if("delta"===n&&H(r))return J;if(H(r))return t;if(D(r)&&D(t))return e(r.value,t.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(n,r,t,e,u,i)=>{const c=zn(E(i));if("append"===n&&"add"===r)return Mn(t,e,Ir("append",u.plus));if("append"===n&&"mul"===r)return Mn(t,e,Ir("append",u.times));if("append"===n&&"max"===r)return O(c)(t,e);if("join"===n&&"add"===r)return Mn(t,e,Ir("join",O(i)));if("join"===n&&"mul"===r)return Mn(t,e,Ir("join",O(i)));if("join"===n&&"max"===r)return O(c)(t,e);if("min"===r)return Or.operation(n,"max",t,e,u,function(n){return j(((r,t)=>Kn(n.compare(r,t))))}(i));if("delta"===n&&"max"===r)return L(c)(t,e)?t:e.map(o);if("delta"===n)return Mn(t,e,((n,r)=>L(E(i))(n,r)?n:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(n,r,t,e)=>{if("delta"===n&&"top"===t.kind&&"top"===e.kind)return L(S)(t.error,e.error)?a(t.error):{kind:"bottom"};if("delta"===n&&"bottom"===e.kind)return t;if("delta"===n&&"bottom"===t.kind)return{kind:"bottom"};if("top"===t.kind&&"top"===e.kind)return a(O(S)(t.error,e.error));if("top"===t.kind)return t;if("top"===e.kind)return e;if("inner"===t.kind&&"inner"===e.kind)return r(t.a,e.a);if("bottom"===t.kind)return e;if("bottom"===e.kind)return t;throw new Error("Non exhaustive match in extend")}},Mr={plus:(n,r)=>n+r,times:(n,r)=>n*r};function Sr(n,r,t,e){if("unbounded"===n.kind&&"unbounded"===r.kind){const u=n.group,i=r.group;return K(o)(T((n=>c(s(n))))(Vn(u,i,t,e)))}if("windowed"===n.kind&&"windowed"===r.kind){const u=n.key,i=n.group,a=r.key,s=r.group,l=O(B(e))(u,a);return K(o)(T((n=>c(f(n,l))))(Vn(i,s,t,e)))}if("countLimit"===n.kind&&"countLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,a=n.group,s=r.limit,f=r.group,d=O(B(e))(i,s);return K(o)(T((n=>c(l(n,d,u))))(Vn(a,f,t,e)))}return a("Non matching counts")}if("uniqueLimit"===n.kind&&"uniqueLimit"===r.kind){const u=n.n,i=r.n;if(u===i){const i=n.limit,a=n.group,s=r.limit,f=r.group,l=O(B(e))(i,s);return K(o)(T((n=>c(d(n,l,u))))(Vn(a,f,t,e)))}return a("Non matching counts")}return a("Non matching group types")}function Gr(n,r,t,e,u,i){const c=(n,r)=>({1:xn(n)(r).concat(yn(Math.max(0,n-r.length),o)),2:Nn(n)(r)}),a=(r,t,e)=>{if(0===r.length)return Or.operation(n,"max",t,e,u,i);if(r.length>0){const[o,...s]=r,f=c(o[2],t),l=f[1],d=f[2],p=c(o[2],e),m=p[1],g=p[2];return Or.operation(n,o[1],l,m,u,i).concat(a(s,d,g))}throw new Error("Non exhaustive match in recurse")};return Ln((s=n=>"bottom"===n.kind,function(n){return n.slice(jn(n,s))})(Ln(a(r,t,e))));var s}function Er(r,t,e){return K(n)(_r(r,J)(t,e))}function _r(n,r){const t=r=>(t,e)=>Or.strategy(n,t,e)(_r(n,r)),e=(e,u)=>{if(W(ln(b({1:M,2:pn}))).equals(e.commands,u.commands)){const i=((r,e,u)=>{if("stringGroup"===e.kind&&"stringGroup"===u.kind){const n=Sr(e.group,u.group,t(r),S);return G(n,(n=>m($r(n,S))))}if("numberGroup"===e.kind&&"numberGroup"===u.kind){const n=Sr(e.group,u.group,t(r),mn);return G(n,(n=>p($r(n,mn))))}if("tuple"===e.kind&&"tuple"===u.kind){const t=D(r)?r.value:[];return c(g(Gr(n,t,e.tuple,u.tuple,Mr,mn)))}throw new Error(`Non matching payload. Got ${e.kind} and ${u.kind}`)})(H(e.commands)?r:e.commands,e.payload,u.payload);return G(i,(n=>h(e.commands,n)))}throw new Error(`Non matching primitive strings. Got ${sr(e)} and ${sr(u)}`)};return(r,t)=>fr(v(Or.extend(n,e,kr(r).state,kr(t).state)))}function Ar(n,r,t){const e=T((r=>Zn(n,(([n,e])=>{return(u=t,function(n,r){return-1!==u.compare(n,r)})(n,r);var u}))))(r);return K((()=>n))(e)}function $r(n,r){switch(n.kind){case"unbounded":return n;case"windowed":return H(n.key)?n:f(Ar(n.group,n.key,r),n.key);case"countLimit":{const t=n.limit,e=n.n,u=n.group,i=(n,r)=>r<=1?J:P(r-1),o=Xn(e,u,i,r),c=O(B(r))(t,o);return l(Ar(u,c,r),c,e)}case"uniqueLimit":{const t=n.limit,e=n.n,u=n.group,i=(n,r)=>{if("object"===n.kind){const t=[...n.value.keys(),...r.keys()],u=new Set(t);return u.size>=e?J:P(u)}return J},o=Xn(new Set,u,i,r),c=O(B(r))(t,o);return d(Ar(u,c,r),c,e)}}}function Ir(n,r){return(t,e)=>Or.extend(n,((n,t)=>c(r(n,t))),t,e)}function Cr(n,r,t,e,u,i,o,c,a){switch(arguments.length){case 1:return n;case 2:return r(n);case 3:return t(r(n));case 4:return e(t(r(n)));case 5:return u(e(t(r(n))));case 6:return i(u(e(t(r(n)))));case 7:return o(i(u(e(t(r(n))))));case 8:return c(o(i(u(e(t(r(n)))))));case 9:return a(c(o(i(u(e(t(r(n))))))));default:for(var s=arguments[0],f=1;f<arguments.length;f++)s=arguments[f](s);return s}}var zr=function(n){return"Some"===n._tag},Jr={_tag:"None"},Pr=function(n){return{_tag:"Some",value:n}},Rr=function(n){return"Left"===n._tag},Fr=Object.prototype.hasOwnProperty,Wr=Rr,Br=function(n){return function(r){return Wr(r)?n(r.left):r.right}};var Tr=function(n){return function(r){return!n(r)}};var Ur=Jr,Dr=Pr;var Hr=zr;var Kr=function(n){for(var r in n)if(Fr.call(n,r))return!1;return!0};function Qr(n){return function(r){var t={},e=!1;for(var u in r)if(Fr.call(r,u)){var i=r[u];n(u,i)?t[u]=i:e=!0}return e?t:r}}var Vr=function(n){return Qr((function(r,t){return n(t)}))};var Xr=Kr;var Yr=Vr;Yr(Tr(Xr));Tr((function(n){return 0===n.length}));function Zr(n,r){const t=Object.keys(n),e=t.length,u={};for(let i=0;i<e;i++){const e=t[i],o=r(e,n[e]);Hr(o)&&(u[e]=o.value)}return u}function nt(n,r){const t=Cr((n=>Zr(n,((n,r)=>r.state?Dr({[r.checksum]:r.state}):Ur)))(n),tr,Br((n=>u(new Map)))),e=Cr(tr(r),Br((n=>u(new Map))));return Cr(function(n,r){return Er("delta",n,r)}(t,e),(n=>rr(n)))||{}}!function(n){const r=self;function t(n,t,e,u){function i(t){if("function"!=typeof r.postMessage)return n.ports[0].postMessage(t);r.postMessage(t)}if(!e)return i([t,null,u]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",e),i([t,e])}r.addEventListener("message",(function(r){if(e=r,!Array.isArray(e.data)||2!==e.data.length)return;var e;const u=r.data,[i,o]=u;if("function"==typeof n)return function(n,r,e,u){const i=function(n,r){try{return{res:n(r)}}catch(n){return{err:n}}}(r,u);return Boolean(null===(o=i)||void 0===o?void 0:o.err)?t(n,e,i.err):!(c=i.res)||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof c.then?t(n,e,null,i.res):void i.res.then((function(r){t(n,e,null,r)}),(function(r){t(n,e,r)}));var o,c}(r,n,i,o);t(r,i,new Error("Please pass a function into register()."))}))}((function(n){switch(n.type){case"delta":return nt(n.stateMap,n.lastSentStateMapWithChecksum);case"noop":return{}}}))})();',"Worker",void 0,void 0)}var l=t(7545),f=t(7121);function p(){return(0,a.h)(new d)}const g={concat:(e,r)=>Object.assign(Object.assign({},e),r),empty:{}};class m{constructor(e,r,t,n,i,a,s,c,o){this.api=e,this.network=r,this.sessionManager=t,this.permutiveData=n,this.queryManager=i,this.metrics=a,this.userId=s,this.eventSourceId=c,this.stateWorker=o,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new l.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((e=>this.syncIfNotEmpty.bind(this)("standard",e)),g),this.fetchUnseenState=!!h.includes("8347d761-7b38-45f0-b0a8-34b664f7c00f")||this.sessionManager.sessionHasChanged(),this.stateOffset=this.permutiveData.getData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,f.Yh)(this.permutiveData.getData("internal_query_states")||{}),this.stateWorker.postMessage({type:"noop"})}sync(e){return(0,c.zG)(this.debouncedSyncIfNotEmpty(e),(e=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen",{}).then(c.Q1)}syncIfNotEmpty(e,r){const[t,n,a]="standard"===e?[this.stateOffset,r,this.fetchUnseenState]:"unseen"===e?[this.stateOffset,this.queryManager.stateMap.value,!0]:[0,{},!0],s=this.metrics.startTimer("sdk_compute_delta_seconds",{}),o={type:"delta",stateMap:n,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum},u=this.stateWorker.postMessage(o).then((e=>(this.metrics.stopTimer("sdk_compute_delta_seconds",s),e))),d=e=>{this.fetchUnseenState=!1;const r=(0,c.ls)((e=>this.network.error(`Error sending state delta. Got ${(0,i.w)(e)}`,this.userId.get())),(e=>({})));return this.api.state(this.metrics,this.userId.get(),this.eventSourceId.get(),e,t,a).then((e=>function(e){return!!e}(e)?this.onStateResponse(e):{})).then((r=>(this.lastSentStateMapWithChecksum=e,r))).catch(r)};return u.then((e=>a||Object.keys(e).length>0?d(e):Promise.resolve({})))}resetSync(){return(0,n.mG)(this,void 0,void 0,(function*(){this.reset(),yield this.syncIfNotEmpty("reset",{})}))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(e){const r=(0,s.Y3)((()=>JSON.parse(e.state)),(e=>this.network.error(`Failed to parse State API response, got ${e}`,this.userId.get()))),t=e=>e?this.queryManager.updateExternalState(e):(0,c.Q1)();return(0,s.tO)(r)?(0,c.zG)(e.state_offset,(e=>this.stateOffset=e),(e=>this.permutiveData.setData("state_offset",e)),(e=>t(r.right)),(e=>r.right)):{}}}const h=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},7258:(e,r,t)=>{t.d(r,{u:()=>n});class n{constructor(e,r,t,n,i){this.permutiveData=e,this.permutiveReset=r,this.userId=t,this.viewId=n,this.eventsCache=i}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,r){return this.permutiveData.setData(e,r)}getStateSizeInBytes(){return this.permutiveData.getDataSize()+this.eventsCache.getStateSizeInBytes()}reset(){return this.permutiveReset.reset()}}},7846:(e,r,t)=>{t.d(r,{M:()=>s});var n=t(3735),i=t(6567),a=t(6013);class s{constructor(e,r,t,n){this.config=e,this.clientContext=r,this.cookies=t,this.externalData=n,this.userId=this.getOrGenerateUserId(),this.set(this.userId)}isEqual(e){return this.userId===e}get(){return this.userId}set(e){this.cookies.setCookie(this.config.cookieName,e,!0),this.externalData.setExternalData(this.config.cookieName,e),this.clientContext.updateContext(["user_id",e]),this.userId=e}getOrGenerateUserId(){return(0,i.fS)((()=>(0,i.fS)(a.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie())}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const r=(0,i.DT)(a.Gz);return(0,n.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),i.ij,(0,i.tS)(r))}}},6919:(e,r,t)=>{t.d(r,{W:()=>i});var n=t(6013);class i{constructor(e,r){this.clientContext=e,this.config=r,r.viewId&&(0,n.Gz)(r.viewId)?this.set(r.viewId):this.generateAndSet()}get(){return this.viewId}generateAndSet(){return this.set((0,n.k$)())}set(e){return this.viewId=e,this.clientContext.updateContext(["view_id",this.viewId]),this.viewId}}},2485:(e,r,t)=>{t.d(r,{_:()=>i});var n=t(590);const i=e=>{const{logger:r,consentTracking:t}=e,i=(e,t)=>(r.debug(`DB: Failed to write ${String(t)} as consent is revoked`),Promise.resolve(t));return e=>class extends e{constructor(){super(...arguments),this.put=(0,n.vX)(super.put.bind(this),i,t.isRevoked)}}}},3195:(e,r,t)=>{t.d(r,{S:()=>c});var n=t(3735),i=t(2485),a=t(787);class s{constructor(e){this.namespace=e}put(e,r){return(0,n.zG)(this.namespace.getNamespacedStorageKey(String(r)),(r=>window.localStorage.setItem(r,JSON.stringify(e))),(e=>Promise.resolve(r)))}get(e){return(0,n.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>window.localStorage.getItem(e)),a.A,(e=>Promise.resolve(e)))}delete(e){return(0,n.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>Promise.resolve(window.localStorage.removeItem(e))))}deleteStore(){return Promise.resolve()}}const c=(e,r,t)=>new((0,n.zG)(s,(0,i._)({logger:r,consentTracking:t})))(e)},5595:(e,r,t)=>{t.d(r,{m:()=>n});class n extends Error{constructor(e){super(e),this.name="StoreClosingError"}}},1057:(e,r,t)=>{t.d(r,{Ec:()=>s,_8:()=>a});var n=t(6567),i=t(6013);const a=e=>{const r=e.__tcfapi,t={type:"aborted"},a=["tcloaded","useractioncomplete"];return r?(0,i.a4)((()=>c(r,"getTCData")),(()=>c(r,"getTCData").then((e=>"loaded"===(null==e?void 0:e.cmpStatus)&&a.includes(null==e?void 0:e.eventStatus))))).then((0,n.g_)((()=>t),(e=>({type:"loaded",data:e})))):Promise.resolve({type:"missing"})},s=e=>e.gdprApplies?(0,n.G)(e.vendor.consents):n.YP,c=(e,r)=>new Promise((t=>{e(r,2,(e=>{t(e)}))}))},3351:(e,r,t)=>{t.d(r,{D:()=>n});const n={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468}},2520:(e,r,t)=>{t.d(r,{U:()=>s});var n=t(655),i={equals:function(e,r){return e===r}},a=t(6013);class s{constructor(e,r,t,n,i,a,s,c,o,u,d){this.network=e,this.logger=r,this.api=t,this.permutiveData=n,this.messages=i,this.sessionManager=a,this.metrics=s,this.permutiveIdentity=c,this.queryManager=o,this.permutive=u,this.userId=d,this.lastUserIdentitiesChecked=new Date,this.logger.log("Enabling tpd reporting"),this.messages.on("permutive:segments:updated",(()=>{this.reportUsage()})),this.readThirdPartyCohorts(),this.lastCheckedSession=this.permutiveData.getData("third-party-data-session-id")||""}readThirdPartyCohorts(){this.userSegments=this.permutiveData.getData("third-party-data")||{},this.segmentsPromise=Promise.resolve(this.userSegments)}shouldUseSegmentsInMemory(){const e=this.lastUserIdentitiesChecked>=this.permutiveIdentity.getIdentitiesLastModified;return this.lastUserIdentitiesChecked=new Date,e&&this.lastCheckedSession===this.sessionManager.getSessionId()&&!!this.segmentsPromise}segments(){if(this.shouldUseSegmentsInMemory())return this.segmentsPromise;const e=this.sessionManager.getSessionId(),r=(0,a.b2)();this.lastCheckedSession=e;const t=this.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{}),n=Object.assign(Object.assign({},this.permutiveIdentity.getCustomerDefinedIdentitiesMap()),this.permutiveIdentity.getTPDIdentitiesMap());if(Object.keys(n).length>0){const e=this.permutiveIdentity.getPrioritizedIdentities(n),t=c(e);this.api.tpd(this.metrics,t).then((e=>{this.userSegments=o(e),r.resolve(this.userSegments)})).catch((e=>{this.network.error(`Third Party Data segments retrieval failed with reason: ${e}`,this.userId.get()),r.resolve({})}))}else r.resolve({});const s=r.promise.then((e=>this.userSegments));return s.then((r=>{this.permutiveData.setData("third-party-data-session-id",e),this.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",t);const n=this.permutiveData.getData("third-party-data")||{},s=(0,a.rB)((0,a.rB)(i)),c=(0,a.rB)(i);if(0===Object.keys(n).length||!s.equals(n,r)){this.permutiveData.setData("third-party-data",this.userSegments);const e=Object.entries(r||{});(n?e.filter((([e,r])=>!c.equals(n[e]||{},r))):e).forEach((([e,r])=>this.fireSegments(e,Object.keys(r))))}})),this.segmentsPromise=s}reset(){this.segmentsPromise=null,this.userSegments={}}fireSegments(e,r){this.permutive.track("ThirdPartySegments",{data_provider:e,segments:r})}reportUsage(){const e=u(this.queryManager.stateMap.value),r=(0,a.vp)(JSON.stringify(e));if(this.permutiveData.getData("third-party-data-usage")!==r&&Object.keys(e).length>0){this.permutiveData.setData("third-party-data-usage",r);const t={user_id:this.userId.get(),time:new Date,tpd_segments:e};this.api.tpdUsage(this.metrics,t)}}}const c=e=>(null==e?void 0:e.reduce(((e,r)=>(e[r.tag]=r.id,e)),{}))||{},o=e=>Object.entries(e).reduce(((e,[r,t])=>Object.assign(Object.assign({},e),{[r]:(0,a.j5)(t)})),{}),u=e=>{const r={},t=Object.keys(e),i=t.length;for(let a=0;a<i;a++){const i=t[a],s=e[i],{activations:c}=s;(0,n._T)(s,["activations"]);c&&Object.keys(c).length>0&&(r[i]=c)}return r}},2223:(e,r,t)=>{t.d(r,{C:()=>o});var n=t(655),i=t(9320),a=t(3735);const s=(c=[[{name:"dfp",import:Promise.resolve().then(t.bind(t,242))}],[],[],[],[],[],[],[],[{name:"dbm",import:Promise.resolve().then(t.bind(t,2863))}],[{name:"ddp",import:Promise.resolve().then(t.bind(t,208))}],[],[{name:"facebook_pixel_v2",import:Promise.resolve().then(t.bind(t,4892))}],[],[],[],[],[{name:"overlays",import:Promise.resolve().then(t.bind(t,718))}],[],[],[],[],[],[],[],[{name:"scriptrunner",import:Promise.resolve().then(t.bind(t,7926))}],[],[],[{name:"twitter_pixel",import:Promise.resolve().then(t.bind(t,7791))}],[{name:"web",import:Promise.resolve().then(t.bind(t,8482))}],[],[]],(0,a.zG)((0,i.xH)(c),(0,i.u4)({},((e,r)=>Object.assign(Object.assign({},e),{[r.name]:r.import})))));var c;const o=({_internals:e,logger:r,network:t,permutiveMethods:i,q:a,clientContext:c})=>{const o=Object.entries(s).map((([s,o])=>(0,n.mG)(void 0,void 0,void 0,(function*(){return r.log(`Loading addon ${s}`),(yield o).load(a,i,e,t,c)}))));return Promise.all(o)}},1567:(e,r,t)=>{t.r(r),t.d(r,{createAddon:()=>k,getCachedClassificationModelSegments:()=>_,getCachedCleanRoomSegments:()=>v,getCachedDFPSegments:()=>b});var n=t(2688),i=t(9320),a=t(3735),s=t(6567),c=t(2751);var o=t(5506),u=t(6013);const d=e=>Array.isArray(e)?{gam:e,xandrSsp:[]}:e,l="_pdfps";t(9678);let f=!1;let p;const g=e=>{const{logger:r}=e;!0!==f&&googletag.pubadsReady&&(null!=p||(p=({slot:t})=>{const{getContentUrl:n}=t;if(!n||"function"!=typeof n)return;(0,a.zG)(n(),(0,c.pn)("&trunc=1"))&&(r.debug("DFP content URL has been truncated!"),(({metrics:e,logger:r})=>{f||(e.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),f=!0,r.debug("DFP has exceeded targeting limit"))})(e),googletag.pubads().removeEventListener("slotRenderEnded",p),p=null)}),googletag.pubads().addEventListener("slotRenderEnded",p))},m={liveSegments:[],classificationModelSegments:[],cleanRoomSegments:[],eligibleSegments:{}},h={segments:m,getGAMKeyValues:()=>({permutive:h.segments.liveSegments.join(",")})},_=e=>{const r=s.fS((()=>({gam:[],xandrSsp:[]})));return(0,a.zG)(e.getExternalJsonData("_pclmc"),s.ij,(0,s.UI)(d),r)},v=e=>{const r=e.getExternalJsonData("_pcrdbs")||[],t=e.getExternalJsonData("_pcrprs")||[];return(0,i.G0)(c.Eq)(r)(t)},b=e=>e.getExternalJsonData(l)||[],w=(e,r)=>e.filter((e=>e in r)).map((e=>r[e])),y=(e,r)=>{const{logger:t,externalData:a,network:s}=e;let c=r.map(String).concat(m.classificationModelSegments).concat(m.cleanRoomSegments);if(0===c.length)return t.debug("DFP has no targeting values, skipping update"),m.liveSegments;t.debug("DFP is updating with targeting values",c),((e,r,t)=>{const{logger:n}=e;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],g(e),window.googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:a}=googletag.pubads(),s=e("permutive")||[],c=Object.values(r.eligibleSegments).map(String).concat(r.classificationModelSegments).concat(r.cleanRoomSegments).concat("rts"),o=(0,i.uK)((e=>c.includes(e))),{left:u}=o(s),d=t.concat(u).concat("rts");n.debug("DFP setting GPT targeting to",d),a("permutive",d)}))})(e,m,c);try{a.setExternalJsonData(l,c)}catch(e){const r=(0,n.w)(e),i="DFP failed to set data. Got:";t.error(i,r),s.error(`${i} ${r.message}`)}return(({api:e,logger:r},t)=>{(0,o.$S)("sync_segments_cookie",!1)?(r.debug("DFP syncing segment cookie _pdfps"),e.segmentSync({key:l,value:t})):r.debug("DFP sync segments cookie not enabled, skipping sync")})(e,JSON.stringify(c)),t.debug("DFP live segments updated to",r),r},q=e=>{const{logger:r,messages:t,queryManager:n,externalData:i,cookies:a,network:s,userId:c}=e;t.on("permutive:segments:updated",(0,u.Z_)(s,c,(()=>{r.debug("DFP received 'permutive:segments:updated' event");const t=n.userSegments.getAllAsList();m.liveSegments=((e,r)=>{const{logger:t}=e,n=w(r,m.eligibleSegments);return(0,u.cO)(n,m.liveSegments)?(t.debug("DFP new segments are equal to live segments, skipping update"),m.liveSegments):y(e,n)})(e,t)}))),t.on("permutive:classificationmodels:db:updated",(0,u.Z_)(s,c,(t=>{r.debug("DFP received 'permutive:classificationmodels:db:updated' event"),m.classificationModelSegments=t.gam,m.liveSegments=y(e,m.liveSegments)}))),t.on("permutive:cleanroom:db:updated",(0,u.Z_)(s,c,(t=>{r.debug("DFP received 'permutive:cleanroom:db:updated' event"),m.cleanRoomSegments=t,m.liveSegments=y(e,m.liveSegments)}))),t.on("permutive:reset",(0,u.Z_)(s,c,(()=>{r.debug("DFP received 'permutive:reset' event"),i.removeExternalData(l),a.deleteCookie(l),m.liveSegments=[]})))},k=e=>{const{logger:r,activationManager:t,queryManager:n,messages:i,externalData:a}=e;m.classificationModelSegments=_(a).gam,m.cleanRoomSegments=v(a),m.eligibleSegments=(e=>{const r=e.getSpecializedActivations("dfp"),t={};for(const e of r.dfp)t[e]=e;for(const e of Object.keys(r.dfp_legacy)){const n=Number(e);t[n]=r.dfp_legacy[n]}return t})(t),m.liveSegments=b(a),r.debug("DFP initialised with segments",m);const s=n.userSegments.getAllAsList(),c=w(s,m.eligibleSegments);return m.liveSegments=y(e,c),q(e),i.emit("permutive:dfp:ready"),h}},242:(e,r,t)=>{t.r(r),t.d(r,{load:()=>c});var n=t(64),i=t(6013),a=t(1567);const s={},c=(e,r,t)=>{e.push({functionName:"addon",arguments:["dfp",{}]});window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>o(r,t)))},o=(e,r)=>{e.ready(r.makeSafe((()=>_(r.metrics))),"realtime"),v(r.externalData),y(r.userId,r.viewId),p(e),googletag.cmd.push((()=>{g(e),m(e)})),window.addEventListener("message",d(e),!1)},u=({advertiserId:e,campaignId:r,lineItemId:t,creativeId:n})=>({advertiser_id:(0,i.ke)(e),campaign_id:(0,i.ke)(r),line_item_id:(0,i.ke)(t),creative_id:(0,i.ke)(n)}),d=e=>r=>{var t;try{const n=JSON.parse(r.data);if(!n.permutive_type||"google_ad_click"!==n.permutive_type)return;const{ad_unit_path:i,creative_id:a,advertiser_id:c,order_id:o,line_item_id:d}=null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},f=u({lineItemId:d,advertiserId:c,campaignId:o,creativeId:a});let p;Object.keys(s).some((e=>{const{slot:r,creative_id:t}=s[e];if((null==r?void 0:r.ad_unit_path)===i&&t===f.creative_id)return p=s[e],!0})),p=null!=p?p:Object.assign(Object.assign({},f),{is_empty:!1}),l(e,p)}catch(e){}},l=(e,r)=>{n.PH&&r&&e.track("SlotClicked",r)},f=(e,r,t)=>{s[r]=t,h(e,t),w(e,r)},p=e=>{const r=googletag.pubadsReady&&googletag.pubads().getSlots();r&&r.forEach((r=>{const t=r.getResponseInformation();if(!t)return;const n=Object.assign(Object.assign({},u(t)),{is_empty:!1,service_name:"publisher_ads",slot:b(r)}),i=r.getSlotElementId();f(e,i,n)}))},g=e=>{googletag.pubads().addEventListener("slotRenderEnded",(r=>{const t=Object.assign(Object.assign({},u(r)),{is_empty:r.isEmpty,service_name:r.serviceName,slot:b(r.slot)});if(r.size){const[e,n]=r.size;"number"==typeof e&&"number"==typeof n&&(t.width=e,t.height=n)}const n=r.slot.getSlotElementId();f(e,n,t)}))},m=e=>{n.EW&&googletag.pubads().addEventListener("impressionViewable",(({slot:r,serviceName:t})=>{const n=r.getResponseInformation();if(!n)return;const i=Object.assign(Object.assign({},u(n)),{service_name:t,slot:b(r)});e.track("SlotViewable",i)}))},h=(e,r)=>{if(!n.CL)return;var t;t=Object.assign(Object.assign({},r),{rendered_timestamp:Date.now()}),e.track("SlotRendered",t)},_=e=>{let r=0;const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((e=>e.getResponseInformation()&&r++));const n=0===r?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:n,value:1,labels:{target:"dfp"}})},v=e=>{const r=(0,a.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:t}=googletag.pubads(),n=e("permutive")||[];t("permutive",[...new Set([...r.map(String),...n])])}))},b=e=>{const r={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return n.jH?Object.assign(Object.assign({},r),(()=>{const r={},t=[];let n=[];const i=(e,i)=>{const a="slot"===e?e=>r[e]=1:()=>{},s=i.getTargetingKeys();n=s;for(let s=0;s<n.length;s++){const c=n[s];if(void 0!==r[c]&&"service"===e)continue;const o=[],u=i.getTargeting(c);for(let e=0;e<u.length;e++)o.push(u[e].toString());o.length>0&&(a(c),t.push({key:c,value:o}))}};return i("slot",e),i("service",googletag.pubads()),{targeting_keys:t}})()):r},w=(e,r)=>{let t=!1;const n=()=>{t&&l(e,s[r])},i=()=>{t=!0},a=()=>{t=!1};try{window.addEventListener("blur",n);const e=document.getElementById(r);e.addEventListener("mouseover",i),e.addEventListener("mouseout",a)}catch(e){}},y=(e,r)=>{const{setTargeting:t}=googletag.pubads()}},718:(e,r,t)=>{t.r(r),t.d(r,{OverlaysAddon:()=>a,load:()=>i});var n=t(6013);const i=e=>{e.unshift({functionName:"addon",arguments:["overlays",{}]})};class a{constructor(e){const r=this;this.permutive=e.permutive,this.options=e,this.activations=this.options.activationManager.getActivations("overlays"),this.loadedImageCounts={};for(let t=0;t<this.activations.length;t++){const i=this.activations[t],a=i.getSegmentCode(),s=i.getTriggerType(),c=i.getConfig(),o=this.buildOverlayCss(c,t);document.head.insertAdjacentHTML("beforeend",o);const u=this.buildOverlayBody(c,t);document.body.insertAdjacentHTML("beforeend",u);const d=`permutive-overlay-${t}`,l=document.getElementById(d),f=l.getElementsByClassName("close")[0],p=l.getElementsByClassName("content")[0],g=()=>{l.style.visibility="hidden",l.style.opacity="0"},m=e=>{p.contains(e.target)||(g(),l.removeEventListener("click",m))};f.addEventListener("click",g),l.addEventListener("click",m);[].slice.call(l.getElementsByTagName("a")).slice(1).forEach((e=>{e.addEventListener("click",(function(){i.trackConversion({useBeacon:!0})}))}));const h=l.getElementsByTagName("form")[0];h&&h.addEventListener("submit",(function(e){e.preventDefault(),i.trackConversion({success:function(){h.submit()}})}));const _=function(e,t){r.showOverlay(e),t.trackImpression()};"EveryTime"===s?this.permutive.segment(a,(0,n.Z_)(e.network,e.userId,(e=>{e?_(d,i):this.permutive.trigger(a,"result",(function(e){e.result&&_(d,i)}))}))):"OnEntry"===s?this.permutive.trigger(a,"result",(0,n.Z_)(e.network,e.userId,(function(e){e.result&&_(d,i)}))):"OnExit"===s&&this.permutive.trigger(a,"result",(0,n.Z_)(e.network,e.userId,(function(e){e.result||_(d,i)})))}}buildOverlayCss(e,r){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+r).replace(/\${modal_class}/g,"permutive-modal-"+r).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())}buildOverlayBody(e,r){const t=this.options.config.windowKey;let n="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(n='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):n=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+r).replace(/\${modal_class}/g,"permutive-modal-"+r).replace("${content}",n).replace(/<img /g,`<img onload='window[${t}].addons.overlays.loadedImage("permutive-overlay-" + num + "")' `)}showOverlay(e){const r=document.getElementById(`${e}`),t=()=>{const e=r.getElementsByTagName("div")[0],t=e.getBoundingClientRect().height,n=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-n/2+"px",e.style.top=window.innerHeight/2-t/2+"px",r.style.visibility="visible",r.style.opacity="1"},n=r.getElementsByTagName("img");if(n.length>0){let r=0;const i=()=>{r<10&&(!(e in this.loadedImageCounts)||this.loadedImageCounts[e]<n.length)?(r+=1,setTimeout(i,500)):t()};i()}else t()}loadedImage(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1}}},2863:(e,r,t)=>{t.r(r),t.d(r,{load:()=>n});const n=e=>{e.push({functionName:"addon",arguments:["dbm",{}]})}},208:(e,r,t)=>{t.r(r),t.d(r,{DDPPixel:()=>i,load:()=>a});const n=("https:"===location.protocol?"https:":"http:")+"//cm.g.doubleclick.net/pixel?google_nid=permutive_dmp&google_cm&type=ddp&k=";class i extends class{constructor(e,r,t){this.options=e,this.storageKey=r,this.syncTimeoutSeconds=t;const n=this.options.permutiveData.getData(this.storageKey);this.isExpired(n)&&(this.fire(this.makeUrl(e.config.apiKey,e.state.userId.get())),this.options.permutiveData.setData(r,(new Date).getTime()))}fire(e){(new Image).src=e}isExpired(e){return isNaN(e)||(new Date).getTime()>e+1e3*this.syncTimeoutSeconds}}{constructor(e){super(e,"addon:ddp",86400)}makeUrl(e,r){return n+e+"&u="+r}}const a=()=>{}},4892:(e,r,t)=>{t.r(r),t.d(r,{FacebookV2Pixel:()=>i,load:()=>a});var n=t(6013);class i extends class extends class{constructor(e,r){this.isFirstRun=void 0===e.permutiveData.getData(r),this.cachedSegmentsMembership=e.userSegments.getAllAsMap(),this.isFirstRun&&e.permutiveData.setData(r,!0),e.messages.on("permutive:reset",(()=>e.permutiveData.setData(r,!1)))}}{constructor(e,r,t){super(e,t);e.activationManager.getActivations(r).forEach((r=>{const t=r.getSegmentCode(),n=t in this.cachedSegmentsMembership;this.isFirstRun&&n?this.fire(r,n):e.permutive.trigger(t,"",(e=>{this.fire(r,e.result)}))}))}}{constructor(e){super(e,"facebook_pixel_v2","addon:facebook_pixel_v2")}fire(e,r){fbq("trackCustom",!0===r?"PermutiveSegmentEntry":"PermutiveSegmentExit",{segment_id:e.getSegmentCode()}),e.trackImpression()}}const a=(e,r)=>{(0,n.a4)((()=>r.addon("facebook_pixel_v2",{})),(()=>"undefined"!=typeof fbq),{waitTimeInMs:1e3,maxAttempts:3})}},7926:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ScriptRunnerAddon:()=>ScriptRunnerAddon,load:()=>load});const load=e=>{e.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};class ScriptRunnerAddon{constructor(options){this.permutive=options.permutive,this.options=options,this.network=options.network,this.activations=this.options.activationManager.getActivations("scriptrunner");for(let i=0;i<this.activations.length;i++){const activation=this.activations[i],triggerType=activation.getTriggerType(),segmentCode=activation.getSegmentCode(),run=activation=>{const script=activation.getConfig().script.replace(/impression\(\)/g,"activation.trackImpression();").replace(/conversion\(\)/g,"activation.trackConversion();");try{eval(script)}catch(e){e instanceof Error&&(e.message="Error running custom script: "+e.message,this.network.error(e,this.options.userId.get()))}};"EveryTime"===triggerType?this.permutive.segment(segmentCode,(e=>{e?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)}))})):"OnEntry"===triggerType?this.options.queryManager.segmentEntryQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(segmentCode,"result",(function(e){e.result&&run(activation)})):"OnExit"===triggerType&&(this.options.queryManager.segmentExitQueryCodes.has(segmentCode)?run(activation):this.permutive.trigger(activation.getSegmentCode(),"result",(function(e){e.result||run(activation)})))}}}},7791:(e,r,t)=>{t.r(r),t.d(r,{TwitterAddon:()=>i,load:()=>n});const n=e=>{e.push({functionName:"addon",arguments:["twitter_pixel",{}]})};class i{constructor(e){const r=this;this.options=e,this.firedSegments=this.options.permutiveData.getData("addon:twitter_pixel")||{},this.activations=this.options.activationManager.getActivations("twitter_pixel");const t=0===Object.keys(this.firedSegments).length;this.eligibleSegments={};for(let e=0;e<this.activations.length;e++)this.eligibleSegments[this.activations[e].getSegmentCode()]=this.activations[e];t&&this.firePixelsIfNecessary(this.options.userSegments.getAllAsList()),this.options.messages.on("permutive:segments:updated",(()=>{r.firePixelsIfNecessary(this.options.userSegments.getAllAsList())})),this.options.messages.on("permutive:reset",(()=>{r.firedSegments={},this.options.permutiveData.setData("addon:twitter_pixel",{})}))}firePixelsIfNecessary(e){for(let r=0;r<e.length;r++){const t=e[r];t in this.eligibleSegments&&!(t in this.firedSegments)&&(this.firePixel(this.eligibleSegments[t]),this.firedSegments[t]=1)}this.options.permutiveData.setData("addon:twitter_pixel",this.firedSegments)}firePixel(e){(new Image).src=`https://analytics.twitter.com/i/adsct?txn_id=${e.getConfig().audience_tag_id}&p_id=Twitter`,e.trackImpression()}}},8482:(e,r,t)=>{t.r(r),t.d(r,{WebAddon:()=>E,load:()=>k});var n=t(655),i=t(2688),a=t(70),s=t(3735),c=t(4011),o=t(6567),u=t(7209),d=t(64),l=t(6013),f=t(3760),p=t(5506);const g=(0,p.MU)("add_alchemy_entities",!1),m=(0,p.MU)("add_alchemy_taxonomy",!1);function h(e){return Object.assign(Object.assign(Object.assign({},e&&m?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),e&&g?{entity_names:"$alchemy_entity_names"}:{}),{})}function _(e,r,t,n){const i=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),e),r);t.track("Pageview",i).then((e=>{n.emit("permutive:event:pageview",e)}))}function v(e,r,t,n,i,a){return Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},n),t),{aggregations:Object.assign({PageviewEngagement:Object.assign({engaged_time:e},d.UW?{completion:r}:{})},d.ED?{SegmentEntry:Array.from(i),SegmentExit:Array.from(a)}:{})})}function b(e,r,t,n,i,a,s,c=!0,u=o.YP){const d=v(e,r,t,n,i,a),l=(0,o.fS)((()=>null))(u);let f={useBeacon:c};null!==l&&(f=Object.assign(Object.assign({},f),{unprocessedData:l})),s.track("PageviewComplete",d,f)}const w=["mousemove","click","scroll"],y=["email","tel","submit","reset","button","file","password","radio","checkbox"],q=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],k=(e,r)=>{0};class E{constructor(e){this.dirtyState=!1,this.totalCompletion=0,this.totalEngagedTime=0,this.hasPageviewCompleteFired=!1,this.cleanupPageEngagementDetection=s.Q1,this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.unprocessedPVC=e.unprocessedPVC,this.options.customProperties.overrideCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0,d.Uy&&this.resetTimeout()}).bind(this),_(h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),d.t2&&(this.timerHandle=this.registerEngagementInterval(this.getEventInterval())),d.Uy&&(this.setPageviewCompleteTimeout(d.MU),(0,l.aq)((()=>{this.hasPageviewCompleteFired||b(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,this.permutive)}),navigator.userAgent))}sendLinkClickEvent(e,r){if(window.location.href&&e.href){const t=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:t},{useBeacon:r})}}sendFormSubmissionEvent(e){{const r=e.currentTarget,t={form:Object.assign(Object.assign(Object.assign({method:r.method||"GET",properties:this.serializeForm(r)},"string"==typeof r.id?{id:r.id}:{}),r.name&&"string"==typeof r.name?{name:r.name}:{}),r.action&&"string"==typeof r.action?{action:r.action}:{})};this.permutive.track("FormSubmission",t)}}trackEngagementInterval(e){return(0,s.zG)(this.updateState(e),(({engaged_time:e,total_engaged_time:r,completion:t,total_completion:n})=>function(e,r,t,n,i,a){const s=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:r},i),{completion:t,total_completion:n});a.track("PageviewEngagement",s)}(e,r,t,n,this.options.customProperties.getCustomProps(),this.permutive)),(e=>{if(!this.hasPageviewCompleteFired)return function(e,r,t,n,i,a,s,c,o,u){const d=v(e,r,s,c,o,u);return i.then((e=>{const r={props:d,sessionId:t,viewId:n,client:e};a.put(r)}))}(this.totalEngagedTime,this.totalCompletion,this.options.sessionManager.getSessionId(),this.options.viewId.get(),this.clientContext.getClient(),this.unprocessedPVC,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes)}))}reset(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.disablePageEngagementDetection(),d.Uy){const e=yield this.unprocessedPVC.getIfPresent();this.hasPageviewCompleteFired=!1,b(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,this.permutive,!1,e)}this.dirtyState=!1,this.options.state.viewId.generateAndSet(),this.totalCompletion=0,this.totalEngagedTime=0,this.options.customProperties.overrideCustomProps(e.page||{}),this.updateWebOptions(e),this.enablePageEngagementDetection();const r={logger:this.logger,config:Object.assign(Object.assign({},this.options.config),{watson:e.watson}),clientContext:this.clientContext,api:this.api,permutiveData:this.options.permutiveData,metrics:this.options.metrics,sessionManager:this.options.sessionManager,enrichers:this.options.enrichers,network:this.options.network};(0,f.H)(r)().then((()=>{_(h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),d.t2&&(clearInterval(this.timerHandle),this.timerHandle=this.registerEngagementInterval(this.getEventInterval()))}))}))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==y.indexOf(e.type.toLowerCase())||-1!==q.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return setInterval((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),r=t=>e(t)?(0,o.G)(t):t.parentElement?e(t.parentElement)?(0,o.G)(t.parentElement):r(t.parentElement):o.YP;d.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>{e.addEventListener("submit",(0,l.Z_)(this.options.network,this.options.userId,this.sendFormSubmissionEvent.bind(this)))})),d.qr&&document.body.addEventListener("click",(e=>{if(e.target instanceof Element){const t=r(e.target);return(0,o.g_)((()=>{}),(r=>this.sendLinkClickEvent(r,((e,r)=>!("_blank"===r.target||e.metaKey||e.ctrlKey||e.shiftKey||2===e.which||3===e.which))(e,r))))(t)}}),{capture:!0})}updateState(e){const r=Math.max(this.totalCompletion,this.getCurrentCompletion()),t=r-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=r,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:t,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,s.zG)((0,a.Y3)((0,s.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,u.uZ)(c.Df)(0,1)),i.w),(0,a.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,r=window.pageYOffset+window.innerHeight;return r<=0?0:r>=e?1:r/e})()}setPageviewCompleteTimeout(e){return window.setTimeout((()=>{this.hasPageviewCompleteFired||(b(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager.segmentEntryQueryCodes,this.options.queryManager.segmentExitQueryCodes,this.permutive,!1),this.hasPageviewCompleteFired=!0)}),e)}resetTimeout(){clearTimeout(this.pageviewCompleteTimeoutHandle),this.pageviewCompleteTimeoutHandle=this.setPageviewCompleteTimeout(d.MU)}registerPageEngagementCleanup(e){if("function"!=typeof e)return this.logger.warn("No page detection cleanup was registered"),null;this.cleanupPageEngagementDetection=()=>(0,a.Y3)((()=>{e(),this.cleanupPageEngagementDetection=s.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,i.w)(e))))}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,s.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,r){const t=e?window.addEventListener:window.removeEventListener;return r.forEach((e=>t(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||w}getEventInterval(){return this.options.eventInterval||5}updateWebOptions(e){var r;e.watson={enabled:"boolean"==typeof(null===(r=e.watson)||void 0===r?void 0:r.enabled)?e.watson.enabled:this.options.config.watson.enabled};const t={addPageEngagementDetection:void 0,dirtyEvents:void 0,eventInterval:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options=Object.assign(Object.assign(Object.assign({},this.options),t),e)}}},275:(e,r,t)=>{t.d(r,{J:()=>i});const n=e=>"string"==typeof e&&"$"===e[0];class i{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.getReplacementMap)}enrich(e,r){return this.enrichRecursive(e,r)}enrichRecursive(e,r){const t={output:{},isFullyEnriched:!0},i=Object.keys(e);for(let a=0;a<i.length;a++){const s=i[a],c=e[s];switch(!0){case n(c):const[e,i]=this.isPropertyReplaceable(c);t.output[s]=e?i:c,this.replacementMap.hasOwnProperty(c)&&i===c&&r&&delete t.output[s],t.isFullyEnriched=!!e&&t.isFullyEnriched;break;case null!==c&&"object"==typeof c&&c.constructor===Object:const a=this.enrichRecursive(c,r);t.output[s]=a.output,t.isFullyEnriched=t.isFullyEnriched&&a.isFullyEnriched;break;default:t.output[s]=c}}return t}isPropertyReplaceable(e){const r=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&r!==e,r]}}},3760:(e,r,t)=>{t.d(r,{B:()=>c,H:()=>o});var n=t(3735),i=t(5151),a=t(7112);const s=[],c=e=>{s.push(e)},o=e=>{const r=s.map((r=>(0,a.Y3)((()=>r.load(e)),(r=>{e.network.error(r)}))));return(0,n.zG)((0,i.RD)(r),(0,i.UI)(n.Q1))}},4762:(e,r,t)=>{t.d(r,{F:()=>a});var n=t(3735),i=t(6567);class a{constructor(e,r,t){this.urls=e,this.config=r,this.network=t}identify(e,r,t){const n=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",(0,i.G)(this.config.apiVersion)),method:"POST",payload:{user_id:r.get(),aliases:t},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(n):this.identifyPromise=n()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",(0,i.G)(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}track(e,r,t){const n=this.getTrackUrl(r,{isFullyEnriched:t,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:n,method:"POST",payload:r,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(e,r){const t=this.getTrackUrl(r,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:t,method:"POST",payload:r,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(e,r){const t=this.getTrackUrl(e,{isFullyEnriched:r,useBeacon:!0});return this.network.reqWithBeacon({url:t,payload:e})}trackBatchBeacon(e){const r=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:r,payload:e})}tpd(e,r){return this.reqWithMetrics(e,"sdk_http_tpd_seconds",{url:this.urls.getEndpointUrl("/tpd",(0,i.G)(this.config.apiVersion)),method:"POST",payload:{user_id:r},contentType:"text/plain",dataType:"json",withCredentials:!1})}tpdUsage(e,r){return this.reqWithMetrics(e,"sdk_http_tpd_usage_seconds",{url:this.urls.getEndpointUrl("/tpd/usage",(0,i.G)(this.config.apiVersion)),method:"POST",payload:r,contentType:"text/plain",dataType:"json",withCredentials:!1})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",(0,i.G)(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(e,r,t,n,a,s){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/state",(0,i.G)("v1.0"),[["fetch_unseen",JSON.stringify(s)]]),method:"POST",payload:{group_id:r,event_source_id:t,state:JSON.stringify(n),last_seen_offset:a},contentType:"text/plain",dataType:"json",withCredentials:!1})}cleanRoom(e,r){return this.network.req({url:this.urls.getAdvertiserEndpointUrl("/segment",(0,i.G)(this.config.advertiserApiVersion),[["new-session",e.toString()]]),method:"POST",payload:r,contentType:"text/plain",dataType:"json",withCredentials:!1})}classificationModels(e){return this.network.req({url:this.urls.getClassificationModelsEndpointUrl("/segment",(0,i.G)(this.config.classificationModelsApiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[]},queries_metadata:{}},r=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/8347d761-7b38-45f0-b0a8-34b664f7c00f-amp.json`;return this.network.req({url:r,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}getSocioDemoPredictions(e){return this.network.req({method:"POST",url:this.urls.getEndpointUrl("/demographic/infer/v3",(0,i.G)(this.config.apiVersion)),dataType:"json",payload:e,withCredentials:!1})}reqWithMetrics(e,r,t){const i=e.startTimer(r,{});return this.network.req(t).then((t=>(0,n.zG)(e.stopTimer(r,i),(e=>t))))}getTrackUrl(e,r){const{isFullyEnriched:t,useBeacon:n}=r,a=Array.isArray(e),s=!t;return this.urls.getEndpointUrl(a?"/batch/events":"/events",(0,i.G)(this.config.apiVersion),[["enrich",JSON.stringify(s)],["sdkp",JSON.stringify(!n)]])}getModelsUrl(e){const r=`https://${this.config.cdnBaseUrl}`;switch(e){case"binary":return`${r}/models/v2/8347d761-7b38-45f0-b0a8-34b664f7c00f-models.bin`;case"json":return`${r}/models/8347d761-7b38-45f0-b0a8-34b664f7c00f-models.json`}}}},550:(e,r,t)=>{t.d(r,{XO:()=>i,bk:()=>s,kJ:()=>n,mh:()=>a,sv:()=>c});const n=e=>Object.assign({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{}},o(e)),i=e=>Object.assign({id:e.id||null,name:e.name,time:(u(e.time)?e.time:new Date).toISOString(),properties:e.properties||{}},o(e)),a=(e,r)=>Object.assign({id:e.id,time:new Date(e.time),name:r.name,properties:r.properties},o(r)),s=e=>void 0!==e.request_id,c=e=>void 0!==e.properties,o=e=>Object.assign(Object.assign({},e.session_id?{session_id:e.session_id}:{}),e.view_id?{view_id:e.view_id}:{}),u=e=>isFinite(e)&&e instanceof Date},8110:(e,r,t)=>{t.d(r,{s:()=>i});var n=t(6567);class i{constructor(e){this.config=e,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(e,r,t=[]){return this.getUrl("base",e,r,t)}getSdkErrorsUrl(e,r){return this.getUrl("sdk-errors",e,r,[])}getAdvertiserEndpointUrl(e,r,t=[]){return this.getUrl("adv",e,r,t)}getClassificationModelsEndpointUrl(e,r,t=[]){return this.getUrl("clm",e,r,t)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm"}}getUrl(e,r,t,i){const a=this.getUrlPrefix(e),s=(0,n.g_)((()=>""),(e=>`/${e}`))(t),c=`${this.config.apiProtocol}://${this.config.apiHost}${a}${s}${r}`;return this.makeUrlWithQueryParams(c,i.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,r){const t=r.map((([e,r])=>`${e}=${r}`)).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${t}`}}},590:(e,r,t)=>{t.d(r,{NY:()=>p,vX:()=>b,D1:()=>v});var n=t(655),i=t(3735),a=t(3195);const s="permutive-consent";var c=t(6567);const o=(e,r)=>(0,i.zG)((0,c.ij)(r),(r=>!1===e&&(0,c.Wi)(r)?{isValid:!0,consentData:u()}:(e=>(0,c.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var r;return!0===e.opt_in&&"string"==typeof e.token&&(null===(r=e.token)||void 0===r?void 0:r.length)>0})(e.value))(r)?{isValid:!0,consentData:r.value}:{isValid:!1,consentData:d()})),u=()=>({opt_in:!0,token:s}),d=()=>({opt_in:!1,token:""}),l=e=>{return(0,i.ls)((r=e,e=>(0,i.zG)(o(r.consentRequired,e),(({consentData:e,isValid:t})=>(r.consentDatabase.put(e,s),t)))),(({logger:e,messages:r})=>t=>{const n=t?"given":"revoked";return e.log("Consent has been",n),r.emit(`permutive:consent:${n}`),t})(e));var r},f=e=>(r,t)=>{e.on("permutive:consent:revoked",r),e.on("permutive:consent:given",t)},p=(e,r,t,{consentRequired:c})=>(0,n.mG)(void 0,void 0,void 0,(function*(){const n={isRevoked:()=>!1,listenForConsent:i.Q1},u=(0,a.S)(t,r,n),{giveConsent:d,revokeConsent:p,isRevoked:g}=(()=>{let e=!0;return{revokeConsent:()=>e=!1,giveConsent:()=>e=!0,isRevoked:()=>!1===e}})(),m=yield u.get(s);o(c,m).isValid?d():p();const h={isRevoked:g,listenForConsent:f(e)};h.listenForConsent(p,d);return{consentTracking:h,consentValidation:l({consentDatabase:u,consentRequired:c,logger:r,messages:e}),consentDatabase:u}}));var g=t(9320),m=t(70),h=t(5151),_=t(6992);const v=e=>{const{partialTagWithKey:r}=e,t=r.key;var n;window[t].consent=(n=e,(0,i.ls)(n.consentModule.consentValidation,(e=>e?(0,_.H)(n)():null)));const a=(0,c.EQ)((()=>{return r={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,i.zG)((0,i.a9)(r.consentDatabase.get(s)),(0,h.UI)((e=>o(r.consentRequired,e).isValid)));var r}),h.of);return(0,i.zG)((0,i.zG)((({consentModule:e,tag:r})=>{const t=(0,g.Ew)((function(e){return"consent"===e.functionName}))(r.q);return(0,c.UI)((r=>e.consentValidation(r.arguments[0])))(t)})(e),a),(0,h.UI)((e=>e?(0,m.F2)(!0):(0,m.t$)("No consent to run on the page"))))},b=(e,r,t)=>(...n)=>(t()?r:e)(...n)},4910:(e,r,t)=>{t.d(r,{S:()=>L});var n=t(3735),i=t(655),a=t(6567),s=t(8206),c=t(4011),o=t(5857),u=t(64),d=t(550);const l=(e,r)=>{switch(f(e.event,e.isEventFullyEnriched,r)){case"immediate":return g(e);case"memoryOnly":return m(e);case"response":return h(e);case"deferred":return _(e);case"never":return v(e)}},f=(e,r,t)=>t?"deferred":p(e.name,r),p=(e,r)=>D.has(e)?"memoryOnly":E.has(e)?"never":r?"immediate":"response",g=({event:e,requestData:r,requestOptions:t,queryManager:a,eventsBatch:s,stateSync:u,metrics:d,logger:l})=>(0,i.mG)(void 0,void 0,void 0,(function*(){const[i,{segmentsEntered:f,segmentsExited:p}]=yield q(e,d,a,l),g=(0,o.e5)(c.Eq)((0,o.G0)(c.Eq)(new Set(r.segments),f),p);return l.log(`Adding ${e.name} to batch, with segments`,g),Promise.all([s.add(Object.assign(Object.assign({},r),{segments:[...g]}),t,"immediate"),u.sync(i)]).then(n.Q1)})),m=({event:e,metrics:r,queryManager:t,logger:i})=>q(e,r,t,i).then(n.Q1),h=({requestData:e,requestOptions:r,queryManager:t,eventsCache:n,eventHandler:i,api:a,metrics:s,logger:c})=>a.track(s,e,!1).then((i=>b(i,e,r,n,s,t,c))).then((({event:e,error:r})=>k(i,e,r))),_=({event:e,isEventFullyEnriched:r,requestData:t,api:i,eventHandler:s})=>Promise.all([i.trackBeacon(t,r),k(s,e,a.YP)]).then(n.Q1),v=({requestData:e,requestOptions:r,eventsBatch:t})=>t.add(e,r,"never"),b=(e,r,t,n,i,a,s)=>(0,d.bk)(e)?w(e,r,t):y(e,r,t,n,i,a,s),w=(e,r,t)=>{const i={name:r.name,session_id:r.session_id,view_id:r.view_id,properties:r.properties,id:null,time:new Date};return(0,n.zG)(t.error(e.error.message),(r=>Promise.resolve({event:i,error:(0,a.G)(e)})))},y=(e,r,t,i,s,c,o)=>{const u=(0,d.sv)(e)?(0,d.kJ)(Object.assign(Object.assign({},e),{session_id:r.session_id,view_id:r.view_id})):(0,d.mh)(e,r);return q(u,s,c,o).then((e=>(0,n.zG)(t.success(u),(e=>i.add(u,{persistOnDisk:!0})),(e=>({event:u,error:a.YP})))))},q=(e,r,t,i)=>S.has(e.name)?(0,n.zG)(r.startTimer("sdk_events_querylanguage_seconds",{}),(a=>t.process(e,!0).then((t=>(0,n.zG)(r.stopTimer("sdk_events_querylanguage_seconds",a),(r=>i.log("Processing event",e,"caused the following update",t)),(e=>t)))))):Promise.resolve([{},{segmentsEntered:new Set,segmentsExited:new Set}]),k=(e,r,t)=>{e.newEvent((0,d.XO)(r),(0,a.fS)((()=>null))(t))},E=new Set(["ThirdPartySegments","SlotRendered"]),D=new Set([...u.D0?["PageviewEngagement"]:[],...u.ED?["SegmentEntry","SegmentExit"]:[]]),P=new Set(["PageviewComplete"]),S=new Set(["!UpdateLookalikeModels","!UpdateThirdPartyData","FormSubmission","Pageview"]);var M=t(1057),O=t(3351);var T=t(6013);class I{constructor(e,r={}){this.wait_prev=r.wait_prev||!1,this.block_next=r.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var C=t(8941);class x{constructor(e,r,t,n,i,a,s,c,o,u,d,l,f,p,g,m,h,_,v,b,w,y,q,k,E,D,P,S,M,O,T,I,C,x){this.namespace=e,this.logger=r,this.api=t,this.eventHandler=n,this.activationManager=i,this.sessionManager=a,this.metrics=s,this.viewId=c,this.userId=o,this.network=u,this.enrichers=d,this.clientContext=l,this.unprocessedPVC=f,this.eventsBatch=p,this.queryManager=g,this.stateSync=m,this.eventsCache=h,this.taskQueue=_,this.identities=v,this.permutiveReset=b,this.messages=w,this.addons=y,this.trace=q,this.permutiveRealtime=k,this.state=E,this.customProperties=D,this.config=P,this.permutiveData=S,this.externalData=M,this.cookies=O,this.thirdParty=T,this.models=I,this.identitiesIngestor=C,this.global=x,this.initialisedAddons=[],this.triggerListeners=[]}identify(e){this.logger.debug("<call> identify",e);const r=(0,T.b2)(),t=this.identities.parseCustomerDefinedIdentities(e),n=Object.assign(Object.assign({},this.identities.getIdentitiesMap()),t.reduce(((e,{tag:r,id:t,priority:n,expiry:i})=>Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({id:t},void 0!==n?{priority:n}:{}),void 0!==i?{expiry:i}:{})})),{})),a=Object.values(n).map((e=>e.id)),c=this.identities.getPrioritizedIdentities(n);if("string"==typeof e&&(0,s.Bt)("8347d761-7b38-45f0-b0a8-34b664f7c00f","8347d761-7b38-45f0-b0a8-34b664f7c00f",a,window.location.hostname,this.userId.get()))return r.resolve(),r.promise;const o=()=>(0,i.mG)(this,void 0,void 0,(function*(){yield(0,C.WI)({logger:this.logger,queryManager:this.queryManager,thirdParty:this.thirdParty,trace:this.trace})})),u=e=>(0,i.mG)(this,void 0,void 0,(function*(){yield(0,C.Yj)({clientContext:this.clientContext,eventsCache:this.eventsCache,global:this.global,identities:this.identities,logger:this.logger,metrics:this.metrics,models:this.models,queryManager:this.queryManager,reset:this.permutiveReset,stateSync:this.stateSync,thirdParty:this.thirdParty,trace:this.trace,userId:this.userId},e.user_id)}));return this.taskQueue.add(new I((e=>(0,i.mG)(this,void 0,void 0,(function*(){this.logger.debug("<task> identify ",t);const n=yield this.api.identify(this.metrics,this.userId,c);this.identities.setIdentities(t),this.userId.isEqual(n.user_id)?yield o():yield u(n),this.logger.debug("<done> identify",t),e(),r.resolve(),yield this.identitiesIngestor.ingestIfEligible(t).catch((e=>this.network.error(`Couldn't ingest identities, got ${e}`,this.userId.get())))}))),{wait_prev:!0,block_next:!0})),r.promise}on(e,r){return this.eventHandler.addListener({name:e,callback:r,once:!1})}once(e,r){return this.eventHandler.addListener({name:e,callback:r,once:!0})}track(...e){var r,t,i;const[a,s,c]=[e[0],e[1]||{},e[2]||{}],o=this.trace.startSpan("track_event");this.logger.log("<call> track",a);const u=(0,T.b2)();if(!this.api)return this.network.error("The API hasn't been loaded."),u.reject(),u.promise;const d=null!==(r=c.unprocessedData)&&void 0!==r?r:{},f=null!==(t=d.sessionId)&&void 0!==t?t:this.sessionManager.getSessionId(),p=null!==(i=d.viewId)&&void 0!==i?i:this.viewId.get(),g={success:c.success||(e=>{}),error:c.error||((e,r)=>{})};return this.taskQueue.add(new I((e=>{this.logger.log("<task> track",a);const{output:r,isFullyEnriched:t}=this.enrichers.enrich(s,D.has(a));this.metrics.track({name:t?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});return(d.client?Promise.resolve(d.client):this.clientContext.getClient()).then((i=>{var d;const m=Object.assign(Object.assign({},r),{client:s.client?(0,T.PM)(i,s.client):i}),h={user_id:this.userId.get(),name:a,segments:this.queryManager.userSegments.getAllAsList(),properties:m,session_id:f,view_id:p},_={name:a,properties:m,session_id:f,view_id:p,time:new Date};return((e,r)=>l(e,r).then((r=>P.has(e.event.name)?e.unprocessedPVC.reset():(0,n.Q1)())))({event:_,requestData:h,isEventFullyEnriched:t,requestOptions:g,logger:this.logger,queryManager:this.queryManager,stateSync:this.stateSync,eventsCache:this.eventsCache,eventHandler:this.eventHandler,metrics:this.metrics,eventsBatch:this.eventsBatch,api:this.api,unprocessedPVC:this.unprocessedPVC},null!==(d=c.useBeacon)&&void 0!==d&&d).then((r=>{this.logger.log("<done> track",_.name),u.resolve(_),e(),o.finish()})).catch((e=>{g.error(e),this.network.error(e,this.userId.get())}))}))}))),u.promise}trigger(e,r,t){const n=(0,T.b2)();this.logger.log("<call> trigger",e),this.triggerListeners=this.triggerListeners||[];return this.taskQueue.add(new I((r=>{this.logger.log("<task> trigger",e);const i=this.messages.on("permutive:query:changed",(function(r){r.queryCode===e&&(t(r.result),n.resolve(r.result))}));this.triggerListeners.push(i),this.logger.log("<done> trigger",e),r()}))),n.promise}query(){return Promise.resolve({result:!1})}segment(e,r){const t=(0,T.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new I((n=>{var i;this.logger.log("<task> segment",e);const a=this.queryManager.stateMap.value[e];a&&(r((null===(i=null==a?void 0:a.result)||void 0===i?void 0:i.result)||!1),t.resolve()),this.logger.log("<done> segment",e),n()}))),t.promise}segments(e,r="all"){const t=(0,T.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new I((n=>{this.logger.log("<task> segments ("+r+")");const i=i=>{e(i),t.resolve(i),this.logger.log("<done> segments ("+r+")"),n()};"dfp"===r?this.messages.once("permutive:dfp:ready",(()=>{i(this.addons.dfp.segments.liveSegments)})):i(this.queryManager.userSegments.getAllAsList())}))),t.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.stateSync.reset(),this.unprocessedPVC.reset(),this.queryManager.bootstrap([])]).then((([e])=>(this.userId.set(e.id),this.eventsCache.reset()))).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.network.error(`Error resetting internals. Got ${e}`)}))}addon(e,r){const n=Object.assign(Object.assign({},r),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedPVC:this.unprocessedPVC,metrics:this.metrics,namespace:this.namespace,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,userSegments:this.queryManager.userSegments,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies});if(-1===this.initialisedAddons.indexOf(e))switch(this.initialisedAddons.push(e),e){case"web":Promise.resolve().then(t.bind(t,8482)).then((e=>this.addons.web=new e.WebAddon(n))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"nativo":case"freewheel":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"tracking_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"classification_models":case"clean_room":case"gam_log":case"socio_demo_cohorts":case"smart":case"tradedesk":case"appnexus":case"pubmatic":case"ctv":0;break;case"overlays":Promise.resolve().then(t.bind(t,718)).then((e=>this.addons.overlays=new e.OverlaysAddon(n)));break;case"scriptrunner":Promise.resolve().then(t.bind(t,7926)).then((e=>this.addons.scriptrunner=new e.ScriptRunnerAddon(n)));break;case"dfp":Promise.resolve().then(t.bind(t,1567)).then((e=>this.addons.dfp=e.createAddon(n)));break;case"facebook_pixel_v2":Promise.resolve().then(t.bind(t,4892)).then((e=>this.addons.facebook_pixel_v2=new e.FacebookV2Pixel(n)));break;case"twitter_pixel":Promise.resolve().then(t.bind(t,7791)).then((e=>this.addons.twitter_pixel=new e.TwitterAddon(n)));break;case"ddp":case"dbm":Promise.resolve().then(t.bind(t,208)).then((e=>this.addonIfTCFConsent({Addon:e.DDPPixel,key:"ddp"},n)))}else"web"===e&&!0!==r.auto_init?((e,r,t,n)=>new Promise(((i,s)=>{var c;const o=(0,a.Y3)(e);if((0,a.pC)(o))return i(o.value);t.once(r,(()=>(0,a.g_)((()=>s(new Error(`Error after waiting for event ${r}`))),i)((0,a.Y3)(e))));const u=null!==(c=null==n?void 0:n.timeout)&&void 0!==c?c:1e4;setTimeout((()=>s(new Error(`Event ${r} was not received within the timeout period ${u}ms`))),u)})))((()=>this.addons.web.reset(r)),"permutive:web:ready",this.messages).catch((e=>{this.network.error(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())})):"ctv"===e&&(null==r||r.auto_init)}addonIfTCFConsent(e,r){const t=()=>{switch(e.key){case"tradedesk":this.addons.tradedesk=new e.Addon(r);break;case"ddp":this.addons.ddp=new e.Addon(r);break;case"appnexus":this.addons.appnexus=new e.Addon(r);break;case"pubmatic":this.addons.pubmatic=new e.Addon(r)}},i=r=>r[O.D[e.key]]?t():(0,n.Q1)();return(0,M._8)(window).then((e=>{switch(e.type){case"missing":return t();case"aborted":return(0,n.Q1)();case"loaded":return(0,n.zG)((0,M.Ec)(e.data),(0,a.g_)(t,i))}}))}ready(e,r="initialised"){const t=(0,T.b2)(),n=()=>{e(),t.resolve()};switch(r){case"initialised":this.permutiveRealtime.isReady()?n():this.messages.on("permutive:ready",n);break;case"realtime":this.permutiveRealtime.isRealtime()?n():this.messages.once("permutive:realtime",n)}return t.promise}}var A=t(590);const j=e=>{const{logger:r,consentTracking:t}=e,a=(...e)=>(r.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null));return e=>class extends e{constructor(...e){super(...e),this.track=(0,A.vX)(super.track.bind(this),a,t.isRevoked),t.listenForConsent((()=>this.consentRevoked()),n.Q1)}consentRevoked(){return(0,i.mG)(this,void 0,void 0,(function*(){return yield this.sessionManager.reset(),this.reset()}))}}},L=(e,r,t,i,a,s,c,o,u,d,l,f,p,g,m,h,_,v,b,w,y,q,k,E,D,P,S,M,O,T,I,C,A,L,U)=>new((0,n.zG)(x,j({consentTracking:U,logger:r})))(e,r,t,i,a,s,c,o,u,d,l,f,p,g,m,h,_,v,b,w,y,q,k,E,D,P,S,M,O,T,I,C,A,L)},7281:(e,r,t)=>{t.d(r,{Oc:()=>d,l9:()=>l});var n=t(1828),i=t(70),a=t(3735);class s{constructor(){}setItem(e,r){return(0,a.zG)(JSON.stringify(r),(r=>window.sessionStorage.setItem(e,r)))}getItem(e){return(0,a.zG)(window.sessionStorage.getItem(e),JSON.parse)}}class c{constructor(){}setItem(){}getItem(){return null}}const o=e=>(0,i.tS)((e=>1===e.size?(0,i.F2)(null):(0,i.t$)("Iterable Maps not supported")))((e=>"function"==typeof e.Map?(0,i.F2)(new e.Map([["a",1]])):(0,i.t$)("Maps not supported"))(e)),u=e=>(0,i.tS)((e=>2===e.size?(0,i.F2)(null):(0,i.t$)("Iterable Sets not supported")))((e=>"function"==typeof e.Set?(0,i.F2)(new e.Set([1,2])):(0,i.t$)("Sets not supported"))(e)),d=e=>(0,a.zG)((0,n.gz)(i.G5)(o(e),u(e),(e=>{const r=["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"];return(0,i.Y3)((()=>{const r="_permutive_ls_test";e.localStorage.setItem(r,r),e.localStorage.removeItem(r)}),(t=>e.localStorage&&0===e.localStorage.remainingSpace||r.some((e=>-1!==String(t).indexOf(e)))?"localStorage quota exceeded":"localStorage not supported"))})(e),(e=>e.Worker&&e.Blob?(0,i.F2)(null):(0,i.t$)("WebWorkers not supported"))(e)),(e=>(0,i.UI)(a.Q1)(e))),l=e=>{const r=(0,i.Y3)((()=>{const r="_permutive_ls_test";e.sessionStorage.setItem(r,r),e.sessionStorage.getItem(r),e.sessionStorage.removeItem(r)}),(e=>"sessionStorage not supported"));return(0,a.zG)(r,(0,i.g_)((()=>new c),(()=>new s)))}},8941:(e,r,t)=>{t.d(r,{Yj:()=>l,TZ:()=>d,MA:()=>p,WI:()=>g});var n=t(655),i=t(2688),a=t(3735),s=t(6567);var c=t(8206),o=t(449);const u=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){yield e.identityPromise,yield function(e,r){return(0,c.Bt)("8347d761-7b38-45f0-b0a8-34b664f7c00f","8347d761-7b38-45f0-b0a8-34b664f7c00f",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?r.reset():Promise.resolve()}(e,e.permutiveMethods);const r=yield function(e){const r=e.trace.startSpan("identify");0;return(e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const{logger:r,network:t,api:i,userId:a,identities:s,metrics:c,identitiesIngestor:o,messages:u}=e,d=s.extractIdentifyFromQueue(e),l=s.getIdentitiesMap(),f=d.reduce(((e,{tag:r,id:t,priority:n,expiry:i})=>Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({id:t},i?{expiry:i}:{}),void 0!==n?{priority:n}:{})})),{}),p=Object.assign(Object.assign({},l),f);r.log("Starting identification... Identities are:",p);const g=s.getPrioritizedIdentities(p),m=yield i.identify(c,a,g).then((e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const t=e.user_id;return a.isEqual(t)?{identityChanged:!1}:(r.log(`Got different user id from API: ${t}`),{identityChanged:!0,userId:t})})))).catch((e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const r=a.get();return t.error(`Couldn't set identity for user ${r}. Got ${e}`,r),{identityChanged:!1}}))));return s.setIdentities(Object.entries(p).map((([e,{id:r,priority:t,expiry:n}])=>Object.assign(Object.assign({tag:e,id:r},n?{expiry:n}:{}),void 0!==t?{priority:t}:{})))),o.ingestIfEligible(g).catch((e=>t.error(`Couldn't ingest identities, got ${e}`,m.identityChanged?m.userId:a.get()))),u.emit("permutive:user:ready"),r.debug("<done> init identity ",m),m})))(e).catch((r=>(e.network.error(`Failed to identify. Got ${(0,i.w)(r)}`),{identityChanged:!1}))).then((e=>(r.finish(),e)))}(e);return r.identityChanged?(e.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{}}),yield l(e,r.userId)):(e.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{}}),e.logger.log("Identity has not changed"),yield g(e)),r})),d=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){u(e),yield function(e,r,t,i,c,o,u){e.log("Assuming identity hasn't changed");const d=c.hasNewOrModifiedQueries,l=r.startSpan(`qm_bootstrap_${d}`),f=()=>d?o.all().then((e=>c.bootstrap(e))):c.bootstrap([]);return o.resetIfNeeded().then((e=>e?(u.track({name:"sdk_reset_hearst_count",value:1,labels:{}}),t.reset()):Promise.resolve())).then(f).then((()=>i.getIfPresent())).then((0,s.g_)((()=>e.log("No unprocessed PVC data detected")),(r=>(0,a.zG)(e.log("Unprocessed PVC data detected",r),(e=>{const{props:t}=r;return{props:t,unprocessedData:(0,n._T)(r,["props"])}}),(({props:e,unprocessedData:r})=>t.track("PageviewComplete",e,{unprocessedData:r}).finally((()=>i.reset()))))))).then((()=>l.finish()))}(e.logger,e.trace,e.permutiveMethods,e.unprocessedPVC,e.queryManager,e.eventsCache,e.metrics),f(e.global,e.clientContext)}));function l(e,r){return(0,n.mG)(this,void 0,void 0,(function*(){e.logger.log("Identity has changed"),yield e.reset.reset(),e.userId.set(r),f(e.global,e.clientContext),e.identities.setIdentities([]);const t=yield e.eventsCache.reset(o.m),n=e.trace.startSpan("ss_reset_sync");e.thirdParty.reset(),yield h(e,t),n.finish()}))}function f(e,r){return e.context=r.getContext()}function p({logger:e,queryManager:r,models:t,trace:i}){return(0,n.mG)(this,void 0,void 0,(function*(){const n=i.startSpan("lal_http"),a=yield t.getModels();n.finish(),e.debug("Updating lookalike models");const s=i.startSpan("update_env_lal");return yield r.updateLAL(a),s.finish(),a}))}function g({logger:e,queryManager:r,thirdParty:t,trace:i}){return(0,n.mG)(this,void 0,void 0,(function*(){const n=i.startSpan("tpd_http"),a=yield t.segments();n.finish(),e.log("Updating TPD segments");const s=i.startSpan("update_env_tpd");return yield r.updateTPD(a),s.finish(),a}))}function m(e){const r=e.trace.startSpan("tpd_models");return Promise.all([g(e),p(e)]).then((([t,n])=>{e.logger.debug("Loaded TPD segments and lookalike models",t,n),r.finish()}))}const h=(e,r)=>(0,n.mG)(void 0,void 0,void 0,(function*(){yield Promise.all([m(e),e.stateSync.resetSync(),e.queryManager.bootstrap(r)])}))},6785:(e,r,t)=>{function n(e,r,t,n,i){i.debug("set SDK as ready"),e.setAsReady(),r.emit("permutive:api:ready"),t.track({name:"sdk_local_storage_byte_total",value:n.getStateSizeInBytes(),labels:{}}),t.track({name:"sdk_query_states_byte_total",value:e.getStateSizeInBytes(),labels:{}})}t.d(r,{R:()=>n})},3368:(e,r,t)=>{t.d(r,{$o:()=>_,uU:()=>b,je:()=>v});var n=t(70),i=t(3735),a=t(655),s=t(2688),c=t(6567),o=t(3629);class u{constructor(e,r,t){this.urls=e,this.config=r,this.logger=t}req(e){return this.reqImpl(e).then((e=>(0,i.MZ)(e)))}reqWithBeacon({url:e,payload:r}){return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(e,JSON.stringify(r))}error(e,r,t){return(0,a.mG)(this,void 0,void 0,(function*(){this.logger.error((0,s.w)(e)),this.config.sendClientErrors&&(yield this.errorNetwork(e,r,t).catch((0,i.ls)(s.w,(e=>this.logger.error(e)))))}))}errorNetwork(e,r,t){var n,i,a,s,u,d,l,f;const p=e instanceof Error?e:new Error(JSON.stringify(e)),g={error_message:null!==(i=null===(n=null==p?void 0:p.message)||void 0===n?void 0:n.toString())&&void 0!==i?i:"",stack_trace:null===(a=null==p?void 0:p.stack)||void 0===a?void 0:a.split("\n")},m=r?{user_id:r}:{},h=Object.assign({platform:"web",sdk_version:"v19.29.0",ql_runtime_version:"v5.1.1",timestamp:null!=t?t:new Date,domain:null!==(u=null===(s=null===window||void 0===window?void 0:window.location)||void 0===s?void 0:s.hostname)&&void 0!==u?u:"",url:(0,o.bk)(null===(d=null===window||void 0===window?void 0:window.location)||void 0===d?void 0:d.href),referrer:(0,o.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(l=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==l?l:"",error_message:null!==(f=g.error_message)&&void 0!==f?f:String(e),stack_trace:g.stack_trace},m);return this.req({url:this.urls.getSdkErrorsUrl("/errors",(0,c.G)(this.config.sdkErrorsApiVersion)),method:"POST",payload:[h],contentType:"text/plain",dataType:"text",withCredentials:!1})}reqImpl(e){const{url:r,dataType:t,contentType:i,method:a,withCredentials:s,timeout:c}=e;return new Promise(((o,u)=>{const d=new XMLHttpRequest,l="POST"===e.method?"string"==typeof(f=e.payload)?f:JSON.stringify(f):null;var f;d.onload=function(){if(this.status>=400){const e="text"===this.responseType||""===this.responseType?this.responseText:"Couldn't access response text";u(`Failed ajax request. Status code was ${this.status}. ${e}`)}else if("json"===t){const e=this.responseText?(0,n.Y3)((()=>JSON.parse(this.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(this.responseText)}. Got ${e}`)):(0,n.F2)(null);(0,n.g_)(u,o)(e)}else o("text"===t?this.responseText:this.response)},d.onerror=()=>u(new Error("Network request failed")),d.ontimeout=()=>u(new Error("Network request timed out")),d.open(a,r,!0),i&&d.setRequestHeader("content-type",i),d.timeout=c||d.timeout,d.withCredentials=s||d.withCredentials,d.responseType="binary"===t?"arraybuffer":d.responseType,d.send(l)}))}}var d=t(6013);const l="__permutive.",f="__permutiveConfigQueryParams";const p={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",apiProtocol:"https",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,o._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataTPDKey:"permutive-data-tpd",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"8347d761-7b38-45f0-b0a8-34b664f7c00f.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0}},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},g=e=>{const r={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},t={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((n,i)=>{if(r.hasOwnProperty(i)){const r="true"===e[i];return Object.assign(Object.assign({},n),{[i]:r})}if(t.hasOwnProperty(i)){const r=Number(e[i]);return isNaN(r)?n:Object.assign(Object.assign({},n),{[i]:r})}return Object.assign(Object.assign({},n),{[i]:e[i]})}),{})},m=e=>Object.entries(e).reduce(((e,[r,t])=>{if(!(0===r.indexOf(l)))return e;const n=r.replace(l,"");return[...e,[n,t]]}),[]),h=(e,r,t)=>{var n;const a=(0,i.zG)(r,m,(e=>(0,d.m8)(...e)),g),s=null!==(n=p[e.environment])&&void 0!==n?n:{};return(0,d.PM)(p.default,s,e,((e,r)=>{const t=r.getItem(f),n=(0,d.PM)(t,e);return r.setItem(f,n),n})(a,t))},_=e=>{var r,t;const a="8347d761-7b38-45f0-b0a8-34b664f7c00f",s=void 0!==(null===(r=e[a])||void 0===r?void 0:r.q)&&void 0!==(null===(t=e[a])||void 0===t?void 0:t.config)?a:"permutive";return(0,i.zG)(e[s],(0,n.ij)("Can't find permutive tag on the page"),(0,n.UI)((e=>({tag:e,key:s}))))},v=({tag:e,key:r},t,n)=>Object.assign(Object.assign({},e),{config:h(Object.assign(Object.assign({},e.config),{windowKey:r}),t,n)}),b=(e,r,t)=>new u(e,r,t)},6112:(e,r,t)=>{t.d(r,{F:()=>a});var n=t(7112),i=t(4938);const a=(0,n.Y3)((()=>{const e=(0,i.e)();return e.postMessage({type:"noop",userId:null}),Promise.resolve(e)}),(e=>`Failed to start QueryWorker. Got ${e}`))},9848:(e,r,t)=>{t.d(r,{LA:()=>c});var n=t(9320),i=t(7209),a=t(6013);const s=(e,r,{network:t,state:n})=>{t.error(`Function "permutive.${r.functionName}" caused an error: ${e.message}`,n.userId.get())};function c(e,r,t,c,f,p,g=d){const m=function(e){const r=(0,n.uK)((e=>-1!==u.indexOf(e.functionName)))(e),t=r.right,s=r.left.filter((e=>"consent"!==e.functionName)),c=(0,i.Zt)(((e,r)=>o(e)&&o(r)?(0,a.lW)(l).compare(e.arguments[0],r.arguments[0]):(0,a.lW)(u).compare(e.functionName,r.functionName))),d=(0,n.DY)(c)(t);return d.concat(s)}(e),h=p.startSpan("queued_methods"),_={network:f,state:r.state};m.forEach((e=>{try{r=e.functionName,g.includes(r)||(e=>{e.functionName in t?t[e.functionName].apply(c,e.arguments):s(new Error("Does not exist."),e,_)})(e)}catch(r){const t=r instanceof Error?r:new Error("Unknown error.");s(t,e,_)}var r})),h.finish()}const o=e=>"addon"===e.functionName,u=["identify","trigger","addon","track"],d=["identify"],l=["dfp","appnexus_adserver","web"]},5791:(e,r,t)=>{t.d(r,{y:()=>v});var n=t(655),i=t(2688),a=t(9320),s=t(3735),c=t(9384),o=function(e,r){return function(){return r(e())}},u=function(e){return function(r){return o(r,e)}},d=s.a9,l=(s.yR,s.yR,c.F4,c.Xl,function(){return Math.random()});function f(e,r){return(0,s.zG)(l,u((function(t){return Math.floor((r-e+1)*t+e)})))}u((function(e){return e<.5}));var p=t(356),g=t(274),m=t(6013);class h{constructor(e,r,t,i,a){this.sdkInitTimestamp=e,this.api=r,this.messages=t,this.logger=i,this.enrichers=a,this.environment="web",this.pendingMetrics=[],this.pendingTimers={},this.messages.on("permutive:ready",(()=>{const e=f(3e4,9e4),r=t=>window.setTimeout((()=>(0,n.mG)(this,void 0,void 0,(function*(){const t=(yield this.processPending())?5e3:e();r(t)}))),t);r(5e3),(0,m.aq)((()=>{this.processPending.bind(this)}),navigator.userAgent)})),this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}track(e){this.pendingMetrics.push(e)}trackTimeSinceInit(e,r){const t=(performance.now()-this.sdkInitTimestamp)/1e3;this.logger.debug("metrics: timer stopped",e,t),this.track({name:e,value:t,labels:r})}startTimer(e,r){const t=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:t,labels:r},n}stopTimer(e,r){const t=this.pendingTimers[r];if(t){const n=(performance.now()-t.startTime)/1e3;this.logger.debug("metrics: timer stopped",e,n),this.track({name:e,value:n,labels:t.labels}),delete this.pendingTimers[r]}}processPending(){return(0,n.mG)(this,void 0,void 0,(function*(){if((0,a.xb)(this.pendingMetrics))return!0;const e=this.pendingMetrics;this.pendingMetrics=[];const r=()=>(0,s.zG)({},(e=>(0,p.dx)("continent",g.U.$ip_geo_info_continent)(e)),(e=>this.enrichers.enrich(e,!0).output));try{return yield this.api.metrics({context:Object.assign(Object.assign({},r()),{environment:this.environment,events_count:0,segments_count:0}),items:e}),!0}catch(r){return this.logger.error(`Metrics: Request failed from error ${(0,i.w)(r).message}`,e),this.pendingMetrics=[...this.pendingMetrics,...e],!1}}))}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}}class _{track(e){}trackTimeSinceInit(e,r){}startTimer(e,r){return""}stopTimer(e,r){}}function v(e,r,t,n,i,a,s){return(null!==(c=n.getData("metricsEnabled"))&&void 0!==c?c:(()=>{const e=Math.random()<=t.metricsSamplingPercentage/100;return n.setData("metricsEnabled",e),e})())?new h(e,r,i,a,s):new _;var c}},6992:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK,f:()=>initialisationSequence});var tslib__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(655),fp_ts_Either__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(70),fp_ts_function__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(7112),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9417),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8206),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(6815),_publisher_cohorts_legacy_models_PermutiveModelsWeb__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(8306),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8764),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5506),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(427),_core_crypto_AESCrypto__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(1228),_core_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4572),_core_events_EventsCacheWeb__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8790),_core_events_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(2923),_core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4314),_core_events_PermutiveUnprocessedPVCWeb__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3530),_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9175),_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3319),_core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(6715),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(4828),_core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(8167),_core_queries_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(4938),_core_session_SessionManager__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(3253),_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2747),_core_state_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1823),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(7738),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(1728),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(2472),_core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1714),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(7258),_core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(7846),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(6919),_core_store_LocalStorageWeb__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(3195),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1057),_core_third_party_ThirdPartyBase__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(2520),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2223),_dynamic_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(275),_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(3760),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(4762),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(8110),_utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(9409),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(6013),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(7749),_utils_Trace__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(998),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(3629),_Consent__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(590),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(7281),_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(8941),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(6785),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(3368),_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(6112),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(9848),_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(5791),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(4910);const sdkInitTimestamp=window.performance.now(),initialiseWebSDK=({queryWorker,tag,partialTagWithKey,urls,network,namespace,messages,logger,consentModule})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Y3)((()=>(0,tslib__WEBPACK_IMPORTED_MODULE_30__.mG)(void 0,void 0,void 0,(function*(){const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,trace=new _utils_Trace__WEBPACK_IMPORTED_MODULE_31__.l(config),sdkReadySpan=trace.startSpan("sdk_ready"),{consentTracking,consentValidation}=consentModule;window[windowKey].consent=consentValidation;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_32__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_32__.bk)(document.referrer)}),createInternalsSpan=trace.startSpan("internals"),eventHandler=new _utils_event_handler_PermutiveEventHandler__WEBPACK_IMPORTED_MODULE_33__.b,cookieStore=(0,_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_8__.S)(namespace,config,logger,consentTracking),localStorage=(0,_core_store_LocalStorageWeb__WEBPACK_IMPORTED_MODULE_17__.S)(namespace,logger,consentTracking),externalData=(0,_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_9__.S)(namespace,logger,consentTracking),clientContext=new _core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_34__.z(context),viewId=new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_16__.W(clientContext,config),userId=new _core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_15__.M(config,clientContext,cookieStore,externalData),permutiveData=(0,_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_12__.S)(config,namespace,logger,network,userId,consentTracking),eventSourceId=new _core_state_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_13__.$(permutiveData),enrichers=new _dynamic_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_35__.J,api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_36__.F(urls,config,network),metrics=(0,_initialisation_setupMetrics__WEBPACK_IMPORTED_MODULE_27__.y)(sdkInitTimestamp,api,config,permutiveData,messages,logger,enrichers),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_1__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identityPromise=identities.prepareThirdPartyIdentities(),models=new _publisher_cohorts_legacy_models_PermutiveModelsWeb__WEBPACK_IMPORTED_MODULE_37__.e(network,logger,api,metrics,permutiveData),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_38__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_39__.u(metrics,messages),sessionManager=yield _core_session_SessionManager__WEBPACK_IMPORTED_MODULE_11__.S.initialise(cookieStore,localStorage),_internals=new _core_internals_PermutiveInternals__WEBPACK_IMPORTED_MODULE_40__.P(logger,network,userId,viewId,messages,sessionManager,cookieStore,externalData);_internals.metrics=metrics,_internals.identities=identities;const eventsCache=new _core_events_EventsCacheWeb__WEBPACK_IMPORTED_MODULE_5__.K(config,namespace,logger,network,trace,metrics,userId,consentTracking),eventsBatch=new _core_events_PermutiveEventsBatch__WEBPACK_IMPORTED_MODULE_6__.c(eventHandler,api,metrics,userId,network,eventsCache),unprocessedPVC=new _core_events_PermutiveUnprocessedPVCWeb__WEBPACK_IMPORTED_MODULE_7__.w(config,namespace,metrics,new _core_crypto_AESCrypto__WEBPACK_IMPORTED_MODULE_41__.E,logger,consentTracking,network),customProperties=new _core_events_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_42__.X,queryManagerTransitionDebounceTime=1e3,queryManagerTransitionMaxDebounceTime=1e4,queryManager=new _core_queries_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_10__.c({customProperties,externalData,logger,messages,network,permutive:permutiveGlobal,permutiveData,queryWorker,realtime:permutiveRealtime,sessionManager,transitionDebounceMaxTime:queryManagerTransitionMaxDebounceTime,transitionDebounceTime:queryManagerTransitionDebounceTime,userId,viewId});_internals.queryManager=queryManager;const permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_43__.a(config,localStorage,logger,queryManager,permutiveData,eventSourceId,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_44__.i(messages),stateSync=new _core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_14__.N(api,network,sessionManager,permutiveData,queryManager,metrics,userId,eventSourceId,(0,_core_state_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_14__.e)()),thirdParty=new _core_third_party_ThirdPartyBase__WEBPACK_IMPORTED_MODULE_19__.U(network,logger,api,permutiveData,messages,sessionManager,metrics,identities,queryManager,permutiveGlobal,userId),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_2__.v(logger,permutiveGlobal,clientContext),state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_45__.u(permutiveData,permutiveReset,userId,viewId,eventsCache);_internals.state=state;const permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__.S)(namespace,logger,api,eventHandler,activationManager,sessionManager,metrics,viewId,userId,network,enrichers,clientContext,unprocessedPVC,eventsBatch,queryManager,stateSync,eventsCache,taskQueue,identities,permutiveReset,messages,_internals.addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,thirdParty,models,identitiesIngestor,permutiveGlobal,consentTracking);createInternalsSpan.finish(),[].forEach((s=>{(0,fp_ts_Either__WEBPACK_IMPORTED_MODULE_46__.Y3)((()=>eval(s)),(e=>{network.error(Object.assign(Object.assign({},e),{message:`Error running custom script ${s}`}),userId.get())}))})),_internals.addBlocker("permutive:queries:initialised"),messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods);const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0&&permutiveGlobal.identify(e)})),_internals.messages.on("permutive:blockers:empty",(()=>{permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getContext(),permutiveGlobal.addons=_internals.addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_26__.LA)(permutiveGlobal.q,_internals,permutiveGlobal,permutiveMethods,network,trace)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_20__.C)({_internals,logger,network,permutiveMethods,q:permutiveGlobal.q,clientContext}),loadAddonsSpan.finish();const loadEnrichersSpan=trace.startSpan("load_enrichers"),enricherEnv={api,config,clientContext,logger,permutiveData,metrics,sessionManager:_internals.sessionManager,enrichers,network},loadEnrichersPromise=(0,_dynamic_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_47__.H)(enricherEnv)();loadEnrichersPromise.then((()=>{loadEnrichersSpan.finish()})),yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__.TZ)({api,clientContext,eventsCache,externalData,global:permutiveGlobal,identities,identitiesIngestor,identityPromise,logger,messages,metrics,models,network,permutiveMethods,queryManager,reset:permutiveReset,stateSync,thirdParty,trace,unprocessedPVC,userId}),(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_23__.MA)({logger,queryManager,models,trace}),yield loadEnrichersPromise,(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_48__.R)(queryManager,messages,metrics,state,logger),sdkReadySpan.finish()}))),(e=>`Exception during initialisation. Got ${e}`)),initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_49__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_50__.Oc)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("queryWorker",(()=>_initialisation_queryWorkerInit__WEBPACK_IMPORTED_MODULE_25__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("sessionStorage",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_50__.l9)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_24__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("queryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_32__.zM)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("tag",(({partialTagWithKey:e,queryParams:r,sessionStorage:t})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_24__.je)(e,r,t)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("logger",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_51__.SX)(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("urls",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_52__.s(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("network",(({tag:e,urls:r,logger:t})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_24__.uU)(r,e.config,t)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("namespace",(({tag:e})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_53__.L(e.config)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("messages",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_54__.Q))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consentModule",(({tag:e,namespace:r,logger:t,messages:n})=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.fF)((()=>(0,_Consent__WEBPACK_IMPORTED_MODULE_22__.NY)(n,t,r,e.config))))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consent",(e=>(0,_Consent__WEBPACK_IMPORTED_MODULE_22__.D1)(e))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.tS)((e=>initialiseWebSDK(e))))},6013:(e,r,t)=>{t.d(r,{Fi:()=>P,G6:()=>D,Gz:()=>y,PM:()=>f,PQ:()=>S,Z_:()=>I,a4:()=>m,aq:()=>b,b0:()=>q,b2:()=>g,cO:()=>M,eu:()=>_,fl:()=>E,hk:()=>l,j5:()=>T,k$:()=>w,ke:()=>v,lW:()=>O,m8:()=>k,rB:()=>h,vp:()=>p});var n=t(4268),i=t(3735),a=t(6567),s=t(7209),c=t(6017),o=t(356),u=t(5857),d=t(2751);const l=(0,o.hX)((0,c.ff)(o.xb));function f(...e){return e.reduce(((e,r)=>Object.assign(Object.assign({},e),r)),{})}function p(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r&=r;return r}(0,c.ff)(d.xb);function g(){let e,r;return{promise:new Promise(((t,n)=>{e=t,r=n})),reject:r,resolve:e}}function m(e,r,t={}){const{waitTimeInMs:n,exponentialBackOff:s,maxAttempts:c}=f({waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},t);let o=0;const u=t=>new Promise((n=>Promise.resolve(r()).then((r=>r?Promise.resolve(e()).then((e=>n((0,a.G)(e)))):(0,i.zG)(o++,(e=>e<c?setTimeout((()=>n(u(t*(s?2:1)))),t):n(a.YP)))))));return u(n)}function h(e){const r={equals:(r,t)=>r[0]===t[0]&&e.equals(r[1],t[1])},t=(0,u.Eh)(r);return(0,n.Uz)((e=>new Set(Object.entries(e))))(t)}function _(e,r){const t=Object.create(null);for(const n of r)t[n]=e[n];return t}function v(e){if("string"==typeof e){const r=+e;if(!isNaN(r))return r}return e}function b(e,r){const t=r=>{if(!n&&r)return n=!0,e()};let n=!1;["blur","visibilitychange"].forEach((e=>{window.addEventListener(e,(()=>t(document.hidden&&function(e){return/Mobi|Android/i.test(e)}(r))))})),["beforeunload","pagehide"].forEach((e=>{window.addEventListener(e,(()=>t(!0)))}))}function w(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function y(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function q(e,r){const t=Object.keys(e),n=t.length,i={};for(let s=0;s<n;s++){const n=t[s],c=r(n,e[n]);(0,a.pC)(c)&&(i[n]=c.value)}return i}function k(...e){const r={},t=e.length;for(let n=0;n<t;n++){const[t,i]=e[n];r[t]=i}return r}function E(e,r){return q(e,((e,t)=>r(e)?(0,a.G)(t):a.YP))}function D(e){return/^((?!chrome|android).)*safari/i.test(e)}function P(e){}function S(e,r){return new Promise((t=>{var n;setTimeout((()=>{Promise.resolve(e()).then(t)}),null!==(n=null==r?void 0:r.timeout)&&void 0!==n?n:0)}))}function M(e,r){if(e===r)return!0;if(null==e||null==r)return!1;if(e.length!==r.length)return!1;for(let t=0;t<e.length;++t)if(e[t]!==r[t])return!1;return!0}function O(e){return(0,s.Zt)(((r,t)=>{const n=e.indexOf(r),i=e.indexOf(t);switch(!0){case-1===n&&-1===i:return 0;case-1!==n&&-1===i:return-1;case-1===n&&-1!==i:return 1;default:return n<=i?-1:1}}))}function T(e){return e.reduce(((e,r)=>(e[r]=!0,e)),{})}function I(e,r,t){return(...n)=>{try{return t(...n)}catch(t){e.error(t,r.get())}}}},998:(e,r,t)=>{t.d(r,{l:()=>n});class n{constructor(e){var r;this.config=e,this.shouldUsePerformanceMark=!1,this.placeholderSpan={spanId:null,finish:()=>({})},this.shouldUsePerformanceMark=(null===(r=null===window||void 0===window?void 0:window.performance)||void 0===r?void 0:r.mark)&&this.config.tracingEnabled}startSpan(e){var r;if(this.shouldUsePerformanceMark){const t=this.generateId(),n=`permutive_${e}`,i=`${n}${t}_start`;return null===(r=null===window||void 0===window?void 0:window.performance)||void 0===r||r.mark(i),{spanId:i,finish:()=>{var e,r;null===(r=null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.measure)||void 0===r||r.call(e,n,i)}}}return this.placeholderSpan}generateId(){return"_"+Math.random().toString(36).substr(2,9)}}},9409:(e,r,t)=>{t.d(r,{b:()=>n});class n{constructor(){this.events=[],this.listeners=[]}newEvent(e,r){this.events.push([e,r]),[...this.listeners].forEach((t=>{this.handle(e,r,t)}))}addListener(e){this.listeners.push(e);const r={replay:()=>(this.replay(e),r),remove:()=>(this.remove(e),r)};return r}handle(e,r,t){const n="string"==typeof t.name&&e.name===t.name,i=t.name.test&&t.name.test(e.name),a=n||i;if(a)try{t.callback(e,r)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}a&&t.once&&this.remove(t)}replay(e){let r=-1!==this.listeners.indexOf(e);for(let t=0;t<this.events.length&&r;t++)this.handle(this.events[t][0],this.events[t][1],e),r=-1!==this.listeners.indexOf(e)}remove(e){const r=this.listeners.indexOf(e);-1!==r&&this.listeners.splice(r,1)}}},7545:(e,r,t)=>{t.d(r,{b:()=>i});var n=t(6013);class i{constructor(e,r){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=r}schedule(e,r=this.timeoutDurationInMilliseconds,t=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,r,t)}scheduleAccumulated(e,r,t=this.timeoutDurationInMilliseconds,n=this.maxTimeOutDurationInMilliseconds){return this.debounce(e,t,n,r)}scheduleForPageUnload(e){return(0,n.aq)(e,navigator.userAgent)}debounce(e,r,t,i){let a,s,c=null==i?void 0:i.empty,o=[];return u=>{i&&(c=i.concat(c,u));const d=(0,n.b2)();o.push(d);return a&&window.clearTimeout(a),a=window.setTimeout((()=>{window.clearTimeout(s),s=null;const r=e(i?c:u);o.forEach((e=>e.resolve(r))),c=null==i?void 0:i.empty,o=[]}),r),s||(s=window.setTimeout((()=>{window.clearTimeout(a),s=null;const r=e(i?c:u);o.forEach((e=>e.resolve(r))),c=null==i?void 0:i.empty,o=[]}),t)),d.promise}}}},7749:(e,r,t)=>{t.d(r,{i:()=>n});class n{constructor(e){this.messages=e,this.queue=[],this.nextNotify=null,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},r=(new Date).getTime();null===this.nextNotify||this.nextNotify<r-50?(this.nextNotify=r,e()):this.nextNotify<=r&&(this.nextNotify=r+50,window.setTimeout(e,50))}execute(){if(0===this.queue.length)return;let e=!1,r=!1,t=0;for(let n=0;n<this.queue.length;n++){const i=this.queue[n];if(i.complete)t+=1;else if(i.started)r=!0,e=e||i.blocks();else{if(i.waits()&&r)break;e||(r=!0,e=e||i.blocks(),i.execute((()=>{this.notify()})))}}this.queue.splice(0,t)}size(){return this.queue.length}}},3629:(e,r,t)=>{t.d(r,{_Y:()=>s,bk:()=>a,zM:()=>i});var n=t(3735);const i=()=>{var e,r;const t=null===(r=null===(e=window.location.href.split("?")[1])||void 0===e?void 0:e.split("#")[0])||void 0===r?void 0:r.split("&");return void 0===t?{}:t.reduce(((e,r)=>{const[t,n]=r.split("=");return Object.assign(Object.assign({},e),{[t]:n})}),{})},a=e=>{if(!e)return"";return(0,n.zG)(e,(e=>{const r=e.length-1;return"/"===e[r]?e.slice(0,r):e}))};function s(e){const r=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),t=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),n=e.match(/localhost/);if((null==t?void 0:t.length)>0){const r=e.split(".").reverse();return r.length>=3&&r[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?r[2]+"."+r[1]+"."+r[0]:r[1]+"."+r[0]}return(null==r?void 0:r.length)>0?r[0]:(null==n?void 0:n.length)>0?"localhost":""}},8306:(e,r,t)=>{t.d(r,{e:()=>l});var n=t(655),i=t(6567);const a=(e,r,t,n)=>r+(t-r)*n/(Math.pow(2,e)-1),s=(e,r)=>{const t=(e,r)=>{const t=e.toString(16);return("0".repeat(r)+t).slice(Math.min(-r,-t.length))};return`${t(e.getUint32(r),8)}-${t(e.getUint16(r+4),4)}-${t(e.getUint16(r+6),4)}-${t(e.getUint16(r+8),4)}-${t(e.getUint32(r+10),8)}${t(e.getUint16(r+14),4)}`},c=e=>{const r=[1,2],t=e.getInt8(0);if(1===t)return o(e);if(2===t)return u(e);{const n=(0,i.Y3)((()=>s(e,1))),a=(0,i.g_)((()=>"Couldn't decode model id"),(e=>`Model id was ${e}`))(n);throw new Error(`Decoding only supported for version(s): ${r}; Supplied version was ${t}; ${a}`)}},o=e=>d(e,1),u=e=>d(e,2),d=(e,r)=>{const t=s(e,1),n=((e,r)=>{switch(String.fromCharCode(e.getInt8(r))){case"1":return"1p";case"3":return"3p"}})(e,17),i=e.getInt8(18),a=e.getFloat32(19),c=e.getFloat32(23),[o,u]=((e,r,t,n,i,a)=>{const s={};let c=0;do{let t=null;1===a?(c=e.getUint16(r),t=e.getUint16(r+2),r+=4):(c=e.getUint32(r),t=e.getUint16(r+4),r+=6),s[0===c?"const":c]=t.toString(36)}while(0!==c);return[s,r]})(e,27,0,0,0,r);return[{version:r,id:t,data_preference:n,weights:o,precision:i,min:a,max:c},u]};class l{constructor(e,r,t,i,s){this.network=e,this.logger=r,this.api=t,this.metrics=i,this.permutiveData=s,this.MODELS_LAST_UPDATED_KEY="models_last_updated",this.MODELS_DATA_KEY="models_data",this.MODELS_SYNC_TIMEOUT_IN_SECONDS=86400;const c=s.getData(this.MODELS_LAST_UPDATED_KEY),o=i.startTimer("sdk_load_lookalike_models_task_duration_seconds",{}),u=()=>this.fetchModels().then((e=>(this.permutiveData.setData(this.MODELS_DATA_KEY,e),this.permutiveData.setData(this.MODELS_LAST_UPDATED_KEY,(new Date).getTime()),e))).catch((e=>(this.network.error("Failed decoding binary models.\nError: "+e),{}))),d=()=>(0,n.mG)(this,void 0,void 0,(function*(){return this.permutiveData.getData(this.MODELS_DATA_KEY)}));this.models=(()=>(isNaN(c)||(new Date).getTime()>c+1e3*this.MODELS_SYNC_TIMEOUT_IN_SECONDS?u():d()).then((e=>(e=>{const r=Object.keys(e);return r.length>0&&e[r[0]].hasOwnProperty("precision")})(e)?(e=>{const r={},t=Object.keys(e),n=e=>{const r={"1p":{}},{precision:t,min:n,max:i}=e,s=e["1p"],c=Object.keys(s);for(let e=0;e<c.length;e++){const o=c[e],u=parseInt(s[o],36);r["1p"][o]=a(t,n,i,u)}return r};for(let i=0;i<t.length;i++){const a=t[i],s=e[a];r[a]=n(s)}return r})(e):e)))().then((e=>(this.metrics.stopTimer("sdk_load_lookalike_models_task_duration_seconds",o),e)))}getModels(){return this.models}extractModelsFromJsonArray(e,r){const t={};for(let n=0;n<e.length;n++){const i=e[n],{id:a,weights:s}=i;if(void 0===a||void 0===s)continue;const c=r(i);Object.keys(s).forEach((e=>{c["1p"][e]=s[e]})),t[a]=c}return t}fetchModels(){const e=()=>this.api.modelsJson(this.metrics).then((e=>this.extractModelsFromJsonArray(e.models,(()=>({"1p":{}}))))).catch((e=>(this.network.error("Failed fetching json models.\nError: "+e),{})));return(()=>this.api.modelsBinary(this.metrics).then((e=>this.extractModelsFromJsonArray(function(e){const r=[];let t=0;for(;t<e.byteLength;){const[n,i]=c(new DataView(e,t));r.push(n),t+=i}return r}(e),(({precision:e,max:r,min:t})=>({"1p":{},precision:e,min:t,max:r}))))).catch((r=>(this.logger.log("Failed fetching binary models, reverting to JSON.\nError: "+r),this.metrics.track({name:"sdk_binary_models_missing_count",value:1,labels:{}}),e()))))()}}}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(70),r=__webpack_require__(3735),t=__webpack_require__(3760),n=__webpack_require__(6567),i=__webpack_require__(274);__webpack_require__(6013);class a extends class{constructor(e,r){this.config=e,this.logger=r,this.defaultReplacementMap=this.filterReplacementMap(this.config.defaultMap),this.replacementMap=this.setReplacementMap(this.config.replacementMap)}get getReplacementMap(){return this.replacementMap}setReplacementMap(e){return this.replacementMap=Object.assign(Object.assign({},this.defaultReplacementMap),this.filterReplacementMap(e)),this.logger.debug(`enrichers[${this.config.name}]: replacement map updated`,this.getReplacementMap),this.getReplacementMap}}{filterReplacementMap(e){return e}}const s="geoip",c="enricher:geoip",o={},u={include_geo:(null==o?void 0:o.include_geo)||!0,include_isp:(null==o?void 0:o.include_isp)||!0,include_ip_hash:(null==o?void 0:o.include_ip_hash)||!0,include_ip:(null==o?void 0:o.include_ip)||!1},d=(e,t)=>{const{$ip_geo_info_continent:c,$ip_address:o,$ip_address_hash:u}=i.U,d={$ip_geo_info_continent:c,$ip_address:o,$ip_geo_info:{city:i.U.$ip_geo_info_city,continent:i.U.$ip_geo_info_continent,country:i.U.$ip_geo_info_country,postal_code:i.U.$ip_geo_info_postal_code,province:i.U.$ip_geo_info_province},$ip_address_hash:u,$ip_isp_info:{autonomous_system_number:0,isp:i.U.$ip_isp_info_isp,autonomous_system_organization:i.U.$ip_isp_info_autonomous_system_organization,organization:i.U.$ip_isp_info_organization}},l=(0,r.zG)((0,n.Y3)((()=>({$ip_geo_info:e.geo_info,$ip_geo_info_continent:e.geo_info.continent,$ip_isp_info:e.isp_info,$ip_address:e.ip,$ip_address_hash:e.ip_hash}))),(0,n.fS)((()=>({}))));return new a({name:s,defaultMap:d,replacementMap:l},t)},l=({clientContext:e,api:r,permutiveData:t,metrics:n,sessionManager:i,enrichers:a,network:s,logger:o,config:l})=>{const p=r=>{r.isp_info&&e.updateContext(["isp",r.isp_info.isp],["organization",r.isp_info.organization],["autonomous_system_number",r.isp_info.autonomous_system_number],["autonomous_system_organization",r.isp_info.autonomous_system_organization]),r.geo_info&&e.updateContext(["continent",r.geo_info.continent],["country",r.geo_info.country],["city",r.geo_info.city],["province",r.geo_info.province],["postal_code",r.geo_info.postal_code])},g=t.getData(c);return g&&g.session_id===i.getSessionId()?(p(g.data),a.register(d(g.data,o)),Promise.resolve()):(o.debug("enrichers[geoip]: start HTTP request"),f(r,n,l,u).then((e=>(o.debug("enrichers[geoip]: end HTTP request"),p(e),t.setData(c,{session_id:i.getSessionId(),data:e}),e))).catch((e=>(s.error(`Error while registering the geoip enricher: got ${e}`),null))).then((e=>{a.register(d(e,o))})))},f=(e,r,t,i)=>{const a=[];return i.include_geo&&a.push(["include","geo"]),i.include_isp&&a.push(["include","isp"]),i.include_ip&&a.push(["include","ip"]),i.include_ip_hash&&a.push(["include","ip_hash"]),e.reqWithMetrics(r,"sdk_http_geoip_seconds",{url:e.urls.getEndpointUrl("/geoip",(0,n.G)(t.apiVersion),a),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})},p=()=>(0,t.B)({load:l});const g=()=>{};var m,h=__webpack_require__(6992);m=h.f,p(),g(),m().then((0,e.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),r.Q1))})()})();