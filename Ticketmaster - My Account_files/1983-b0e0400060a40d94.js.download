"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1983],{89380:function(e,r,n){n.d(r,{BH:function(){return re},BO:function(){return w},GR:function(){return Z},IT:function(){return ie},K1:function(){return q},Kq:function(){return k},RJ:function(){return g},U7:function(){return X},VI:function(){return j},Vm:function(){return F},Ym:function(){return x},_O:function(){return z},_g:function(){return K},ax:function(){return G},df:function(){return C},k:function(){return b},m1:function(){return M},mR:function(){return ae},n1:function(){return A},nC:function(){return W},rW:function(){return $},sP:function(){return U},tT:function(){return Q},uK:function(){return te},uT:function(){return ee},vQ:function(){return y},wM:function(){return N},wt:function(){return ne},x$:function(){return ce},yO:function(){return p}});var t=n(59499),o=n(22222),i=n(33259),a=n(7826),c=n.n(a),u=n(256),s=n(40971);function l(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?l(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var f=function(e){return{unaffiliated:0,employed:1,actingOnBehalf:2,organiser:3}[e]||0},m=function(e){return new Date(e.split("T")[0]).toISOString()},v=function(e){var r=e.sellerType,n=e.accountHolderFirstName,t=e.accountHolderLastName,o=e.accountNumber,i=e.seAccountNumber,a=e.sortCode,c=e.clearingCode,u=e.currencyCode,s=e.address1,l=e.address2,f=e.townCity,v=e.county,y=e.postCode,p=e.dateOfBirth,g=e.phoneNumber,b=e.businessName,N=e.registrationNumber,w=e.vatNumber,C=e.country.countryCode,A=e.iban,k=e.accountType,E=e.createListingUrl,S="/api/resale/user"===e.updateUserUrl;return d({isBusinessSeller:"businessSeller"===r,bankDetails:d(d({currencyCode:u,accountHolder:"".concat(n," ").concat(t)},"/api/resale/user/listing"===E&&{dateOfBirth:m(p)}),{},{phoneNumber:g,accountHolderAddress:{addressLine1:s,addressLine2:l,town:f,county:v,countryCode:C,postCode:y}},function(){switch(k){case"acsort":return{accountNumber:o,sortCode:a};case"seAcClearing":return{accountNumber:i,sortCode:c};default:return{iban:A.toUpperCase()}}}()),businessDetails:{businessName:b,registrationNumber:N,vatNumber:w}},S&&{dateOfBirth:m(p)})},y=(0,o.createSelector)(s.AP,(function(e){return e.reseller.formValues}),s.hH,(function(e,r,n){return function(t){var o,i=t.eventId,a=t.orderId,c=t.email,s=t.firstName,l=t.lastName,d=n(a),m=e(a,i),v=d||{},y=v.orderToken,p=v.currency,g=v.deliveries,b=v.id,N=r.sellPrice,w=r.selectedTickets,C=r.accountHolderFirstName,A=r.accountHolderLastName,k=r.affiliationType,E=r.sellerType,S=r.accountHolderName,h=r.address1,T=r.address2,D=r.country,I=r.county,O=r.postCode,_=r.townCity,P=r.accountNumber,L=r.seAccountNumber,B=r.iban,R=r.phoneNumber,V=r.sortCode,H=r.clearingCode,F=r.businessName,U=r.registrationNumber,j=r.vatNumber,K=r.dateOfBirth,M=void 0===K?"":K;return{eventInfo:{eventId:i,offsaleDateTime:m.offSaleDateTime},orderInfo:{orderId:b,ticketIds:w.map((function(e){return e.id})),sellPrice:100*parseFloat(N),deliveryMethod:(0,u.gv)(g,null===(o=w[0])||void 0===o?void 0:o.deliveryId),orderToken:y},userInfo:{email:c,firstName:s,lastName:l||A,sellerAffiliationType:f(k),isBusinessSeller:"businessSeller"===E,dateOfBirth:M.split("T")[0]},bankDetails:{accountHolder:S||"".concat(C," ").concat(A),accountHolderAddress:{addressLine1:h,addressLine2:T,countryCode:null===D||void 0===D?void 0:D.countryCode,county:I,postCode:O,town:_},accountNumber:L||P,currencyCode:p,iban:B,phoneNumber:R,sortCode:H||V},businessDetails:{businessName:F,registrationNumber:U,vatNumber:j}}}})),p=(0,o.createSelector)(s.AP,(function(e){return e.reseller.formValues}),s.hH,(function(e,r,n){return function(e){var t,o=e.eventId,i=e.orderId,a=e.email,c=e.firstName,s=e.lastName,l=n(i),m=r.sellPrice,v=r.selectedTickets,y=r.affiliationType,p=r.sellerType,g=r.businessName,b=r.registrationNumber,N=r.vatNumber,w="businessSeller"===p?{businessName:g,registrationNumber:b,vatNumber:N}:void 0;return{event:{id:o},order:{id:null===l||void 0===l?void 0:l.id,ticketIds:v.map((function(e){return e.id})),sellPrice:100*parseFloat(m),deliveryMethod:(0,u.gv)(null===l||void 0===l?void 0:l.deliveries,null===(t=v[0])||void 0===t?void 0:t.deliveryId),orderToken:null===l||void 0===l?void 0:l.orderToken},user:d({email:a,firstName:c,lastName:s,sellerAffiliationType:f(y),isBusinessSeller:"businessSeller"===p},w?{businessDetails:w}:{})}}})),g=(0,o.createSelector)((function(e){return e.reseller.formValues}),(function(e){return e.config.currencyCode}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(n){var t=n.url,o=void 0===t?"":t,i=n.user;return d(d({},v(d(d({},e),{},{currencyCode:r,updateUserUrl:o}))),{},{email:i.info.email,firstName:i.info.firstName,lastName:i.info.lastName||e.accountHolderLastName})}})),b=function(e){return e.reseller.formValues.listingCancel},N=function(e){return e.reseller.formValues.stage},w=function(e){var r;return null===(r=e.orders)||void 0===r?void 0:r.resaleUser},C=function(e){return e.orders.stage.resaleUser},A=(0,o.createSelector)(w,(function(e){return e&&!(0,i.xbD)(e)&&(e.hasListings||e.hasSales)})),k=function(e,r,n){var t,o,a,u=r||e.config.currencyCode,s=e.orders.resaleUser||{},l="UK"===e.config.countryCode?"GB":e.config.countryCode,f=function(e,r){if(e&&Array.isArray(e.bankAccounts))return e.bankAccounts.find((function(e){return e.currencyCode===r}))}(s,u)||{};if((0,i.xbD)(s)||(0,i.xbD)(f)){var m=n.find((function(e){return e.countryCode===l}));return{country:m,accountType:m.defaultAccountType,phoneNumber:m.dialCode||"+",prefilled:!0}}var v=f.accountHolder,y=f.accountNumber,p=f.sortCode,g=f.iban,b=f.accountHolderAddress,N=void 0===b?{}:b,w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=e.split(" ").slice(0,1).join(" "),n=e.split(" ").slice(1).join(" ");return{accountHolderFirstName:r,accountHolderLastName:n}}(v),C=w.accountHolderFirstName,A=w.accountHolderLastName,k=N.addressLine1,E=N.addressLine2,S=N.countryCode,h=void 0===S?l:S,T=N.county,D=N.postCode,I=N.town,O="SE"===h?"seAcClearing":"AU"===h?"auAcBsb":"NZ"===h?"acBranch":y&&p?"acsort":"iban",_=n.find((function(e){return e.countryCode===h})),P=!!(null!==(t=s.bankDetails)&&void 0!==t&&t.sortCode&&null!==(o=s.bankDetails)&&void 0!==o&&o.accountNumber||null!==(a=s.bankDetails)&&void 0!==a&&a.iban),L=s.isBusinessSeller?"businessSeller":"privateSeller",B=s.businessDetails&&{businessName:s.businessDetails.businessName,registrationNumber:s.businessDetails.registrationNumber,vatNumber:s.businessDetails.vatNumber};return c()(d(d(d({accountHolderName:v,accountHolderFirstName:C,accountHolderLastName:A,accountType:O},function(){switch(O){case"acsort":case"auAcBsb":case"acBranch":return{accountNumber:y,sortCode:p};case"seAcClearing":return{seAccountNumber:y,clearingCode:p};default:return{iban:g}}}()),{},{sellerType:L,prefillSellerType:L,prefillPaymentDetails:P,address1:k,address2:E,country:_,county:T,postCode:D,townCity:I,phoneNumber:s.phoneNumber||_.dialCode||"+",dateOfBirth:s.dateOfBirth,prefillDateOfBirth:s.dateOfBirth,affiliationType:"unselected"},B),{},{prefilled:!0}))},E=[401,403],S=[502,503,504],h=["ERR_INVALID_BANK_DETAILS","ERR_ACCOUNT_HAS_NO_IBAN","ERR_SELLER_KYC_BLOCKED","ERR_SEATS_ON_SALE","ERR_PAST_EVENT"],T="myAccount.listingFlow.networkError.auth",D="myAccount.listingFlow.networkError.timeout",I="myAccount.listingFlow.networkError.generic",O="myAccount.listingFlow.networkError.pastEvent",_="myAccount.listingFlow.networkError.seatsOnSale",P="myAccount.sellerDetails.apiError.generic",L="myAccount.listingFlow.networkError.listingError.invalidBankDetails.accountError",B="myAccount.listingFlow.networkError.listingError.invalidBankDetails.ibanError",R="myAccount.listingFlow.networkError.listingError.noIbanError",V="myAccount.listingFlow.networkError.listingError.kycBklockedError",H=function(e){return e?e.split("-")[0]:null},F=function(e){return e.reseller.formValues.selectedTickets},U=function(e){return e.reseller.formErrors.resaleTicketSelection},j=function(e){return e.reseller.formErrors},K=function(e){return e.reseller.formValues},M=function(e){return e.reseller.formValues.sellPrice},G=function(e){return e.reseller.formValues.sellerDetails.stage},x=(0,o.createSelector)(K,(function(e){var r=e.accountType,n=e.sellerDetails,t=n.stage,o=n.errorStatus,i=n.errorCode,a=n.errorCid,c=H(a);if("error"!==t)return!1;var u=P;if(E.includes(o)&&(u=T),S.includes(o)&&(u=D),h.includes(i))switch(i){case"ERR_INVALID_BANK_DETAILS":if("acsort"===r||"seAcClearing"===r||"auAcBsb"===r)return{cid:c,message:L,errorCode:i};if("iban"===r)return{cid:c,message:B,errorCode:i};break;case"ERR_ACCOUNT_HAS_NO_IBAN":return{cid:c,message:R,errorCode:i}}return{cid:c,message:u}})),Q=(0,o.createSelector)(K,(function(e){var r=e.stage,n=e.errorStatus,t=e.errorCid,o=e.errorCode,i=e.accountType;if("error"!==r)return{};var a={cid:H(t),retry:!0};if(E.includes(n))return d(d({},a),{},{message:T});if(S.includes(n))return d(d({},a),{},{message:D});if(h.includes(o))switch(o){case"ERR_INVALID_BANK_DETAILS":if("acsort"===i||"seAcClearing"===i||"auAcBsb"===i)return d(d({},a),{},{retry:!1,message:L,errorCode:o});if("iban"===i)return d(d({},a),{},{retry:!1,message:B,errorCode:o});break;case"ERR_ACCOUNT_HAS_NO_IBAN":return d(d({},a),{},{retry:!1,message:R,errorCode:o});case"ERR_SELLER_KYC_BLOCKED":return d(d({},a),{},{retry:!1,message:V,errorCode:o});case"ERR_SEATS_ON_SALE":return d(d({},a),{},{message:_,errorCode:o});case"ERR_PAST_EVENT":return d(d({},a),{},{retry:!1,message:O,errorCode:o});default:return d(d({},a),{},{retry:!1,message:I})}return d(d({},a),{},{retry:!1,message:I})})),Y={PASSED:{value:"dataProvided",category:"confirmed",clickable:!1,icon:"checkmark",showPrompt:!0},DATA_PROVIDED:{value:"dataProvided",category:"confirmed",clickable:!1,icon:"checkmark",showPrompt:!1},RETRY_LIMIT_REACHED:{value:"awaitingData",category:"pending",clickable:!0,icon:"exclamationMark",showPrompt:!0},FAILED:{value:"failed",category:"blocked",clickable:!1,icon:"exclamationMark",showPrompt:!0},AWAITING_DATA:{value:"awaitingData",category:"pending",clickable:!0,icon:"exclamationMark",showPrompt:!0},PENDING:{value:"pending",category:"pending",clickable:!0,icon:"clock",showPrompt:!0},INVALID_DATA:{value:"invalidData",category:"invalid",clickable:!0,icon:"cross",showPrompt:!0}},Z=(0,o.createSelector)([function(e){return e.reseller.paymentVerification.stage}],(function(e){return"success"===e})),W=function(e){return e.reseller.paymentVerification.stage},q=function(e){return e.reseller.paymentVerification.data.payoutAllowed},$=(0,o.createSelector)([function(e){var r;return null===(r=e.reseller.paymentVerification.data.photoId)||void 0===r?void 0:r.verificationStatus},function(e){var r;return null===(r=e.reseller.paymentVerification.data.identity)||void 0===r?void 0:r.verificationStatus}],(function(e,r){return Y[e]||Y[r]})),J=(0,o.createSelector)([function(e){return e.reseller.paymentVerification.data.bankAccounts}],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e[0]})),X=function(e){return e.reseller.paymentVerification.bankStatement.stage},z=(0,o.createSelector)([J],(function(e){return Y[null===e||void 0===e?void 0:e.verificationStatus]})),ee=(0,o.createSelector)([$,z],(function(e,r){var n=[null===r||void 0===r?void 0:r.category,null===e||void 0===e?void 0:e.category];return n.every((function(e){return"confirmed"===e}))?"confirmed":n.some((function(e){return"blocked"===e}))?"blocked":n.some((function(e){return"invalid"===e}))?"invalid":n.some((function(e){return"pending"===e}))?"pending":void 0})),re=(0,o.createSelector)([ee],(function(e){return"confirmed"===e})),ne=(0,o.createSelector)([function(e){return e.reseller.paymentVerification.identityDocument.stage.fileOneOfTwo}],(function(e){return"uploaded"===e})),te=(0,o.createSelector)([function(e){return e.reseller.paymentVerification.identityDocument.stage.fileTwoOfTwo}],(function(e){return"uploaded"===e})),oe=(0,o.createSelector)([function(e){return e.reseller.paymentVerification.identityDocument.stage.fileOneOfTwo},function(e){return e.reseller.paymentVerification.identityDocument.stage.fileTwoOfTwo}],(function(e,r){var n=[e,r];return n.some((function(e){return"error"===e}))?"error":n.some((function(e){return"uploading"===e}))?"uploading":n.every((function(e){return"uploaded"===e}))?"uploaded":void 0})),ie=(0,o.createSelector)([function(e){return e.reseller.paymentVerification.identityDocument.stage.singleFile},oe],(function(e,r){var n=[e,r];return n.some((function(e){return"error"===e}))?"error":n.some((function(e){return"uploading"===e}))?"uploading":n.some((function(e){return"uploaded"===e}))?"uploaded":void 0})),ae=function(e){return e.reseller.formValues.listingCancelStage},ce=function(e){return!e.reseller.formErrors.sellPrice}},24029:function(e,r,n){n.d(r,{Z:function(){return c}});var t=n(67294),o=n(14442),i=n(75308),a=n(96183);function c(){var e=(0,o.CG)(i.$W);return(0,t.useMemo)((function(){return{track:function(r,n,t){(0,a.BF)(e,r,n,t)}}}),[e])}},15213:function(e,r,n){n.d(r,{Z:function(){return a}});var t=n(67294),o=n(14442),i=n(75308);function a(){var e=(0,o.CG)(i.VD),r=(0,o.CG)(i.nI);return(0,t.useMemo)((function(){var n=encodeURIComponent;return{user:{orders:function(){return e},pastOrders:function(){return r},order:{view:function(e){var r=e.eventId,t=e.orderId;return"/user/order/".concat(n(t),"/").concat(n(r),"/view")},transfer:function(e){var r=e.eventId,t=e.orderId;return"/user/order/".concat(n(t),"/").concat(n(r),"/transfer")},receipt:function(e){var r=e.orderId;return"/user/order/".concat(n(r),"/receipt")},sell:function(e){var r=e.eventId,t=e.orderId;return"/user/order/".concat(n(t),"/").concat(n(r),"/sell")},sellSuccess:function(e){var r=e.eventId,t=e.orderId,o=e.listingId;return"/user/order/".concat(n(t),"/").concat(n(r),"/sell/").concat(o,"/success")}},memberships:function(){return"/user/memberships"}},review:{write:function(e){var r=e.attractionId;return"/review?attractionId=".concat(n(r))}}}}),[e,r])}},96183:function(e,r,n){n.d(r,{BF:function(){return a},_K:function(){return c},aV:function(){return s},dP:function(){return o},hs:function(){return i},s6:function(){return t}});var t="High Demand",o="Low Demand",i="EDP",a=function(e,r,n,t,o){var i=5;return function a(){var c="";return"MFOL"===e?c="gaPremiumMFX.send":"TMOL"===e?c="gaPremiumHOST.send":console.error("GA tracking platform not found"),--i<0?Promise.reject("GA failed to load"):window.ga&&c?window.ga(c,"event",{eventCategory:r,eventAction:n,eventLabel:t,eventValue:o,nonInteraction:!0}):u(a,1e3)}()},c=function(e){window.monetateQ=window.monetateQ||[],window.monetateQ.push(["setPageType","tmuk_ccp_bba_offercard"]),window.monetateQ.push(["addCartRows",[{productId:e,quantity:"1",sku:"Ticket_Fee",unitPrice:"00.00",currency:"GBP"}]]),window.monetateQ.push(["trackData"])},u=function(e,r){return new Promise((function(e){return setTimeout(e,r)})).then(e).catch(console.error)},s=function(e){var r=e.event,n=void 0===r?"eventTracker":r,t=e.category,o=void 0===t?"":t,i=e.label,a=void 0===i?"":i,c=e.action,u=void 0===c?"":c,s=e.value,l=void 0===s?"":s,d=e.nonInteraction,f=void 0===d?0:d;window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:n,"data-event-category":o,"data-event-label":a,"data-event-action":u,"data-event-value":l||0,nonInteraction:f})}}}]);